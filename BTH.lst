Sjasm Z80 Assembler v0.42c - www.xl2s.tk             [2024.04.26 - 13:24:46]

.\BTH.asm
Errors: 0

       1   00:0000                      	output "BTH.rom" 
       2   00:5AA5                      
       3   00:5AA5                      ;ROM ASCII16
       4   00:5AA5                      		defpage	0,0x4000, 0x4000
       5   00:5AA5                      		defpage	1,0x8000, 0x4000        
       6   00:5AA5                      		defpage	2..14 ;Here it is determined rom size        
       7   00:5AA5                              defpage	15,0xC000, 0x4000
       8   00:5AA5                      
       9   00:5AA5  (00:4000)           PageSize:	    equ	0x4000	        ; 16kB
      10   00:5AA5  (00:6000)           _bank1	equ	6000h
      11   00:5AA5  (00:7000)           _bank2	equ	7000h
      12   00:5AA5  32 00 70 32 FF 77   		DB 32h,0,70h,32h,0FFh,77h		; Para evitar seleccionar el tipo de ROM ASCII16 en OpenMSX
      13   00:5AAB  (00)                		page 0			
      14   00:4000                              org 4000h		
      15   00:4000                              dw  4241h,START,0,0,0,0,0,0
      15   00:4000  41 42 07 45 00 00 00 00 00 00 00 00 00 00 00 00 
      16   00:4010                      
      17   00:4010                      ;Llamadas a rutinas bios
      18   00:4010                          include "include\System_BIOSCalls.asm"
       1.  00:4010  (00:009F)           CHGET                   equ #009F    ; Se queda esperando que se pulse una tecla
       2.  00:4010  (00:00A2)           CHPUT                   equ #00A2    ; escribe el caracter ascii almacenado en a                         
       3.  00:4010  (00:005F)           CHGMOD                  equ #005F   ; Cambia el modo de screen pero previamente necesita que se le asigne el modo en el registro a
       4.  00:4010  (00:005C)           LDIRVM                  equ #005C   ;Tansfiere bloques de la RAM a la VRAM, es la más importante, necesita previamente asignar valor al registro bc con la longitud, dc con la dirección de inicio de la VRAM y hl con la dirección de inicio de la RAM:
       5.  00:4010  (00:013E)           RDVDP                   equ #013E    ; Lee el registro de estado del VDP
       6.  00:4010  (00:0047)           WRTVDP                  equ #0047   ; Escribe en los registros del VDP 
       7.  00:4010  (00:F3DB)           CLIKSW                  equ $F3DB ; Keyboard click sound
       8.  00:4010  (00:0141)           SNSMAT					equ #0141
       9.  00:4010  (00:FC9E)           JIFFY 					equ #FC9E
      10.  00:4010  (00:0041)           DISSCR                  equ #0041   ; Disable screen
      11.  00:4010  (00:0044)           ENASCR                  equ #0044   ; Enable screen
      12.  00:4010  (00:0072)           INIGRP                  equ #0072   ; Enable Screen 2
      13.  00:4010  (00:0138)           RSLREG                  equ #0138   ; Leemos el contenido del registro de seleccion de slots
      14.  00:4010  (00:0024)           ENASLT                  equ #0024   ; Switches indicated slot at indicated page on perpetually Input    : A - Slot ID, see RDSLT            H - Bit 6 and 7 must contain the page number (00-11)
      19   00:4010                      
      20   00:4010                      ;Constantes
      21   00:4010                          include "include\BTH_const.asm"
       1.  00:4010                      ; VDP Const
       2.  00:4010  (00:5C28)           FIRST_LINE_DLG_BOX   equ 5C28H
       3.  00:4010  (00:6028)           SEC_LINE_DLG_BOX   equ 6028H
       4.  00:4010  (00:6428)           THIRD_LINE_DLG_BOX   equ 6428H
       5.  00:4010                      
       6.  00:4010  (00:0001)           ROMMODE                 equ 1 ; 0 Dos Mode 1 Rom Mode
       7.  00:4010  (00:0007)           KB_RIGHT 				equ 7
       8.  00:4010  (00:0006)           KB_DOWN 				equ 6
       9.  00:4010  (00:0005)           KB_UP 					equ	5        
      10.  00:4010  (00:0004)           KB_LEFT 				equ	4
      11.  00:4010  (00:0003)           KB_DEL 					equ	3
      12.  00:4010  (00:0000)           KB_SPACE				equ	0
      13.  00:4010                      
      14.  00:4010  (00:0001)           MOV_SPEED				equ 1
      15.  00:4010  (00:0001)           MOV_SPEED_GHOST			equ 1
      16.  00:4010  (00:0003)           MOV_SPEED_SHOOT         equ 3
      17.  00:4010  (00:0030)           MAX_DISTANCE_SHOOT      equ 48
      18.  00:4010  (00:0005)           MAX_CHAR_STEPS          equ 5       ; #steps pattern change MAIN CHAR
      19.  00:4010  (00:0006)           MAX_CHAR_STEPS_STG2          equ 6
      20.  00:4010  (00:FFE8)           REG9SAV                 equ #FFE8
      21.  00:4010  (00:0098)           PORT_0                  equ 0x98
      22.  00:4010  (00:0099)           PORT_1                  equ 0x99
      23.  00:4010  (00:009A)           PORT_2                  equ 0x9a
      24.  00:4010  (00:009B)           PORT_3                  equ 0x9b
      25.  00:4010                      
      26.  00:4010  (00:F3E0)           RG15AV equ #F3E0 ; alamcena el valor del registro 1 de escritura del VDP, hay unas rutinas de la bios que guardan estas direcciones valores globals del sistema
      27.  00:4010  (00:F3E9)           FORCLR equ $F3E9 ; Foreground colour
      28.  00:4010                      
      29.  00:4010  (00:00C8)           TOMB3_STG1_X                equ 200
      30.  00:4010                      
      31.  00:4010  (00:000C)           SPR_SHOOT_P1                equ 12  ; Offset de IX (SPRATT)S
      32.  00:4010  (00:0018)           SPR_SHOOT_P1_PTRN           equ 18h
      33.  00:4010  (00:0010)           SPR_GHOST_STG1              equ 16  ; Offset de IX (SPRATT)
      34.  00:4010  (00:001C)           SPR_GHOST_STG1_PTRN_L1      equ 1Ch  ; Offset del Sprite Pattern Table
      35.  00:4010  (00:0024)           SPR_GHOST_STG1_PTRN_L2      equ 24h  ; Offset del Sprite Pattern Table
      36.  00:4010  (00:002C)           SPR_GHOST_STG1_PTRN_R1      equ 2Ch  ; Offset del Sprite Pattern Table
      37.  00:4010  (00:0034)           SPR_GHOST_STG1_PTRN_R2      equ 34h  ; Offset del Sprite Pattern Table
      38.  00:4010                      
      39.  00:4010  (00:0018)           SPR_GHOST_STG2              equ 24  ; Offset de IX (SPRATT)
      40.  00:4010  (00:003C)           SPR_GHOST_STG2_PTRN_L1      equ 3Ch  ; Offset del Sprite Pattern Table
      41.  00:4010  (00:0044)           SPR_GHOST_STG2_PTRN_L2      equ 44h  ; Offset del Sprite Pattern Table
      42.  00:4010  (00:004C)           SPR_GHOST_STG2_PTRN_R1      equ 4Ch  ; Offset del Sprite Pattern Table
      43.  00:4010  (00:0054)           SPR_GHOST_STG2_PTRN_R2      equ 54h  ; Offset del Sprite Pattern Table
      44.  00:4010                      
      22   00:4010                          include "include\BTH_strings.asm"
       1.  00:4010  16 40 1D 40 33 40   sardu01_strings: dw string01, string02, string03
       2.  00:4016                      ; Caben 23 caracteres en cada línea
       3.  00:4016                      string01: db 'SARDU:',0
       3.  00:4016  53 41 52 44 55 3A 00 
       4.  00:401D                      string02: db 'CRISTO DE ACERO ES EL',0
       4.  00:401D  43 52 49 53 54 4F 20 44 45 20 41 43 45 52 4F 20 
       4.  00:402D  45 53 20 45 4C 00 
       5.  00:4033                      string03: db 'TERCERO',0
       5.  00:4033  54 45 52 43 45 52 4F 00 
       6.  00:403B  31 32 33 34 00      mensaje: db '1234',0
      23   00:4040                      
      24   00:4040                      ; Funciones auxiliares
      25   00:4040                      	include "include\BTH_func.asm"
       1.  00:4040                      ; Dadas las coordenadas X,Y en pixels de dos sprites, devuelve 1 si hay colision
       2.  00:4040                      ;Entrada:
       3.  00:4040                      ;   b - Y SPR1
       4.  00:4040                      ;   C - X SPR1
       5.  00:4040                      
       6.  00:4040                      ;   d - Y SPR2
       7.  00:4040                      ;   e - X SPR2
       8.  00:4040                      ;Salida:
       9.  00:4040                      ;   a - bloque
      10.  00:4040                      ;Modifica:
      11.  00:4040                      ;   a, hl, de
      12.  00:4040                      check_spr_collision:        
      13.  00:4040  78                          LD A,B          ; a = Y SPR1
      14.  00:4041  BA                          CP D
      15.  00:4042  C2 4D 40                    JP NZ,.no_collision
      16.  00:4045                      
      17.  00:4045  79                          LD A,C          ; a = X SPR1
      18.  00:4046  BB                          CP E
      19.  00:4047  C2 4D 40                    JP NZ,.no_collision
      20.  00:404A                      
      21.  00:404A  3E 01                       LD A,1
      22.  00:404C  C9                          RET
      23.  00:404D                      .no_collision
      24.  00:404D  3E 00                   LD A,0
      25.  00:404F  C9                      RET
      26.  00:4050                      
      27.  00:4050                      ; Dadas las coordenadas X,Y en pixels, devuelve el bloque de 8x8 al que corresponde esas coordenadas
      28.  00:4050                      ; La tabla de colisiones es la tabla de nombres con 32x24 = 756 bytes
      29.  00:4050                      ;Entrada:
      30.  00:4050                      ;   d - X
      31.  00:4050                      ;   e - y
      32.  00:4050                      ;Salida:
      33.  00:4050                      ;   a - bloque
      34.  00:4050                      ;Modifica:
      35.  00:4050                      ;   a, hl, de
      36.  00:4050                      get_bloque_en_X_Y:
      37.  00:4050                              ;(y/8)*32+(x/8)
      38.  00:4050  7B                          ld a,e      ;a=y
      39.  00:4051  CB 3F CB 3F CB 3F   [3]     srl a       ;a=y/8
      40.  00:4057  26 00                       ld h,0
      41.  00:4059  6F                          ld l,a      ;hl=y/8
      42.  00:405A  29 29 29 29 29      [5]     add hl,hl   ;x32    ;a=(y/8)*32
      43.  00:405F                      
      44.  00:405F  7A                          ld a,d      ;a=x
      45.  00:4060  CB 3F CB 3F CB 3F   [3]     srl a       ;a=x/8
      46.  00:4066  16 00                       ld d,0
      47.  00:4068  5F                          ld e,a      ;de=x/8
      48.  00:4069  19                          add hl,de   ;hl=(y/8)*32+(x/8)
      49.  00:406A                      
      50.  00:406A  ED 5B A0 C0                 ld de,(MAPA)
      51.  00:406E  19                          add hl,de   ;hl=mapa + hl=(y/8)*32+(x/8)
      52.  00:406F                      
      53.  00:406F  7E                          ld a,[hl]
      54.  00:4070  C9                          ret
      55.  00:4071                      
      56.  00:4071                      ; SCREEN 8
      57.  00:4071                      SetVdp_Write:
      58.  00:4071                      
      59.  00:4071                      	; transform address from 
      60.  00:4071                      	;
      61.  00:4071                      	; |           Register A            |           Register H            |           Register L            |
      62.  00:4071                      	; | --- --- --- --- --- --- --- A16 | A15 A14 A13 A12 A11 A10  A9  A8 |  A7  A6  A5  A4  A3  A2  A1  A0 |
      63.  00:4071                      	;
      64.  00:4071                      	; to
      65.  00:4071                      	;
      66.  00:4071                      	; |           Register A            |           Register H            |           Register L            |
      67.  00:4071                      	; | --- --- --- --- --- A16 A15 A14 | --- --- A13 A12 A11 A10  A9  A8 |  A7  A6  A5  A4  A3  A2  A1  A0 |
      68.  00:4071  CB 04                   rlc     h
      69.  00:4073  17                      rla
      70.  00:4074  CB 04                   rlc     h
      71.  00:4076  17                      rla
      72.  00:4077  CB 3C                   srl     h
      73.  00:4079  CB 3C                   srl     h
      74.  00:407B                      
      75.  00:407B  F3                      di
      76.  00:407C                      	    ; write bits a14-16 of address to R#14
      77.  00:407C  D3 99               	    out     (PORT_1), a
      78.  00:407E  3E 8E               	    ld      a, 14 + 128
      79.  00:4080  D3 99               	    out     (PORT_1), a
      80.  00:4082                      
      81.  00:4082                      	    ; write the other address bits to VDP PORT_1
      82.  00:4082  7D                  	    ld      a, l
      83.  00:4083  00                  	    nop
      84.  00:4084  D3 99               	    out     (PORT_1), a
      85.  00:4086  7C                  	    ld      a, h
      86.  00:4087  F6 40               	    or      64
      87.  00:4089  FB                      ei
      88.  00:408A  D3 99                   out     (PORT_1),a
      89.  00:408C  C9                      ret
      90.  00:408D                      
      91.  00:408D                      Set212Lines:
      92.  00:408D                              ; set LN (bit 7) of R#9 to 1
      93.  00:408D  3A E8 FF                    ld      a, (REG9SAV)
      94.  00:4090  F6 80                       or      10000000b
      95.  00:4092  47                          ld      b, a
      96.  00:4093  0E 09                       ld      c, 9            ; register #
      97.  00:4095  CD 47 00                    call    WRTVDP
      98.  00:4098  C9                          ret
      99.  00:4099                      
     100.  00:4099                      ClearVram_MSX2:
     101.  00:4099  AF                          xor     a           ; set vram write base address
     102.  00:409A  21 00 00                    ld      hl, 0     	; to 1st byte of page 0
     103.  00:409D  CD 71 40                    call    SetVdp_Write
     104.  00:40A0  AF                          xor		a
     105.  00:40A1                      
     106.  00:40A1                          ; TODO: 
     107.  00:40A1                          ;   use VDP command (currently is taking almost 1 second)
     108.  00:40A1                          ;   disable screen/sprites (should I ??)
     109.  00:40A1                      
     110.  00:40A1                          ; clear all 128kb of VRAM
     111.  00:40A1  16 02               	ld		d, 2		; 2 repetitions
     112.  00:40A3                      .loop_2:
     113.  00:40A3  0E 00               	ld		c, 0		; 256 repetitions
     114.  00:40A5                      .loop_1:
     115.  00:40A5  06 00               	ld		b, 0		; 256 repetitions
     116.  00:40A7                      .loop:
     117.  00:40A7  D3 98               	out		(PORT_0), a
     118.  00:40A9  10 FC               	djnz	.loop
     119.  00:40AB  0D                  	dec		c
     120.  00:40AC  C2 A5 40            	jp		nz, .loop_1
     121.  00:40AF  15                  	dec		d
     122.  00:40B0  C2 A3 40            	jp		nz, .loop_2
     123.  00:40B3                      
     124.  00:40B3  C9                  	ret
     125.  00:40B4                      
     126.  00:40B4                      ; MEGAROM
     127.  00:40B4                      
     128.  00:40B4                      opening_screen		
     129.  00:40B4  0E 00               		ld		c,0
     130.  00:40B6  11 00 00            		ld		de,0
     131.  00:40B9  CD F9 40            		call	_vdpsetvramwr
     132.  00:40BC  1E 04               		ld	e,4
     133.  00:40BE  3E 09               		ld	a, :GRAPHIC
     134.  00:40C0  57                  		ld	d,a
     135.  00:40C1  32 00 70            2:		ld	(_bank2),a
     136.  00:40C4  21 00 80            		ld	hl,GRAPHIC
     137.  00:40C7  01 98 00            		ld	bc,0x98
     138.  00:40CA  3E 40               		ld	a,32*2
     139.  00:40CC  ED B3               1:		otir
     140.  00:40CE  3D                  		dec	a
     141.  00:40CF  20 FB               		jr	nz,1b
     142.  00:40D1  14                  		inc	d
     143.  00:40D2  7A                  		ld	a,d
     144.  00:40D3  1D                  		dec	e
     145.  00:40D4  20 EB               		jr	nz,2b
     146.  00:40D6  C9                  		ret 
     147.  00:40D7                      
     148.  00:40D7                      load_screen
     149.  00:40D7  0E 00               		ld		c,0
     150.  00:40D9  11 00 00            		ld		de,0
     151.  00:40DC  CD F9 40            		call	_vdpsetvramwr
     152.  00:40DF  1E 02               		ld	e,2					; #pages
     153.  00:40E1  78                  		ld	a, b			; 1st page bitmap
     154.  00:40E2  57                  		ld	d,a
     155.  00:40E3  32 00 70            2:		ld	(_bank2),a
     156.  00:40E6  2A A2 C0            		ld	hl,(BITMAP)		; Bitmap address
     157.  00:40E9  01 98 00            		ld	bc,0x98
     158.  00:40EC  3E 40               		ld	a,64
     159.  00:40EE  ED B3               1:		otir
     160.  00:40F0  3D                  		dec	a
     161.  00:40F1  20 FB               		jr	nz,1b
     162.  00:40F3  14                  		inc	d
     163.  00:40F4  7A                  		ld	a,d
     164.  00:40F5  1D                  		dec	e
     165.  00:40F6  20 EB               		jr	nz,2b
     166.  00:40F8  C9                  		ret 
     167.  00:40F9                      
     168.  00:40F9                      ;Set VDP for writing at address CDE (17-bit) 
     169.  00:40F9                      
     170.  00:40F9                      _vdpsetvramwr:
     171.  00:40F9  79                  	ld a,c
     172.  00:40FA  CB 02               	rlc d
     173.  00:40FC  17                  	rla
     174.  00:40FD  CB 02               	rlc d
     175.  00:40FF  17                  	rla
     176.  00:4100  CB 3A               	srl d ; primo shift, il secondo dopo la out
     177.  00:4102                      
     178.  00:4102  D3 99               	out (0x99),a ;set bits 14-16
     179.  00:4104  3E 8E               	ld a,14+128
     180.  00:4106  D3 99               	out (0x99),a
     181.  00:4108  CB 3A               	srl d ; secondo shift.     
     182.  00:410A                      _vdpsetvramwr14
     183.  00:410A  7B                  	ld a,e ;set bits 0-7
     184.  00:410B  D3 99               	out (0x99),a
     185.  00:410D  7A                  	ld a,d ;set bits 8-13
     186.  00:410E  F6 40               	or 0x40 ; + write access
     187.  00:4110  D3 99               	out (0x99),a
     188.  00:4112  C9                  	ret
     189.  00:4113                      
     190.  00:4113                      
     191.  00:4113                      
     192.  00:4113                      		; --- RUTINAS PARA COLOCAR LAS PAGINAS DEL CARTUCHO ---
     193.  00:4113                      		; -----------------------------------------------------
     194.  00:4113                      		; --- SIEMPRE DEBEN IR EN LA PAGINA 1 DEL CARTUCHO! ---
     195.  00:4113                      		; -----------------------------------------------------
     196.  00:4113                      
     197.  00:4113                      		; --- RUTINAS PRINCIPALES DEL MODULO ---
     198.  00:4113                      		; GETSLOT:	OBTIENE EL VALOR DEL SLOT QUE LE INDIQUEMOS
     199.  00:4113                      		; SETPAGES32K:	BIOS-ROM-YY-ZZ	 -> BIOS-ROM-ROM-ZZ (SITUA PAGINA 2)
     200.  00:4113                      
     201.  00:4113                      		; --- VARIABLES EN RAM NECESARIAS ---
     202.  00:4113                      		; NINGUNA
     203.  00:4113                      
     204.  00:4113                      GETSLOT:	; --- Rutina que construye el valor del SLOT para llamar a ENASLT ---
     205.  00:4113                      		; --- Entrada: a = SLOT                                           ---
     206.  00:4113                      		; --- Salida: a = valor para ENASLT                               ---
     207.  00:4113                      		; --- AUTOR: Konamiman                                            ---
     208.  00:4113  E6 03               		and	$03				; Proteccion, nos aseguramos de que el valor esta en 0-3
     209.  00:4115  4F                  		ld	c,a				; c = slot de la pagina
     210.  00:4116  06 00               		ld	b,0				; bc = slot de la pagina
     211.  00:4118  21 C1 FC            		ld	hl,$FCC1			; Tabla de slots expandidos
     212.  00:411B  09                  		add	hl,bc				; hl -> variable que indica si este slot esta expandido
     213.  00:411C  7E                  		ld	a,(hl)				; Tomamos el valor
     214.  00:411D  E6 80               		and	$80				; Si el bit mas alto es cero...
     215.  00:411F  28 09               		jr	z,EXIT			; ...nos vamos a @@EXIT
     216.  00:4121                      		; --- El slot esta expandido ---
     217.  00:4121  B1                  		or	c				; Slot basico en el lugar adecuado
     218.  00:4122  4F                  		ld	c,a				; Guardamos el valor en c
     219.  00:4123  23                  		inc	hl				; Incrementamos hl una...
     220.  00:4124  23                  		inc	hl				; ...dos...
     221.  00:4125  23                  		inc	hl				; ...tres...
     222.  00:4126  23                  		inc	hl				; ...cuatro veces
     223.  00:4127  7E                  		ld	a,(hl)				; a = valor del registro de subslot del slot donde estamos
     224.  00:4128  E6 0C               		and	$0C				; Nos quedamos con el valor donde esta nuestro cartucho
     225.  00:412A  B1                  EXIT:		or	c				; Slot extendido/basico en su lugar
     226.  00:412B  C9                  		ret					; Volvemos
     227.  00:412C                      
     228.  00:412C                      SETPAGES32K:	; --- Posiciona las paginas de un megarom o un 32K ---
     229.  00:412C  3E C9               		ld	a,$C9				; Codigo de RET
     230.  00:412E  32 31 41            		ld	(NOPRET),a			; Modificamos la siguiente instruccion si estamos en RAM
     231.  00:4131  00                  NOPRET:	nop					; No hacemos nada si no estamos en RAM
     232.  00:4132                      		; --- Si llegamos aqui no estamos en RAM, hay que posicionar la pagina ---
     233.  00:4132  CD 38 01            		call	RSLREG  			; Leemos el contenido del registro de seleccion de slots
     234.  00:4135  0F                  		rrca					; Rotamos a la derecha...
     235.  00:4136  0F                  		rrca					; ...dos veces
     236.  00:4137  CD 13 41            		call	GETSLOT				; Obtenemos el slot de la pagina 1 ($4000-$BFFF)
     237.  00:413A  26 80               		ld	h,$80				; Seleccionamos pagina 2 ($8000-$BFFF)
     238.  00:413C  C3 24 00            		jp	ENASLT ;ENASLT
     239.  00:413F                      
     240.  00:413F                      SET_SCREEN5_MODE:
     241.  00:413F                           ;Cambiamos el modo de pantalla
     242.  00:413F                          ; BASIC: COLOR 15,1,1
     243.  00:413F                          ; Establecer los colores
     244.  00:413F  21 E9 F3            	ld hl,FORCLR ; Variable del Sistema
     245.  00:4142  36 0F               	ld [hl],15 ; Color del primer plano 15=blanco
     246.  00:4144  23                  	inc hl ; FORCLR+1
     247.  00:4145  36 0F               	ld [hl],15 ; Color de fondo 1=negro
     248.  00:4147  23                  	inc hl ; FORCLR+2
     249.  00:4148  36 0F               	ld [hl],15 ; Color del borde 1=negro
     250.  00:414A                      
     251.  00:414A  3E 05                   ld  a,5     ; La rutina CHGMOD nos obliga a poner en el registro A el modo de pantalla que queremos
     252.  00:414C  CD 5F 00                call CHGMOD ; Mira arriba, pone la explicación
     253.  00:414F                      ;
     254.  00:414F  3A E0 F3                ld a,(RG15AV) ; esta dirección de memoria almacena el valor del registro de lectura del VDP, mira arriba
     255.  00:4152                          ;En or 0+0=0, 0+1=1, 1+1=1
     256.  00:4152                          ;En and 0+0=0, 0+1=0, 1+1=1
     257.  00:4152                          ;Con eso queremos cambiar los bits 7 y 8 del registro de escritura 1 del z80, queremos poner el 7 a 1 y también el 8 a 1
     258.  00:4152                          ;el bit 7 del registro 1 pone los sprites en modo 16x16 (los que nostros queremos dibujar)
     259.  00:4152                          ;el bit 8 queremos desactivarlo para no utilizar los sprites agrandados
     260.  00:4152  F6 02                   or 00000010b ; con or poniendo un 0 siempre respetamos los bits que hay y poniendo 1 1 obligamos a que sea 1
     261.  00:4154                          ;and 11111110b ; con and obligamos a que el ultimo bit valga 0
     262.  00:4154  E6 FE                   and 11111110b ; con and obligamos a que el ultimo bit valga 0
     263.  00:4156                      
     264.  00:4156  47                      ld b,a ;carga en b el valor de a
     265.  00:4157  0E 01                   ld c,1 ; La rutina WRTVDP necesta que le carguemos previamente el entero en C del z80 del registro que queroms modificar
     266.  00:4159  CD 47 00                call WRTVDP ;Escribe en los registros del VDP 
     267.  00:415C  AF                      xor a ; ld a,0
     268.  00:415D  32 DB F3            	ld [CLIKSW],a ; Variable BIOS desactivar sonido teclas
     269.  00:4160  C9                      ret
     270.  00:4161                      
     271.  00:4161                      DUMP_SPR_ALL:
     272.  00:4161                      
     273.  00:4161                      ;-----------------------------Definición del sprite en #7800  y volcado a la VRAM-------------------------------------------
     274.  00:4161                      
     275.  00:4161  21 71 4B                ld hl, SPRITE_PATTERN ; la rutina LDIRVM necesita haber cargado previamente la dirección de inicio de la RAM, para saber porqué he puesto 03800 fíjate este dibujo https://sites.google.com/site/multivac7/files-images/TMS9918_VRAMmap_G2_300dpi.png ,así es como está formado el VDP en screen 2
     276.  00:4164  11 00 78                ld de, #7800; la rutina necesita haber cargado previamente con de la dirección de inicio de la VRAM          
     277.  00:4167  01 E0 02                ld bc, 8*4*23; 8 byte de cada tile * 4 que son los sprites de 16x16 y * #sprites
     278.  00:416A  CD 5C 00                call  LDIRVM ; Mira arriba, pone la explicación
     279.  00:416D                      
     280.  00:416D                      ;-----------------------------Definición de los atributos en #7600 y volcado a la VRAM------------------------------------
     281.  00:416D                      
     282.  00:416D  21 17 C0                ld hl, SPRITE_ATTRS ; la rutina LDIRVM necesita haber cargado previamente la dirección de inicio de la RAM, para saber porqué he puesto 0000 fíjate este dibujo https://sites.google.com/site/multivac7/files-images/TMS9918_VRAMmap_G2_300dpi.png ,así es como está formado el VDP en screen 2
     283.  00:4170  11 00 76                ld de, #7600; la rutina necesita haber cargado previamente con de la dirección de inicio de la VRAM          
     284.  00:4173  01 80 00                ld bc,128; 4 x #Sprites
     285.  00:4176  CD 5C 00                call  LDIRVM ; Mira arriba, pone la explicación
     286.  00:4179                      
     287.  00:4179                      ;-----------------------------Definición de los colores en #7400 y volcado a la VRAM------------------------------------
     288.  00:4179                      
     289.  00:4179  21 51 4E                ld hl, SPRITE_COLOR_TABLE ; la rutina LDIRVM necesita haber cargado previamente la dirección de inicio de la RAM, para saber porqué he puesto 0000 fíjate este dibujo https://sites.google.com/site/multivac7/files-images/TMS9918_VRAMmap_G2_300dpi.png ,así es como está formado el VDP en screen 2
     290.  00:417C  11 00 74                ld de, #7400; la rutina necesita haber cargado previamente con de la dirección de inicio de la VRAM          
     291.  00:417F  01 70 01                ld bc,16*23; 16 x #Sprites
     292.  00:4182  CD 5C 00                call  LDIRVM ; Mira arriba, pone la explicación
     293.  00:4185  C9                      ret
     294.  00:4186                      	
     295.  00:4186                      DUMP_SPR_ATTS:
     296.  00:4186                      
     297.  00:4186                      ;-----------------------------Definición de los atributos en #1E00 y volcado a la VRAM------------------------------------
     298.  00:4186                      
     299.  00:4186  21 17 C0                ld hl, SPRITE_ATTRS ; la rutina LDIRVM necesita haber cargado previamente la dirección de inicio de la RAM, para saber porqué he puesto 0000 fíjate este dibujo https://sites.google.com/site/multivac7/files-images/TMS9918_VRAMmap_G2_300dpi.png ,así es como está formado el VDP en screen 2
     300.  00:4189  11 00 76                ld de, #7600	; la rutina necesita haber cargado previamente con de la dirección de inicio de la VRAM          
     301.  00:418C  01 20 00                ld bc,32		; 4 x #Sprites mostrados
     302.  00:418F  CD 5C 00                call  LDIRVM 	; Mira arriba, pone la explicación
     303.  00:4192                      
     304.  00:4192                      ;	ld a, (SPRITE_COLOR_REPLACE2)
     305.  00:4192                      ;	JP Z,.DUMP_SPR_ATTS_END
     306.  00:4192  2A 9E C0            	ld hl, (SPRITE_COLOR_REPLACE2) ; la rutina LDIRVM necesita haber cargado previamente la dirección de inicio de la RAM, para saber porqué he puesto 0000 fíjate este dibujo https://sites.google.com/site/multivac7/files-images/TMS9918_VRAMmap_G2_300dpi.png ,así es como está formado el VDP en screen 2
     307.  00:4195  11 00 74                ld de, #7400; la rutina necesita haber cargado previamente con de la dirección de inicio de la VRAM          
     308.  00:4198  C5                      PUSH BC
     309.  00:4199  01 30 00            	ld bc,16*3; 16 x #Sprites
     310.  00:419C  CD 5C 00                call  LDIRVM 
     311.  00:419F  C1                  	POP BC
     312.  00:41A0                      
     313.  00:41A0                      .DUMP_SPR_ATTS_END:
     314.  00:41A0  C9                      ret
     315.  00:41A1                      
     316.  00:41A1                      DUMP_SPR_P1:    
     317.  00:41A1                      ;-----------------------------Definición del sprite en #7800  y volcado a la VRAM-------------------------------------------
     318.  00:41A1                      
     319.  00:41A1  2A 9A C0                ld hl, (SPRITE_PTR_REPLACE) ; la rutina LDIRVM necesita haber cargado previamente la dirección de inicio de la RAM, para saber porqué he puesto 03800 fíjate este dibujo https://sites.google.com/site/multivac7/files-images/TMS9918_VRAMmap_G2_300dpi.png ,así es como está formado el VDP en screen 2
     320.  00:41A4  11 00 78                ld de, #7800; la rutina necesita haber cargado previamente con de la dirección de inicio de la VRAM          
     321.  00:41A7  C5                      PUSH BC
     322.  00:41A8  01 C0 00            	ld bc, 192; 32 bytes por sprite * 3 planos * 2 frames
     323.  00:41AB  CD 5C 00                call  LDIRVM 
     324.  00:41AE  C1                  	POP BC
     325.  00:41AF                      
     326.  00:41AF                      ;-----------------------------Definición de los colores en #7400 y volcado a la VRAM------------------------------------
     327.  00:41AF                      
     328.  00:41AF  2A 9C C0                ld hl, (SPRITE_COLOR_REPLACE) ; la rutina LDIRVM necesita haber cargado previamente la dirección de inicio de la RAM, para saber porqué he puesto 0000 fíjate este dibujo https://sites.google.com/site/multivac7/files-images/TMS9918_VRAMmap_G2_300dpi.png ,así es como está formado el VDP en screen 2
     329.  00:41B2  11 00 74                ld de, #7400; la rutina necesita haber cargado previamente con de la dirección de inicio de la VRAM          
     330.  00:41B5  C5                      PUSH BC
     331.  00:41B6  01 30 00            	ld bc,16*3; 16 x #Sprites
     332.  00:41B9  CD 5C 00                call  LDIRVM 
     333.  00:41BC  C1                  	POP BC
     334.  00:41BD                      	
     335.  00:41BD                      
     336.  00:41BD                      ; Replace 4 sprites(P1) in Sprite Pattern Table
     337.  00:41BD                      ;    xor a
     338.  00:41BD                      ;	di			; set VRAM address to 1800h
     339.  00:41BD                      ;	out (99h),a		; lower byte 00
     340.  00:41BD                      ;	ld a,78h + 040h		; upper byte 7800h with flag to set the bus in write mode (3800 VRAM: Sprite Pattern Table)
     341.  00:41BD                      ;	ei
     342.  00:41BD                      ;	out (99h),a		; note that this is protected by the ei instruction
     343.  00:41BD                      ;   push BC
     344.  00:41BD                      ;	ld bc,8098h     ; 80h = 128 bytes y port 98h 
     345.  00:41BD                      ;	ld hl,(SPRITE_PTR_REPLACE)
     346.  00:41BD                      
     347.  00:41BD                      ;.loop1:
     348.  00:41BD                      ;	outi			; send the data (HL) to port 98h 
     349.  00:41BD                      ;	jp nz,.loop1		; the inner loop is exactly 29 cycles. 
     350.  00:41BD                      ;   POP BC
     351.  00:41BD                      
     352.  00:41BD                          ; Replace 2 entries in sprite color table
     353.  00:41BD                      ;    xor a
     354.  00:41BD                      ;	di			; set VRAM address to 1800h
     355.  00:41BD                      ;	out (99h),a		; lower byte 00
     356.  00:41BD                      ;	ld a,74h + 040h		; upper byte 7400h with flag to set the bus in write mode (1C00 VRAM: Sprite Color Table)
     357.  00:41BD                      ;	ei
     358.  00:41BD                      ;	out (99h),a		; note that this is protected by the ei instruction
     359.  00:41BD                       ;   push BC
     360.  00:41BD                      ;	ld bc,2098h     ; 20h = 32 bytes y port 98h 
     361.  00:41BD                      ;	ld hl,(SPRITE_COLOR_REPLACE)
     362.  00:41BD                      	
     363.  00:41BD                      ;.loop2:
     364.  00:41BD                      ;	outi			; send the data (HL) to port 98h 
     365.  00:41BD                      ;	jp nz,.loop2		; the inner loop is exactly 29 cycles. 
     366.  00:41BD                       ;   POP BC
     367.  00:41BD                      
     368.  00:41BD  C9                      ret
     369.  00:41BE                      
     370.  00:41BE                      SetPalette:
     371.  00:41BE  AF                  	xor a
     372.  00:41BF  F3                  	di
     373.  00:41C0  D3 99               	out ($99),a
     374.  00:41C2  3E 90               	ld a,16+128
     375.  00:41C4  D3 99               	out ($99),a
     376.  00:41C6  01 9A 20            	ld bc,$209A
     377.  00:41C9  ED B3               	otir
     378.  00:41CB  FB                  	ei
     379.  00:41CC  C9                  	ret
      26   00:41CD                          include "include\BTH_animate.asm"
       1.  00:41CD                      ; Movimiento P1
       2.  00:41CD                      move_up:
       3.  00:41CD  A9                      XOR C               ; Reseteamos la entrada del teclado
       4.  00:41CE                          ; Actualizamos la última tecla de dirección pulsada
       5.  00:41CE  AF                      XOR A
       6.  00:41CF  32 12 C0                LD (CHAR_NEW_DIR_MAIN),A
       7.  00:41D2  CD D8 42                CALL CHECK_DIRECTION_MAIN
       8.  00:41D5                      
       9.  00:41D5  DD 7E 00                ld a,(ix); obtenemos el valor actual de la posicion y
      10.  00:41D8  D6 01                   sub 1 ; decrementamos en 1 el valor, aunque realmente será dos por el desplazamiento de la Y que hace el VDP
      11.  00:41DA  5F                      ld e,a  ; Metemos el parametro Y para verificar si hay colision
      12.  00:41DB  DD 7E 01                ld a,(ix+1)
      13.  00:41DE  57                      ld d,a  ; Metemos el parametro X para verificar si hay colision
      14.  00:41DF  CD 50 40                call get_bloque_en_X_Y
      15.  00:41E2  FE 01                   cp 1
      16.  00:41E4  CA CD 43                jp z,NO_MOVEMENT
      17.  00:41E7                      
      18.  00:41E7  DD 7E 00                ld a,(ix); obtenemos el valor actual de la posicion y
      19.  00:41EA  D6 01                   sub 1 ; decrementamos en 1 el valor, aunque realmente será dos por el desplazamiento de la Y que hace el VGP
      20.  00:41EC  5F                      ld e,a  ; Metemos el parametro Y para verificar si hay colision
      21.  00:41ED  DD 7E 01                ld a,(ix+1)
      22.  00:41F0  C6 0A                   add 10 ; miramos la segunda tile 8+2
      23.  00:41F2  57                      ld d,a  ; Metemos el parametro X para verificar si hay colision
      24.  00:41F3  CD 50 40                call get_bloque_en_X_Y
      25.  00:41F6  FE 01                   cp 1
      26.  00:41F8  CA CD 43                jp z,NO_MOVEMENT
      27.  00:41FB                            
      28.  00:41FB  3E FF               	LD A, -MOV_SPEED
      29.  00:41FD  32 09 C0            	LD (CHAR_SPEED_Y), A
      30.  00:4200  CD 62 43                call UPDATE_MOVEMENT   
      31.  00:4203                          ;JP no_arrows
      32.  00:4203  C9                      ret
      33.  00:4204                      
      34.  00:4204                      move_down:
      35.  00:4204  A9                      XOR C               ; Reseteamos la entrada del teclado
      36.  00:4205                          ; Actualizamos la última tecla de dirección pulsada
      37.  00:4205  3E 01                   LD A,$01
      38.  00:4207  32 12 C0                LD (CHAR_NEW_DIR_MAIN),A
      39.  00:420A  CD D8 42                CALL CHECK_DIRECTION_MAIN
      40.  00:420D                      
      41.  00:420D  DD 7E 00                ld a,(ix); obtenemos el valor actual de la posicion y
      42.  00:4210  C6 11                   add 17 ; incrementamos en 15+2 el valor
      43.  00:4212  5F                      ld e,a  ; Metemos el parametro Y para verificar si hay colision
      44.  00:4213  DD 7E 01                ld a,(ix+1)
      45.  00:4216  57                      ld d,a  ; Metemos el parametro X para verificar si hay colision
      46.  00:4217  CD 50 40                call get_bloque_en_X_Y
      47.  00:421A  FE 01                   cp 1
      48.  00:421C  CA CD 43                jp z,NO_MOVEMENT
      49.  00:421F                      
      50.  00:421F  DD 7E 00                ld a,(ix); obtenemos el valor actual de la posicion y
      51.  00:4222  C6 11                   add 17 ; incrementamos en 15 el valor
      52.  00:4224  5F                      ld e,a  ; Metemos el parametro Y para verificar si hay colision
      53.  00:4225  DD 7E 01                ld a,(ix+1)
      54.  00:4228  C6 0A                   add 10 ; miramos la segunda tile 8+2
      55.  00:422A  57                      ld d,a  ; Metemos el parametro X para verificar si hay colision    
      56.  00:422B  CD 50 40                call get_bloque_en_X_Y
      57.  00:422E  FE 01                   cp 1
      58.  00:4230  CA CD 43                jp z,NO_MOVEMENT
      59.  00:4233                          
      60.  00:4233  3E 01                   LD A, MOV_SPEED
      61.  00:4235  32 09 C0            	LD (CHAR_SPEED_Y), A
      62.  00:4238  CD 62 43                call UPDATE_MOVEMENT    
      63.  00:423B                          ;JP no_arrows
      64.  00:423B  C9                      ret
      65.  00:423C                      
      66.  00:423C                      move_right:
      67.  00:423C  A9                      XOR C               ; Reseteamos la entrada del teclado
      68.  00:423D                          ; Actualizamos la última tecla de dirección pulsada
      69.  00:423D  3E 03                   LD A,$03
      70.  00:423F  32 12 C0                LD (CHAR_NEW_DIR_MAIN),A
      71.  00:4242  CD D8 42                CALL CHECK_DIRECTION_MAIN
      72.  00:4245                      
      73.  00:4245  DD 7E 01                ld a,(ix+1); obtenemos el valor actual de la posicion x   
      74.  00:4248  C6 10                   add 16; incrementamos en 3 el valor
      75.  00:424A  57                      ld d,a  ; Metemos el parametro X para verificar si hay colision
      76.  00:424B  DD 7E 00                ld a,(ix)   ;obtenemos el valor actual de la posicion Y
      77.  00:424E  C6 01                   add 1   ; incrementamos en 1 por el desplazamiento del VGP
      78.  00:4250  5F                      ld e,a  ; Metemos el parametro Y para verificar si hay colision
      79.  00:4251  CD 50 40                call get_bloque_en_X_Y
      80.  00:4254  FE 01                   cp 1
      81.  00:4256  CA CD 43                jp z,NO_MOVEMENT
      82.  00:4259                      
      83.  00:4259                          ;Miramos el tile del byte inferior del sprite - centro personaje
      84.  00:4259  DD 7E 01                ld a,(ix+1); obetenemos el valor actual de la posicion x   
      85.  00:425C  C6 10                   add 16; incrementamos en 2 tiles el valor
      86.  00:425E  57                      ld d,a  ; Metemos el parametro X para verificar si hay colision
      87.  00:425F  DD 7E 00                ld a,(ix) ;obtenemos el valor actual de la posicion y
      88.  00:4262  C6 08                   add 8 ; Añadimos 8 para mirar el tile inferior - centro
      89.  00:4264  5F                      ld e,a  ; Metemos el parametro Y para verificar si hay colision
      90.  00:4265  CD 50 40                call get_bloque_en_X_Y
      91.  00:4268  FE 01                   cp 1
      92.  00:426A  CA CD 43                jp z,NO_MOVEMENT
      93.  00:426D                      
      94.  00:426D                          ;Miramos el tile del byte inferior del sprite - esquina inferior derecha
      95.  00:426D  DD 7E 01                ld a,(ix+1); obetenemos el valor actual de la posicion x   
      96.  00:4270  C6 10                   add 16; incrementamos en 2 tiles el valor
      97.  00:4272  57                      ld d,a  ; Metemos el parametro X para verificar si hay colision
      98.  00:4273  DD 7E 00                ld a,(ix) ;obtenemos el valor actual de la posicion y
      99.  00:4276  C6 0F                   add 15 ; Añadimos 8+1 para mirar la esquina inferior derecha del tile inferior
     100.  00:4278  5F                      ld e,a  ; Metemos el parametro Y para verificar si hay colision
     101.  00:4279  CD 50 40                call get_bloque_en_X_Y
     102.  00:427C  FE 01                   cp 1
     103.  00:427E  CA CD 43                jp z,NO_MOVEMENT    
     104.  00:4281                          
     105.  00:4281  3E 01                   LD A, MOV_SPEED
     106.  00:4283  32 08 C0            	LD (CHAR_SPEED_X), A
     107.  00:4286  CD 62 43                call UPDATE_MOVEMENT      
     108.  00:4289                          ;JP no_arrows
     109.  00:4289  C9                      ret
     110.  00:428A                      
     111.  00:428A                      move_left:
     112.  00:428A  A9                      XOR C               ; Reseteamos la entrada del teclado
     113.  00:428B                          ; Actualizamos la última tecla de dirección pulsada
     114.  00:428B  3E 02                   LD A,$02
     115.  00:428D  32 12 C0                LD (CHAR_NEW_DIR_MAIN),A
     116.  00:4290  CD D8 42                CALL CHECK_DIRECTION_MAIN
     117.  00:4293  DD 7E 01                ld a,(ix+1); obetenemos el valor actual de la posicion x
     118.  00:4296  D6 02                   sub 2 ; decrementamos en 2 el valor
     119.  00:4298  57                      ld d,a  ; Metemos el parametro X para verificar si hay colision
     120.  00:4299  DD 7E 00                ld a,(ix)   ;obtenemos el valor actual de la posicion Y
     121.  00:429C  C6 01                   add 1   ; incrementamos en 1 por el desplazamiento del VGP
     122.  00:429E  5F                      ld e,a  ; Metemos el parametro Y para verificar si hay colision
     123.  00:429F  CD 50 40                call get_bloque_en_X_Y
     124.  00:42A2  FE 01                   cp 1
     125.  00:42A4  CA CD 43                jp z,NO_MOVEMENT
     126.  00:42A7                      
     127.  00:42A7                          ;Miramos el tile inferior parte central del personaje
     128.  00:42A7  DD 7E 01                ld a,(ix+1); obetenemos el valor actual de la posicion x
     129.  00:42AA  D6 02                   sub 2 ; decrementamos en 2 el valor
     130.  00:42AC  57                      ld d,a  ; Metemos el parametro X para verificar si hay colision
     131.  00:42AD  DD 7E 00                ld a,(ix)   ;obtenemos el valor actual de la posicion Y
     132.  00:42B0  C6 08                   add 8   ; incrementamos en 8 para mirar la parte central del personaje
     133.  00:42B2  5F                      ld e,a  ; Metemos el parametro Y para verificar si hay colision
     134.  00:42B3  CD 50 40                call get_bloque_en_X_Y
     135.  00:42B6  FE 01                   cp 1
     136.  00:42B8  CA CD 43                jp z,NO_MOVEMENT
     137.  00:42BB                      
     138.  00:42BB                          ;Miramos el tile inferior esquina inferior izquierda
     139.  00:42BB  DD 7E 01                ld a,(ix+1); obetenemos el valor actual de la posicion x
     140.  00:42BE  D6 02                   sub 2 ; decrementamos en 2 el valor
     141.  00:42C0  57                      ld d,a  ; Metemos el parametro X para verificar si hay colision
     142.  00:42C1  DD 7E 00                ld a,(ix)   ;obtenemos el valor actual de la posicion Y
     143.  00:42C4  C6 0F                   add 15   ; incrementamos en 8 para mirar la parte central del personaje (-1 por el offset del VGP)
     144.  00:42C6  5F                      ld e,a  ; Metemos el parametro Y para verificar si hay colision
     145.  00:42C7  CD 50 40                call get_bloque_en_X_Y
     146.  00:42CA  FE 01                   cp 1
     147.  00:42CC  CA CD 43                jp z,NO_MOVEMENT
     148.  00:42CF                      
     149.  00:42CF  3E FF                   LD A, -MOV_SPEED
     150.  00:42D1  32 08 C0            	LD (CHAR_SPEED_X), A
     151.  00:42D4  CD 62 43                call UPDATE_MOVEMENT     
     152.  00:42D7                          ;JP no_arrows
     153.  00:42D7  C9                      ret
     154.  00:42D8                      
     155.  00:42D8                      CHECK_DIRECTION_MAIN:
     156.  00:42D8  3A 11 C0                LD A, (CHAR_DIR_MAIN)		                ;Cargamos el valor anterior de direccion
     157.  00:42DB  2A 12 C0            	LD HL, (CHAR_NEW_DIR_MAIN)		            ;Cargamos el valor actual de direccion
     158.  00:42DE  BD                  	CP L		            	                ;Son iguales?
     159.  00:42DF  C8                  	RET Z                           			;Si son iguales, vuelvo
     160.  00:42E0  3A 12 C0                LD A,(CHAR_NEW_DIR_MAIN)
     161.  00:42E3  FE 01                   CP $01
     162.  00:42E5  CA FA 42                JP Z,.SET_DIR_DOWN
     163.  00:42E8  FE 00                   CP $00
     164.  00:42EA  CA 0F 43                JP Z,.SET_DIR_UP
     165.  00:42ED  FE 03                   CP $03
     166.  00:42EF  CA 39 43                JP Z,.SET_DIR_RIGHT
     167.  00:42F2  FE 02                   CP $02
     168.  00:42F4  CA 24 43                JP Z,.SET_DIR_LEFT
     169.  00:42F7  C3 4E 43                JP .FINISH
     170.  00:42FA                          
     171.  00:42FA                      .SET_DIR_DOWN:    
     172.  00:42FA  21 31 49                ld hl, SPRITE_P1_DOWN
     173.  00:42FD  22 9A C0                ld (SPRITE_PTR_REPLACE), HL
     174.  00:4300                          
     175.  00:4300  21 31 4F                ld hl, SPRITE_COLOR_P1_DOWN
     176.  00:4303  22 9C C0                ld (SPRITE_COLOR_REPLACE), HL    
     177.  00:4306  22 9E C0                ld (SPRITE_COLOR_REPLACE2), HL
     178.  00:4309  CD A1 41                CALL DUMP_SPR_P1    
     179.  00:430C                      
     180.  00:430C  C3 4E 43                JP .FINISH
     181.  00:430F                      
     182.  00:430F                      .SET_DIR_UP:
     183.  00:430F  21 71 48                ld hl, SPRITE_P1_UP
     184.  00:4312  22 9A C0                ld (SPRITE_PTR_REPLACE), HL
     185.  00:4315                          
     186.  00:4315  21 D1 4E                ld hl, SPRITE_COLOR_P1_UP
     187.  00:4318  22 9C C0                ld (SPRITE_COLOR_REPLACE), HL
     188.  00:431B  22 9E C0                ld (SPRITE_COLOR_REPLACE2), HL
     189.  00:431E  CD A1 41                CALL DUMP_SPR_P1
     190.  00:4321  C3 4E 43                JP .FINISH
     191.  00:4324                      
     192.  00:4324                      .SET_DIR_LEFT:    
     193.  00:4324  21 F1 49                ld hl, SPRITE_P1_LEFT
     194.  00:4327  22 9A C0                ld (SPRITE_PTR_REPLACE), HL
     195.  00:432A                          
     196.  00:432A  21 D1 59                ld hl, SPRITE_COLOR_P1_LEFT
     197.  00:432D  22 9C C0                ld (SPRITE_COLOR_REPLACE), HL
     198.  00:4330  22 9E C0                ld (SPRITE_COLOR_REPLACE2), HL
     199.  00:4333  CD A1 41                CALL DUMP_SPR_P1   
     200.  00:4336  C3 4E 43                JP .FINISH
     201.  00:4339                      
     202.  00:4339                      .SET_DIR_RIGHT:
     203.  00:4339  21 B1 4A                ld hl, SPRITE_P1_RIGHT
     204.  00:433C  22 9A C0                ld (SPRITE_PTR_REPLACE), HL
     205.  00:433F                          
     206.  00:433F  21 91 4F                ld hl, SPRITE_COLOR_P1_RIGHT
     207.  00:4342  22 9C C0                ld (SPRITE_COLOR_REPLACE), HL
     208.  00:4345  22 9E C0                ld (SPRITE_COLOR_REPLACE2), HL
     209.  00:4348                          ;    ld (ix+13), $10      ; Sprite 1 - Ghost
     210.  00:4348  CD A1 41                CALL DUMP_SPR_P1
     211.  00:434B  C3 4E 43                JP .FINISH
     212.  00:434E                      
     213.  00:434E                      .FINISH:
     214.  00:434E  AF                      XOR A   ; reseteamos el contador de pasos
     215.  00:434F                          ;LD (CHAR_MIN_STEP), A   
     216.  00:434F  3A 12 C0                LD A, (CHAR_NEW_DIR_MAIN)   ; Actualizamos la nueva dirección del personaje
     217.  00:4352  32 11 C0                LD (CHAR_DIR_MAIN),A    
     218.  00:4355                      
     219.  00:4355                          ; ponemos el primer frame del sprite
     220.  00:4355  DD 36 02 00             LD (ix+2), $00
     221.  00:4359  DD 36 06 04             LD (ix+6), $04
     222.  00:435D  DD 36 0A 08             LD (ix+10), $08
     223.  00:4361                          ;CALL DUMP_SPR_ATTS
     224.  00:4361  C9                      RET
     225.  00:4362                      
     226.  00:4362                      UPDATE_MOVEMENT:
     227.  00:4362  DD 7E 00            	LD A, (ix)          ;cargamos la Y			
     228.  00:4365  2A 09 C0            	LD HL, (CHAR_SPEED_Y)
     229.  00:4368  85                  	ADD L					; Actualizamos la posicion en base a la velocidad
     230.  00:4369                          
     231.  00:4369  DD 77 00            	LD (ix), A
     232.  00:436C  DD 77 04                LD (ix+4), A
     233.  00:436F  DD 77 08                LD (ix+8), A
     234.  00:4372                      	
     235.  00:4372  DD 7E 01            	LD A, (ix+1)			;cargamos la X
     236.  00:4375  2A 08 C0            	LD HL, (CHAR_SPEED_X)
     237.  00:4378  85                  	ADD L   					; Actualizamos la posicion en base a la velocidad
     238.  00:4379                          
     239.  00:4379  DD 77 01            	LD (ix+1), A
     240.  00:437C  DD 77 05                LD (ix+5), A
     241.  00:437F  DD 77 09                LD (ix+9), A	
     242.  00:4382                      
     243.  00:4382  AF                      XOR A            ; reseteamos las variables de movimiento para el siguiente ciclo
     244.  00:4383  32 08 C0                LD (CHAR_SPEED_X),A
     245.  00:4386  32 09 C0                LD (CHAR_SPEED_Y),A	
     246.  00:4389                      
     247.  00:4389                          ; Animación/pasos de personaje	
     248.  00:4389  3A 14 C0                LD A, (CHAR_MIN_STEP)
     249.  00:438C  FE 05                   CP MAX_CHAR_STEPS
     250.  00:438E  C2 C7 43                JP NZ,.NO_CHAR_PATTERN_CHANGE
     251.  00:4391                          
     252.  00:4391  AF                      XOR A
     253.  00:4392  32 14 C0                LD (CHAR_MIN_STEP), A   ; reseteamos el contador de pasos
     254.  00:4395  DD 7E 02                LD A, (ix+2)    ; Cargamos el patrón
     255.  00:4398  FE 00                   CP $00
     256.  00:439A  CA B0 43                JP Z,.SET_SPR_1P_2
     257.  00:439D  DD 36 02 00             LD (ix+2), $00
     258.  00:43A1  DD 36 06 04             LD (ix+6), $04
     259.  00:43A5  DD 36 0A 08             LD (ix+10), $08
     260.  00:43A9  2A 9C C0                ld hl, (SPRITE_COLOR_REPLACE)
     261.  00:43AC  22 9E C0                ld (SPRITE_COLOR_REPLACE2), HL
     262.  00:43AF  C9                      ret
     263.  00:43B0                      
     264.  00:43B0                      .SET_SPR_1P_2:
     265.  00:43B0  DD 36 02 0C             LD (ix+2), $0C
     266.  00:43B4  DD 36 06 10             LD (ix+6), $10
     267.  00:43B8  DD 36 0A 14             LD (ix+10), $14
     268.  00:43BC                              
     269.  00:43BC  2A 9C C0                ld HL, (SPRITE_COLOR_REPLACE)
     270.  00:43BF  11 30 00                ld DE,48
     271.  00:43C2  19                      ADD HL, DE
     272.  00:43C3  22 9E C0                ld (SPRITE_COLOR_REPLACE2), HL
     273.  00:43C6                          ;ld a, 0
     274.  00:43C6  C9                  	ret
     275.  00:43C7                      
     276.  00:43C7                      .NO_CHAR_PATTERN_CHANGE    
     277.  00:43C7  C6 01                   ADD 1
     278.  00:43C9  32 14 C0                LD (CHAR_MIN_STEP), A    
     279.  00:43CC  C9                      ret
     280.  00:43CD                      
     281.  00:43CD                      NO_MOVEMENT:    
     282.  00:43CD  C9                      ret
     283.  00:43CE                      
     284.  00:43CE                      MOVE_SHOOT:
     285.  00:43CE  3A 13 C0                LD A,(CHAR_MAIN_SHOOT)    
     286.  00:43D1  FE 01                   CP $01
     287.  00:43D3  CA FE 43                JP Z,.MOVE_SHOOT_LEFT
     288.  00:43D6  FE 02                   CP $02
     289.  00:43D8  CA E6 43                JP Z,.MOVE_SHOOT_RIGHT
     290.  00:43DB  FE 03                   CP $03
     291.  00:43DD  CA EE 43                JP Z,.MOVE_SHOOT_UP    
     292.  00:43E0  FE 04                   CP $04
     293.  00:43E2  CA F6 43                JP Z,.MOVE_SHOOT_DOWN
     294.  00:43E5  C9                      RET
     295.  00:43E6                      
     296.  00:43E6                      .MOVE_SHOOT_RIGHT:        
     297.  00:43E6  3E 03                   LD A, MOV_SPEED_SHOOT
     298.  00:43E8  32 16 C0            	LD (CHAR_SPEED_SHOOT), A    
     299.  00:43EB  C3 03 44                JP .CHECK_SHOOT_DISTANCE
     300.  00:43EE                      
     301.  00:43EE                      .MOVE_SHOOT_UP:        
     302.  00:43EE  3E FD                   LD A, -MOV_SPEED_SHOOT
     303.  00:43F0  32 16 C0            	LD (CHAR_SPEED_SHOOT), A    
     304.  00:43F3  C3 03 44                JP .CHECK_SHOOT_DISTANCE
     305.  00:43F6                      
     306.  00:43F6                      .MOVE_SHOOT_DOWN:
     307.  00:43F6  3E 03                   LD A, MOV_SPEED_SHOOT
     308.  00:43F8  32 16 C0            	LD (CHAR_SPEED_SHOOT), A    
     309.  00:43FB  C3 03 44                JP .CHECK_SHOOT_DISTANCE
     310.  00:43FE                      
     311.  00:43FE                      .MOVE_SHOOT_LEFT:    
     312.  00:43FE  3E FD                   LD A, -MOV_SPEED_SHOOT
     313.  00:4400  32 16 C0            	LD (CHAR_SPEED_SHOOT), A    
     314.  00:4403                      
     315.  00:4403                      .CHECK_SHOOT_DISTANCE:
     316.  00:4403                          ; Miramos si va a izq o der
     317.  00:4403  3A 13 C0                LD A,(CHAR_MAIN_SHOOT)    
     318.  00:4406  D6 03                   SUB 3   ; Restar 3 a 1 o 2 provoca salto de carro, si es 3 o 4 no provoca el salto de carro
     319.  00:4408  D2 18 44                JP NC,.ADD_SHOOT_Y
     320.  00:440B                          ; Movemos el disparo
     321.  00:440B  DD 7E 0D                LD A, (ix+SPR_SHOOT_P1+1)          ;cargamos la X del disparo
     322.  00:440E  2A 16 C0            	LD HL, (CHAR_SPEED_SHOOT)
     323.  00:4411  85                  	ADD L					; Actualizamos la posicion en base a la velocidad
     324.  00:4412  DD 77 0D                LD (ix+SPR_SHOOT_P1+1), A
     325.  00:4415  C3 22 44                JP .ADD_DISTANCE
     326.  00:4418                      .ADD_SHOOT_Y
     327.  00:4418                          ; Movemos el disparo
     328.  00:4418  DD 7E 0C                LD A, (ix+SPR_SHOOT_P1)          ;cargamos la X del disparo
     329.  00:441B  2A 16 C0            	LD HL, (CHAR_SPEED_SHOOT)
     330.  00:441E  85                  	ADD L					; Actualizamos la posicion en base a la velocidad
     331.  00:441F  DD 77 0C                LD (ix+SPR_SHOOT_P1), A
     332.  00:4422                      
     333.  00:4422                      .ADD_DISTANCE:
     334.  00:4422  3A 15 C0                LD A,(CHAR_DISTANCE_SHOOT)
     335.  00:4425  C6 03                   ADD MOV_SPEED_SHOOT
     336.  00:4427  32 15 C0                LD (CHAR_DISTANCE_SHOOT),A    
     337.  00:442A  FE 30                   CP MAX_DISTANCE_SHOOT
     338.  00:442C  C0                      RET NZ
     339.  00:442D                      
     340.  00:442D                      .HIDE_SHOOT:
     341.  00:442D  DD 36 0C D9             LD (ix+SPR_SHOOT_P1),217          ; Y = 217 para ocultar el Sprite
     342.  00:4431  AF                      XOR A
     343.  00:4432  32 13 C0                LD (CHAR_MAIN_SHOOT),A   ; Desactivo el estado disparando 
     344.  00:4435  32 15 C0                LD (CHAR_DISTANCE_SHOOT),A
     345.  00:4438  C9                      RET
     346.  00:4439                      
      27   00:4439                      	include "include\VDP.asm"
       1.  00:4439                      print_strings_dialog_box:
       2.  00:4439                      
       3.  00:4439  FD 66 01            	LD H, (IY+1)
       4.  00:443C  FD 6E 00            	LD L, (IY)
       5.  00:443F  11 28 5C            	LD DE, FIRST_LINE_DLG_BOX	; Aquí irá el offset de la memoria del VDP en base a X, Y
       6.  00:4442  FD E5               	PUSH IY
       7.  00:4444  CD 66 44                call print_string 
       8.  00:4447  FD E1                   POP IY
       9.  00:4449                      
      10.  00:4449  FD 66 03            	LD H, (IY+3)
      11.  00:444C  FD 6E 02            	LD L, (IY+2)
      12.  00:444F  11 28 60                LD DE, SEC_LINE_DLG_BOX	; Aquí irá el offset de la memoria del VDP en base a X, Y    
      13.  00:4452  FD E5               	PUSH IY
      14.  00:4454  CD 66 44                call print_string 
      15.  00:4457  FD E1               	POP IY
      16.  00:4459                      
      17.  00:4459  FD 66 05                LD H, (IY+5)
      18.  00:445C  FD 6E 04            	LD L, (IY+4)
      19.  00:445F  11 28 64            	LD DE, THIRD_LINE_DLG_BOX	; Aquí irá el offset de la memoria del VDP en base a X, Y
      20.  00:4462  CD 66 44                call print_string 
      21.  00:4465  C9                  	RET
      22.  00:4466                      
      23.  00:4466                      print_string:       
      24.  00:4466                      	
      25.  00:4466                      	;LD HL, string01
      26.  00:4466                      	;LD DE, 5CA8H	; Aquí irá el offset de la memoria del VDP en base a X, Y
      27.  00:4466                      .loop_str:
      28.  00:4466  7E                  	LD A, (HL)
      29.  00:4467  A7                  	AND A
      30.  00:4468  C8                  	RET Z
      31.  00:4469                      
      32.  00:4469  D6 20               	SUB 32
      33.  00:446B  CB 07               	RLC A
      34.  00:446D  CB 07               	RLC A	
      35.  00:446F                          
      36.  00:446F  06 00               	LD B, 0
      37.  00:4471  4F                  	LD C, A	; 4 * 32 = 124, ultimo caractec primera linea. 1024 - primer caracter segunda linea
      38.  00:4472                      				; 16 * 4 = 64 -> numero 0 - ASCII 48 - 32 = 16 * 4 = 64 offset número 0
      39.  00:4472                      				; Si #ASCII > 63 -> 2ª línea
      40.  00:4472                      				; segunda línea - ((#ASCII -32)*4)+1024
      41.  00:4472                      	
      42.  00:4472  7E                  	LD A, (HL)	; vuelvo a cargar el caracter para ver si está en la segunda línea (ascii > 63)
      43.  00:4473  E5                  	PUSH HL
      44.  00:4474  21 00 80            	LD HL, FONT
      45.  00:4477  09                  	ADD HL, BC
      46.  00:4478  FE 40               	CP 64
      47.  00:447A  DA 81 44            	JP C, .first_line_font
      48.  00:447D  01 00 04            	LD BC, 1024	; le sumamos 1024 para saltar a la segunda línea de la fuente
      49.  00:4480  09                  	ADD HL, BC
      50.  00:4481                      
      51.  00:4481                      .first_line_font:
      52.  00:4481  22 A2 C0                LD (BITMAP), HL
      53.  00:4484                          
      54.  00:4484  06 06               	LD B, :FONT
      55.  00:4486  D5                  	PUSH DE
      56.  00:4487  CD 9A 44                call print_char
      57.  00:448A  D1                      POP DE
      58.  00:448B                      	
      59.  00:448B  FD 21 04 00         	LD IY, 4
      60.  00:448F  FD 19               	ADD IY, DE	; Le sumo 4 a DE para que empiece a escribir el next char 8 pixels a la derecha 
      61.  00:4491  FD 54               	LD D, IYH
      62.  00:4493  FD 5D               	LD E, IYL
      63.  00:4495                      	
      64.  00:4495                      
      65.  00:4495  E1                  	POP HL
      66.  00:4496  23                  	INC HL
      67.  00:4497  18 CD               	JR .loop_str
      68.  00:4499                          
      69.  00:4499  C9                      RET
      70.  00:449A                      
      71.  00:449A                      print_char
      72.  00:449A  AF                  		XOR A		
      73.  00:449B  0E 00               		ld		c,0
      74.  00:449D                      		;ld		de,0
      75.  00:449D  ED 53 01 C0         		LD (CHR_ACR), DE
      76.  00:44A1  CD F9 40                	call	_vdpsetvramwr		
      77.  00:44A4  78                  		ld	a, b			; 1st page bitmap
      78.  00:44A5                      		;ld	d,a
      79.  00:44A5  32 00 70            		ld	(_bank2),a
      80.  00:44A8  2A A2 C0            		ld	hl,(BITMAP)		; Bitmap address
      81.  00:44AB  3E 08               		ld	a, 8			; #lineas del caracter
      82.  00:44AD  01 98 04            1:      ld	bc,0x498		; escribimos 4 bytes en el puerto 98h	
      83.  00:44B0  ED B3                       otir
      84.  00:44B2  01 7C 00                    LD BC, 124
      85.  00:44B5  09                          ADD HL, BC
      86.  00:44B6  F5                  		PUSH AF
      87.  00:44B7                      
      88.  00:44B7  FD 2A 01 C0         		LD IY, (CHR_ACR)
      89.  00:44BB  01 80 00            		LD BC, 128
      90.  00:44BE  FD 09               		ADD IY, BC
      91.  00:44C0  FD 54               		LD D, IYH
      92.  00:44C2  FD 5D               		LD E, IYL
      93.  00:44C4  A9                  		XOR C
      94.  00:44C5  ED 53 01 C0         		LD (CHR_ACR), DE
      95.  00:44C9  CD F9 40            		call	_vdpsetvramwr		
      96.  00:44CC  F1                  		POP AF		
      97.  00:44CD                      
      98.  00:44CD  3D                  		dec	a
      99.  00:44CE  20 DD               		jr	nz,1b		
     100.  00:44D0  C9                  		ret 
     101.  00:44D1                      
     102.  00:44D1                      CLEAR_DIALOG_BOX:		
     103.  00:44D1  0E 00               		LD C,0
     104.  00:44D3  11 28 5C            		LD DE, 5C28H
     105.  00:44D6  ED 53 01 C0         		LD (CHR_ACR), DE
     106.  00:44DA  CD F9 40            		call _vdpsetvramwr
     107.  00:44DD  3E 18               		LD A, 24		; Borraremos 24 líneas de la pantalla
     108.  00:44DF  21 31 5A            1:		LD HL, BLANK_DATA
     109.  00:44E2  01 98 54            		LD BC,0x5498	; Escribimos 84 bytes
     110.  00:44E5  ED B3               		OTIR
     111.  00:44E7                      
     112.  00:44E7  F5                  		PUSH AF
     113.  00:44E8  FD 2A 01 C0         		LD IY, (CHR_ACR)
     114.  00:44EC  01 80 00            		LD BC, 128
     115.  00:44EF  FD 09               		ADD IY, BC
     116.  00:44F1  FD 54               		LD D, IYH
     117.  00:44F3  FD 5D               		LD E, IYL
     118.  00:44F5  0E 00               		LD C,0
     119.  00:44F7  ED 53 01 C0         		LD (CHR_ACR), DE
     120.  00:44FB  CD F9 40            		call	_vdpsetvramwr		
     121.  00:44FE  F1                  		POP AF		
     122.  00:44FF                      
     123.  00:44FF  3D                  		DEC a
     124.  00:4500  20 DD               		JR NZ,1b
     125.  00:4502  AF                  		XOR A
     126.  00:4503  32 00 C0                	LD (SHOWING_DIALOG), A
     127.  00:4506  C9                  		RET
      28   00:4507                      
      29   00:4507                      START
      30   00:4507                      	; CODE
      31   00:4507                      	;LD A,8
      32   00:4507                      	;CALL CHGMOD    	
      33   00:4507  CD 2C 41                CALL SETPAGES32K
      34   00:450A                      ;	CALL opening_screen
      35   00:450A  3E 01               	LD A,1
      36   00:450C  32 00 70            	LD (_bank2),A
      37   00:450F                      ;	CALL CHGET
      38   00:450F                      	; Empieza el juego    
      39   00:450F  CD 99 40            	call ClearVram_MSX2		
      40   00:4512  CD 3F 41            	call SET_SCREEN5_MODE    
      41   00:4515  CD 8D 40                call Set212Lines
      42   00:4518                              
      43   00:4518  CD 2A 45                call INIT_CHARS_VARS
      44   00:451B  3E FF                   LD A, -MOV_SPEED_GHOST
      45   00:451D  32 0A C0            	LD (CHAR_SPEED_X_GHOST), A
      46   00:4520  21 85 5A                LD HL, PaletteData
      47   00:4523  CD BE 41                CALL SetPalette
      48   00:4526  CD A7 45                CALL STAGE1
      49   00:4529                          ;call MAIN_LOOP
      50   00:4529                          ;CALL CHGET
      51   00:4529  C9                  	ret
      52   00:452A                      
      53   00:452A                      
      54   00:452A                      INIT_CHARS_VARS:    
      55   00:452A  DD 21 17 C0             ld ix, SPRITE_ATTRS           
      56   00:452E                          
      57   00:452E  DD 36 00 69             ld (ix), 69h        ; Sprite 1 - $AF abajo - Y
      58   00:4532  DD 36 01 7F             ld (ix+1), 7Fh      ; X        
      59   00:4536  DD 36 02 00             ld (ix+2), 00h      ; Pattern
      60   00:453A                      
      61   00:453A  DD 36 04 69             ld (ix+4), 69h     ; Sprite 2
      62   00:453E  DD 36 05 7F             ld (ix+5), 7Fh
      63   00:4542  DD 36 06 04             ld (ix+6), 04h        
      64   00:4546                      
      65   00:4546  DD 36 08 69             ld (ix+8), 69h     ; Sprite 3
      66   00:454A  DD 36 09 7F             ld (ix+9), 7Fh
      67   00:454E  DD 36 0A 08             ld (ix+10), 08h        
      68   00:4552                      
      69   00:4552  DD 36 10 0F             ld (ix+SPR_GHOST_STG1), $0f      ; Sprite 1 - Ghost - mask0
      70   00:4556  DD 36 11 B9             ld (ix+SPR_GHOST_STG1+1), $B9
      71   00:455A  DD 36 12 1C             ld (ix+SPR_GHOST_STG1+2), SPR_GHOST_STG1_PTRN_L1
      72   00:455E                          
      73   00:455E  DD 36 14 0F             ld (ix+SPR_GHOST_STG1+4), $0f      ; Sprite 1 - Ghost - mask0
      74   00:4562  DD 36 15 B9             ld (ix+SPR_GHOST_STG1+5), $B9
      75   00:4566  DD 36 16 20             ld (ix+SPR_GHOST_STG1+6), SPR_GHOST_STG1_PTRN_L1+4
      76   00:456A                          
      77   00:456A  AF                      XOR A
      78   00:456B  32 07 C0                LD (JIFFY_TEMP),A
      79   00:456E  32 08 C0                LD (CHAR_SPEED_X),A
      80   00:4571  32 09 C0                LD (CHAR_SPEED_Y),A
      81   00:4574  32 0A C0                LD (CHAR_SPEED_X_GHOST),A
      82   00:4577  32 0F C0                LD (CHAR_DIR_GHOST1),A      ; $00 - LEFT, $FF - RIGHT
      83   00:457A  32 12 C0                LD (CHAR_NEW_DIR_MAIN),A    
      84   00:457D  32 13 C0                LD (CHAR_MAIN_SHOOT),A      ; Indica si el personaje está disparando - $FF
      85   00:4580  32 15 C0                LD (CHAR_DISTANCE_SHOOT),A
      86   00:4583  32 16 C0                LD (CHAR_SPEED_SHOOT),A
      87   00:4586  32 0C C0                LD (CHAR_GHOST_DEAD),A
      88   00:4589  32 14 C0                LD (CHAR_MIN_STEP), A
      89   00:458C  32 9E C0                LD (SPRITE_COLOR_REPLACE2), A
      90   00:458F                         ; LD A,$FF
      91   00:458F  32 06 C0                LD (OLD_KEY_PRESSED), A
      92   00:4592  3E 01                   LD A,$01
      93   00:4594  32 11 C0                LD (CHAR_DIR_MAIN),A        ; $00 - UP, $01 - DOWN, $02 - LEFT, $03 - RIGHT
      94   00:4597                      
      95   00:4597  21 31 49                ld hl, SPRITE_P1_DOWN
      96   00:459A  22 9A C0                ld (SPRITE_PTR_REPLACE), HL    
      97   00:459D  21 31 4F                ld hl, SPRITE_COLOR_P1_DOWN
      98   00:45A0  22 9C C0                ld (SPRITE_COLOR_REPLACE), HL
      99   00:45A3  22 9E C0                LD (SPRITE_COLOR_REPLACE2), HL
     100   00:45A6  C9                      ret
     101   00:45A7                      
     102   00:45A7                      STAGE1:
     103   00:45A7  CD 41 00                CALL DISSCR
     104   00:45AA  21 00 80                LD HL, CEMENTER1
     105   00:45AD  22 A2 C0                LD (BITMAP), HL
     106   00:45B0  06 07                   LD B, :CEMENTER1
     107   00:45B2  CD D7 40                call load_screen
     108   00:45B5                          
     109   00:45B5  CD 61 41                call DUMP_SPR_ALL
     110   00:45B8  CD A1 41                CALL DUMP_SPR_P1
     111   00:45BB  21 F1 4F                LD HL, mapa1
     112   00:45BE  22 A0 C0                LD (MAPA), HL
     113   00:45C1                          
     114   00:45C1  CD 44 00                CALL ENASCR
     115   00:45C4                          ;CALL CHGET
     116   00:45C4                          ;CALL CLEAR_DIALOG_BOX
     117   00:45C4                          
     118   00:45C4                      MAIN_LOOP:
     119   00:45C4                          ;halt ; sincroniza el teclado y pantalla con el procesador (que va muy rápido)    
     120   00:45C4  DD 7E 00                LD A, (ix)  ; Cargamos la Y
     121   00:45C7  FE 00                   CP $00
     122   00:45C9  CA 32 47                JP Z, STAGE2
     123   00:45CC  CD 86 41                call DUMP_SPR_ATTS    
     124   00:45CF                          
     125   00:45CF  DD 7E 01                LD A, (ix +1)   ; Cargamos la X para mirar si hay colisión con la tumba
     126   00:45D2  FE C8                   CP TOMB3_STG1_X
     127   00:45D4  20 15                   JR NZ, .check_dialog_box
     128   00:45D6  3A 00 C0                LD A, (SHOWING_DIALOG)
     129   00:45D9  FE 01                   CP 1
     130   00:45DB  28 16                   JR Z, .animate_ghost
     131   00:45DD  FD 21 10 40             LD IY, sardu01_strings
     132   00:45E1  CD 39 44                CALL print_strings_dialog_box
     133   00:45E4  3E 01                   LD A,1
     134   00:45E6  32 00 C0                LD (SHOWING_DIALOG), A
     135   00:45E9  18 08                   JR .animate_ghost
     136   00:45EB                      
     137   00:45EB                      
     138   00:45EB                      .check_dialog_box
     139   00:45EB  3A 00 C0                LD A, (SHOWING_DIALOG)
     140   00:45EE  FE 01                   CP 1
     141   00:45F0  CC D1 44                CALL Z, CLEAR_DIALOG_BOX
     142   00:45F3                      
     143   00:45F3                      .animate_ghost    
     144   00:45F3  3A 0C C0                LD A,(CHAR_GHOST_DEAD)
     145   00:45F6  FE 01                   CP $01
     146   00:45F8  CA 6C 46                JP Z,.continue
     147   00:45FB  DD 7E 11                LD A, (ix+SPR_GHOST_STG1+1)          ;cargamos la X del Fantasma
     148   00:45FE  2A 0A C0            	LD HL, (CHAR_SPEED_X_GHOST)
     149   00:4601  85                  	ADD L					; Actualizamos la posicion en base a la velocidad
     150   00:4602                          
     151   00:4602  DD 77 11            	LD (ix+SPR_GHOST_STG1+1), A
     152   00:4605  DD 77 15                LD (ix+SPR_GHOST_STG1+5), A
     153   00:4608  FE 16                   CP $16
     154   00:460A  CA 15 46                JP Z,.CHANGE_DIR_RIGHT
     155   00:460D  FE B9                   CP $B9
     156   00:460F  CA 22 46                JP Z,.CHANGE_DIR_LEFT
     157   00:4612                          		
     158   00:4612  C3 2B 46                JP .check_pattern
     159   00:4615                      
     160   00:4615                      .CHANGE_DIR_RIGHT:
     161   00:4615  3E 01                   LD A, MOV_SPEED_GHOST
     162   00:4617  32 0A C0            	LD (CHAR_SPEED_X_GHOST), A
     163   00:461A  3E FF                   LD A,$FF
     164   00:461C  32 0F C0                LD (CHAR_DIR_GHOST1),A
     165   00:461F  C3 2B 46                JP .check_pattern
     166   00:4622                      
     167   00:4622                      .CHANGE_DIR_LEFT:
     168   00:4622  3E FF                   LD A, -MOV_SPEED_GHOST
     169   00:4624  32 0A C0            	LD (CHAR_SPEED_X_GHOST), A
     170   00:4627  AF                      XOR A   ; Pone A a 0
     171   00:4628  32 0F C0                LD (CHAR_DIR_GHOST1),A
     172   00:462B                      
     173   00:462B                      .check_pattern:
     174   00:462B  3A 0F C0                LD A,(CHAR_DIR_GHOST1)
     175   00:462E  FE FF                   CP $FF
     176   00:4630  CA 51 46                JP Z,.check_pattern_RIGHT
     177   00:4633  DD 7E 12                LD A, (ix+SPR_GHOST_STG1+2)       ; Cargamos el patrón y lo cambiamos
     178   00:4636  FE 1C                   CP SPR_GHOST_STG1_PTRN_L1
     179   00:4638  CA 46 46                jp z,.change_pattern_L
     180   00:463B  DD 36 12 1C             LD (ix+SPR_GHOST_STG1+2),SPR_GHOST_STG1_PTRN_L1
     181   00:463F  DD 36 16 20             LD (ix+SPR_GHOST_STG1+6),SPR_GHOST_STG1_PTRN_L1+4
     182   00:4643  C3 6C 46                jp .continue
     183   00:4646                      .change_pattern_L:
     184   00:4646  DD 36 12 24             LD (ix+SPR_GHOST_STG1+2),SPR_GHOST_STG1_PTRN_L2
     185   00:464A  DD 36 16 28             LD (ix+SPR_GHOST_STG1+6),SPR_GHOST_STG1_PTRN_L2+4
     186   00:464E  C3 6C 46                jp .continue
     187   00:4651                      
     188   00:4651                      .check_pattern_RIGHT
     189   00:4651  DD 7E 12                LD A, (ix+SPR_GHOST_STG1+2)       ; Cargamos el patrón y lo cambiamos
     190   00:4654  FE 2C                   CP SPR_GHOST_STG1_PTRN_R1
     191   00:4656  CA 64 46                jp z,.change_pattern_R
     192   00:4659  DD 36 12 2C             LD (ix+SPR_GHOST_STG1+2),SPR_GHOST_STG1_PTRN_R1
     193   00:465D  DD 36 16 30             LD (ix+SPR_GHOST_STG1+6),SPR_GHOST_STG1_PTRN_R1+4
     194   00:4661  C3 6C 46                jp .continue
     195   00:4664                      .change_pattern_R:
     196   00:4664  DD 36 12 34             LD (ix+SPR_GHOST_STG1+2),SPR_GHOST_STG1_PTRN_R2
     197   00:4668  DD 36 16 38             LD (ix+SPR_GHOST_STG1+6),SPR_GHOST_STG1_PTRN_R2+4
     198   00:466C                      
     199   00:466C                      .continue:    
     200   00:466C  CD CE 43                CALL MOVE_SHOOT
     201   00:466F                      .CHECK_GHOST:
     202   00:466F                          ; Comprobamos si hay colision con el fantasma
     203   00:466F  3A 0C C0                LD A,(CHAR_GHOST_DEAD)  ; si está muerto,no lo miramos
     204   00:4672  FE 01                   CP $01
     205   00:4674  CA 98 46                JP Z,.check_KB
     206   00:4677                      
     207   00:4677  DD 46 0C                LD B,(ix+SPR_SHOOT_P1)         ; Y del disparo
     208   00:467A  DD 4E 0D                LD C,(ix+SPR_SHOOT_P1+1)         ; X del disparo
     209   00:467D  DD 56 10                LD D,(ix+SPR_GHOST_STG1)         ; Y del fantasma 
     210   00:4680  DD 5E 11                LD E,(ix+SPR_GHOST_STG1+1)         ; X del fantasma
     211   00:4683  CD 40 40                call check_spr_collision
     212   00:4686  FE 01                   CP 1
     213   00:4688  C2 98 46                JP NZ,.check_KB
     214   00:468B                      
     215   00:468B                      .KILL_GHOST:
     216   00:468B  3E 01                   LD A,1
     217   00:468D  32 0C C0                LD (CHAR_GHOST_DEAD),A
     218   00:4690  DD 36 10 D9             LD (ix+SPR_GHOST_STG1),217    
     219   00:4694  DD 36 14 D9             LD (ix+SPR_GHOST_STG1+4),217    
     220   00:4698                      
     221   00:4698                      .check_KB:
     222   00:4698  76                      halt    
     223   00:4699                      
     224   00:4699  3A 06 C0                LD A, (OLD_KEY_PRESSED)
     225   00:469C  47                      LD B, A
     226   00:469D                      
     227   00:469D  3E 08                   ld a, 8
     228   00:469F  CD 41 01            	call SNSMAT   
     229   00:46A2                          
     230   00:46A2  32 06 C0                LD (OLD_KEY_PRESSED), A
     231   00:46A5                          ;XOR B
     232   00:46A5                          ;AND B
     233   00:46A5                      
     234   00:46A5  4F                      LD C,A    
     235   00:46A6                          
     236   00:46A6  CB 79                   BIT KB_RIGHT, C			; La tecla presionada es RIGHT?
     237   00:46A8  CC 3C 42                call z, move_right
     238   00:46AB                          
     239   00:46AB  CB 61                   BIT KB_LEFT, C			; La tecla presionada es LEFT?
     240   00:46AD  CC 8A 42                call z, move_left
     241   00:46B0                      
     242   00:46B0  CB 69                   BIT KB_UP, C			; La tecla presionada es UP?
     243   00:46B2  CC CD 41                call z, move_up
     244   00:46B5                      
     245   00:46B5  CB 71                   BIT KB_DOWN, C			; La tecla presionada es DOWN?
     246   00:46B7  CC 04 42                call z, move_down
     247   00:46BA                      
     248   00:46BA                      no_arrows:
     249   00:46BA  CB 41                   BIT KB_SPACE, C			; La tecla presionada es SPACE
     250   00:46BC  CC C2 46                call z,SHOOT_MAIN_CHAR
     251   00:46BF                      
     252   00:46BF                          ;BIT KB_DEL, C			; La tecla presionada es DEL    
     253   00:46BF                          ;ret z
     254   00:46BF                      
     255   00:46BF  C3 C4 45                jp MAIN_LOOP
     256   00:46C2                      
     257   00:46C2                      SHOOT_MAIN_CHAR:    
     258   00:46C2  3A 13 C0                LD A, (CHAR_MAIN_SHOOT)
     259   00:46C5  FE 01                   CP $01                  ; Si ya está disparando esperamos a que termine
     260   00:46C7  C8                      RET Z;,MAIN_LOOP
     261   00:46C8  FE 02                   CP $02                  ; Si ya está disparando esperamos a que termine
     262   00:46CA  C8                      RET Z;,MAIN_LOOP
     263   00:46CB  FE 03                   CP $03                  ; Si ya está disparando esperamos a que termine
     264   00:46CD  C8                      RET Z;,MAIN_LOOP
     265   00:46CE  FE 04                   CP $04                  ; Si ya está disparando esperamos a que termine
     266   00:46D0  C8                      RET Z;,MAIN_LOOP
     267   00:46D1                      
     268   00:46D1  DD 36 0E 18             ld (ix+SPR_SHOOT_P1+2), SPR_SHOOT_P1_PTRN     ; Sprite Disparo
     269   00:46D5                      
     270   00:46D5  DD 7E 00                LD A, (ix)          
     271   00:46D8  DD 77 0C                ld (ix+SPR_SHOOT_P1), A       ; Asignamos la Y del personaje    
     272   00:46DB                      
     273   00:46DB  3A 11 C0                LD A, (CHAR_DIR_MAIN)
     274   00:46DE  FE 03                   CP $03
     275   00:46E0  CA FC 46                JP Z,.SHOOT_RIGHT
     276   00:46E3  FE 00                   CP $00
     277   00:46E5  CA 0B 47                JP Z,.SHOOT_UP
     278   00:46E8  FE 01                   CP $01
     279   00:46EA  CA 1E 47                JP Z,.SHOOT_DOWN
     280   00:46ED                          ; SHOOT LEFT
     281   00:46ED  3E 01                   LD A,$01                ; SHOOT LEFT
     282   00:46EF  32 13 C0                LD (CHAR_MAIN_SHOOT),A   ; Activo el estado disparando izquierda
     283   00:46F2  DD 7E 01                LD A, (ix+1)			;cargamos la X - Si no es derecha, debe ser izquierda
     284   00:46F5  21 F4 FF            	LD HL, -12
     285   00:46F8  85                  	ADD L
     286   00:46F9                          
     287   00:46F9  C3 2E 47                JP .CONTINUE
     288   00:46FC                      
     289   00:46FC                      .SHOOT_RIGHT:    
     290   00:46FC  3E 02                   LD A,$02
     291   00:46FE  32 13 C0                LD (CHAR_MAIN_SHOOT),A   ; Activo el estado disparando derecha
     292   00:4701                          
     293   00:4701  DD 7E 01                LD A, (ix+1)			;cargamos la X
     294   00:4704  21 0C 00            	LD HL, 12
     295   00:4707  85                  	ADD L
     296   00:4708  C3 2E 47                JP .CONTINUE
     297   00:470B                      
     298   00:470B                      .SHOOT_UP:
     299   00:470B  3E 03                   LD A,$03
     300   00:470D  32 13 C0                LD (CHAR_MAIN_SHOOT),A   ; Activo el estado disparando arriba
     301   00:4710                          
     302   00:4710                          ; Sumamos el desplazamiento a la Y
     303   00:4710  DD 7E 0C                LD A, (ix+SPR_SHOOT_P1)
     304   00:4713  D6 10                   SUB 16
     305   00:4715  DD 77 0C                LD (ix+SPR_SHOOT_P1), A    
     306   00:4718                          ;LD (ix+17), D
     307   00:4718  DD 7E 01                LD A, (ix+1)			;cargamos la X    
     308   00:471B  C3 2E 47                JP .CONTINUE
     309   00:471E                      
     310   00:471E                      .SHOOT_DOWN
     311   00:471E  3E 04               	LD A,$04
     312   00:4720  32 13 C0                LD (CHAR_MAIN_SHOOT),A   ; Activo el estado disparando abajo
     313   00:4723                          
     314   00:4723                          ; Sumamos el desplazamiento a la Y
     315   00:4723  DD 7E 0C                LD A, (ix+SPR_SHOOT_P1)
     316   00:4726  C6 10                   ADD 16
     317   00:4728  DD 77 0C                LD (ix+SPR_SHOOT_P1), A    
     318   00:472B                          ;LD (ix+17), D
     319   00:472B  DD 7E 01                LD A, (ix+1)			;cargamos la X    
     320   00:472E                      
     321   00:472E                      .CONTINUE:
     322   00:472E                          ;ld (ix+16), B       ; Asignamos la Y del personaje
     323   00:472E  DD 77 0D                ld (ix+SPR_SHOOT_P1+1), A       ; Asignamos la X del personaje + el desplazamiento        
     324   00:4731                          ;jp MAIN_LOOP
     325   00:4731  C9                      ret
     326   00:4732                      
     327   00:4732                      STAGE2:
     328   00:4732  CD 41 00                CALL DISSCR
     329   00:4735  21 00 80                LD HL, CEMENTER2
     330   00:4738  22 A2 C0                LD (BITMAP), HL
     331   00:473B  06 0D                   LD B, :CEMENTER2
     332   00:473D                      
     333   00:473D  CD D7 40                call load_screen
     334   00:4740  21 31 53                LD HL, mapa2
     335   00:4743  22 A0 C0                LD (MAPA), HL
     336   00:4746                          
     337   00:4746                          ; Ponemos el P1 por encima del marco
     338   00:4746  DD 36 00 A1             LD (ix), 161      ; mask 0
     339   00:474A  DD 36 04 A1             LD (ix+4), 161    ; mask 1
     340   00:474E  DD 36 08 A1             LD (ix+8), 161    ; mask 2
     341   00:4752                          
     342   00:4752  DD 36 10 D9             LD (ix+SPR_GHOST_STG1),217  ; ocultamos el fantasma
     343   00:4756  DD 36 14 D9             LD (ix+SPR_GHOST_STG1+4),217  ; ocultamos el fantasma
     344   00:475A                          
     345   00:475A  CD 61 41                CALL DUMP_SPR_ALL
     346   00:475D  CD A1 41                CALL DUMP_SPR_P1
     347   00:4760                          
     348   00:4760                          ; Esqueleto
     349   00:4760  DD 36 18 10             LD (ix+SPR_GHOST_STG2), 10h
     350   00:4764  DD 36 19 10             LD (ix+SPR_GHOST_STG2+1), 10h
     351   00:4768  DD 36 1A 3C             LD (ix+SPR_GHOST_STG2+2), SPR_GHOST_STG2_PTRN_L1
     352   00:476C                      
     353   00:476C  DD 36 1C 10             LD (ix+SPR_GHOST_STG2+4), 10h
     354   00:4770  DD 36 1D 10             LD (ix+SPR_GHOST_STG2+5), 10h
     355   00:4774  DD 36 1E 40             LD (ix+SPR_GHOST_STG2+6), SPR_GHOST_STG2_PTRN_L1+4
     356   00:4778                      
     357   00:4778  AF                      XOR A
     358   00:4779  32 0D C0                LD (CHAR_GHOST_DEAD_STG2), A
     359   00:477C  32 0E C0                LD (CHAR_MIN_STEP_STG2), A
     360   00:477F  3E FF                   LD A, $FF
     361   00:4781  32 10 C0                LD (CHAR_DIR_GHOST_STG2), A
     362   00:4784  3E 01                   LD A, MOV_SPEED_GHOST
     363   00:4786  32 0B C0            	LD (CHAR_SPEED_X_GHOST_STG2), A
     364   00:4789                      
     365   00:4789  CD 44 00                CALL ENASCR
     366   00:478C                          
     367   00:478C                      MAIN_LOOP2:
     368   00:478C  76                      halt    
     369   00:478D                      
     370   00:478D  DD 7E 00                LD A, (ix)    
     371   00:4790  FE A2                   CP 162      ; Miramos si la Y es 160 para pasar a stg1
     372   00:4792  C2 BC 47                JP NZ, .no_screen_change
     373   00:4795                          ; Ponemos el SP1 al principio de la pantalla 1
     374   00:4795  DD 36 00 01             LD (ix), 1          ; SP1 - Y = 1
     375   00:4799  DD 36 04 01             LD (ix+4), 1
     376   00:479D  DD 36 08 01             LD (ix+8), 1
     377   00:47A1                      
     378   00:47A1  3A 0C C0                LD A, (CHAR_GHOST_DEAD)
     379   00:47A4  FE 01                   CP $01
     380   00:47A6  CA B1 47                JP Z, .GHOST_DEAD
     381   00:47A9  DD 36 10 0F             ld (ix+SPR_GHOST_STG1), $0F      ; Sprite 1 - Ghost
     382   00:47AD  DD 36 14 0F             ld (ix+SPR_GHOST_STG1+4), $0F      ; Sprite 1 - Ghost
     383   00:47B1                      .GHOST_DEAD:
     384   00:47B1  DD 36 18 D9             LD (ix+SPR_GHOST_STG2),217  ; ocultamos el esqueleto
     385   00:47B5  DD 36 1C D9             LD (ix+SPR_GHOST_STG2+4),217  ; ocultamos el esqueleto
     386   00:47B9  CD A7 45                CALL STAGE1
     387   00:47BC                      
     388   00:47BC                      .no_screen_change:
     389   00:47BC                      
     390   00:47BC  CD 86 41                call DUMP_SPR_ATTS    
     391   00:47BF                          ; Movemos el esqueleto
     392   00:47BF  3A 0D C0                LD A,(CHAR_GHOST_DEAD_STG2)
     393   00:47C2  FE 01                   CP $01
     394   00:47C4  CA 49 48                JP Z,.continue
     395   00:47C7  DD 7E 19                LD A, (ix+SPR_GHOST_STG2+1)          ;cargamos la X del Esqueleto
     396   00:47CA  2A 0B C0            	LD HL, (CHAR_SPEED_X_GHOST_STG2)
     397   00:47CD  85                  	ADD L					; Actualizamos la posicion en base a la velocidad
     398   00:47CE                          
     399   00:47CE  DD 77 19            	LD (ix+SPR_GHOST_STG2+1), A	
     400   00:47D1  DD 77 1D                LD (ix+SPR_GHOST_STG2+5), A
     401   00:47D4  FE 16                   CP $16
     402   00:47D6  CA EE 47                JP Z,.CHANGE_DIR_RIGHT
     403   00:47D9  FE B9                   CP $B9
     404   00:47DB  CA FB 47                JP Z,.CHANGE_DIR_LEFT
     405   00:47DE                      
     406   00:47DE  3A 0E C0                LD A, (CHAR_MIN_STEP_STG2)		
     407   00:47E1  FE 06                   CP MAX_CHAR_STEPS_STG2
     408   00:47E3  CA 04 48                JP Z,.check_pattern
     409   00:47E6  C6 01                   ADD 1
     410   00:47E8  32 0E C0                LD (CHAR_MIN_STEP_STG2), A
     411   00:47EB  C3 49 48                JP .continue
     412   00:47EE                      
     413   00:47EE                      .CHANGE_DIR_RIGHT:
     414   00:47EE  3E 01                   LD A, MOV_SPEED_GHOST
     415   00:47F0  32 0B C0            	LD (CHAR_SPEED_X_GHOST_STG2), A
     416   00:47F3  3E FF                   LD A,$FF
     417   00:47F5  32 10 C0                LD (CHAR_DIR_GHOST_STG2),A
     418   00:47F8  C3 04 48                JP .check_pattern
     419   00:47FB                      
     420   00:47FB                      .CHANGE_DIR_LEFT:
     421   00:47FB  3E FF                   LD A, -MOV_SPEED_GHOST
     422   00:47FD  32 0B C0            	LD (CHAR_SPEED_X_GHOST_STG2), A
     423   00:4800  AF                      XOR A   ; Pone A a 0
     424   00:4801  32 10 C0                LD (CHAR_DIR_GHOST_STG2),A
     425   00:4804                      
     426   00:4804                      .check_pattern:
     427   00:4804  AF                      XOR A
     428   00:4805  32 0E C0                LD (CHAR_MIN_STEP_STG2), A
     429   00:4808  3A 10 C0                LD A,(CHAR_DIR_GHOST_STG2)
     430   00:480B  FE FF                   CP $FF
     431   00:480D  CA 2E 48                JP Z,.check_pattern_RIGHT
     432   00:4810  DD 7E 1A                LD A, (ix+SPR_GHOST_STG2+2)       ; Cargamos el patrón y lo cambiamos
     433   00:4813  FE 3C                   CP SPR_GHOST_STG2_PTRN_L1
     434   00:4815  CA 23 48                jp z,.change_pattern_L
     435   00:4818  DD 36 1A 3C             LD (ix+SPR_GHOST_STG2+2),SPR_GHOST_STG2_PTRN_L1
     436   00:481C  DD 36 1E 40             LD (ix+SPR_GHOST_STG2+6),SPR_GHOST_STG2_PTRN_L1+4
     437   00:4820  C3 49 48                jp .continue
     438   00:4823                      .change_pattern_L:
     439   00:4823  DD 36 1A 44             LD (ix+SPR_GHOST_STG2+2),SPR_GHOST_STG2_PTRN_L2
     440   00:4827  DD 36 1E 48             LD (ix+SPR_GHOST_STG2+6),SPR_GHOST_STG2_PTRN_L2+4
     441   00:482B  C3 49 48                jp .continue
     442   00:482E                      
     443   00:482E                      .check_pattern_RIGHT
     444   00:482E  DD 7E 1A                LD A, (ix+SPR_GHOST_STG2+2)       ; Cargamos el patrón y lo cambiamos
     445   00:4831  FE 4C                   CP SPR_GHOST_STG2_PTRN_R1
     446   00:4833  CA 41 48                jp z,.change_pattern_R
     447   00:4836  DD 36 1A 4C             LD (ix+SPR_GHOST_STG2+2),SPR_GHOST_STG2_PTRN_R1
     448   00:483A  DD 36 1E 50             LD (ix+SPR_GHOST_STG2+6),SPR_GHOST_STG2_PTRN_R1+4
     449   00:483E  C3 49 48                jp .continue
     450   00:4841                      .change_pattern_R:
     451   00:4841  DD 36 1A 54             LD (ix+SPR_GHOST_STG2+2),SPR_GHOST_STG2_PTRN_R2
     452   00:4845  DD 36 1E 58             LD (ix+SPR_GHOST_STG2+6),SPR_GHOST_STG2_PTRN_R2+4
     453   00:4849                      
     454   00:4849                      .continue:
     455   00:4849  CD CE 43                CALL MOVE_SHOOT    
     456   00:484C                      
     457   00:484C  3E 08                   ld a, 8
     458   00:484E  CD 41 01            	call SNSMAT   
     459   00:4851  4F                      LD C,A    
     460   00:4852                              
     461   00:4852  CB 79                   BIT KB_RIGHT, C			; La tecla presionada es RIGHT?
     462   00:4854  CC 3C 42                call z, move_right
     463   00:4857                          
     464   00:4857  CB 61                   BIT KB_LEFT, C			; La tecla presionada es LEFT?
     465   00:4859  CC 8A 42                call z, move_left
     466   00:485C                      
     467   00:485C  CB 69                   BIT KB_UP, C			; La tecla presionada es UP?
     468   00:485E  CC CD 41                call z, move_up
     469   00:4861                      
     470   00:4861  CB 71                   BIT KB_DOWN, C			; La tecla presionada es DOWN?
     471   00:4863  CC 04 42                call z, move_down
     472   00:4866                      
     473   00:4866  CB 41                   BIT KB_SPACE, C			; La tecla presionada es SPACE
     474   00:4868  CC C2 46                call z,SHOOT_MAIN_CHAR
     475   00:486B                      
     476   00:486B  CB 59                   BIT KB_DEL, C			; La tecla presionada es DEL    
     477   00:486D  C8                      ret z
     478   00:486E                      
     479   00:486E  C3 8C 47                jp MAIN_LOOP2
     480   00:4871                      
     481   00:4871                      include "include\BTH_data.asm"
       1.  00:4871                      SPRITE_P1_UP:
       2.  00:4871                          ; UP 1        
       3.  00:4871                          ; mask 0
       4.  00:4871                          DB $07,$0F,$05,$1F,$1F,$3F,$3F,$7F
       4.  00:4871  07 0F 05 1F 1F 3F 3F 7F 
       5.  00:4879                          DB $00,$4F,$70,$38,$0C,$0E,$07,$04
       5.  00:4879  00 4F 70 38 0C 0E 07 04 
       6.  00:4881                          DB $E0,$F0,$A0,$F8,$F8,$F8,$FC,$FE
       6.  00:4881  E0 F0 A0 F8 F8 F8 FC FE 
       7.  00:4889                          DB $06,$F2,$1E,$3C,$30,$70,$C0,$00
       7.  00:4889  06 F2 1E 3C 30 70 C0 00 
       8.  00:4891                          ; mask 1
       9.  00:4891                          DB $00,$00,$18,$00,$1F,$00,$00,$00
       9.  00:4891  00 00 18 00 1F 00 00 00 
      10.  00:4899                          DB $7F,$50,$4F,$3F,$0F,$0F,$07,$02
      10.  00:4899  7F 50 4F 3F 0F 0F 07 02 
      11.  00:48A1                          DB $00,$00,$10,$00,$FC,$00,$00,$00
      11.  00:48A1  00 00 10 00 FC 00 00 00 
      12.  00:48A9                          DB $F2,$0E,$FE,$FC,$F0,$F0,$A0,$00
      12.  00:48A9  F2 0E FE FC F0 F0 A0 00 
      13.  00:48B1                          ; mask 2
      14.  00:48B1                          DB $00,$00,$1A,$00,$00,$00,$00,$00
      14.  00:48B1  00 00 1A 00 00 00 00 00 
      15.  00:48B9                          DB $7F,$60,$00,$00,$00,$00,$07,$00
      15.  00:48B9  7F 60 00 00 00 00 07 00 
      16.  00:48C1                          DB $00,$00,$50,$00,$00,$00,$00,$00
      16.  00:48C1  00 00 50 00 00 00 00 00 
      17.  00:48C9                          DB $FA,$0E,$00,$00,$00,$00,$80,$00
      17.  00:48C9  FA 0E 00 00 00 00 80 00 
      18.  00:48D1                          
      19.  00:48D1                          ; UP 2
      20.  00:48D1                          ; mask 0
      21.  00:48D1                          DB $07,$0F,$05,$1F,$1F,$3F,$3F,$7F
      21.  00:48D1  07 0F 05 1F 1F 3F 3F 7F 
      22.  00:48D9                          DB $10,$4F,$70,$38,$0C,$0E,$05,$00
      22.  00:48D9  10 4F 70 38 0C 0E 05 00 
      23.  00:48E1                          DB $E0,$F0,$A0,$F8,$F8,$F8,$FC,$FE
      23.  00:48E1  E0 F0 A0 F8 F8 F8 FC FE 
      24.  00:48E9                          DB $02,$F2,$1E,$3C,$30,$70,$E0,$40
      24.  00:48E9  02 F2 1E 3C 30 70 E0 40 
      25.  00:48F1                          ; mask 1
      26.  00:48F1                          DB $00,$00,$18,$00,$1F,$00,$00,$00
      26.  00:48F1  00 00 18 00 1F 00 00 00 
      27.  00:48F9                          DB $4F,$70,$7F,$3F,$0F,$0F,$03,$00
      27.  00:48F9  4F 70 7F 3F 0F 0F 03 00 
      28.  00:4901                          DB $00,$00,$10,$00,$FC,$00,$00,$00
      28.  00:4901  00 00 10 00 FC 00 00 00 
      29.  00:4909                          DB $FE,$06,$F2,$FC,$F0,$F0,$E0,$20
      29.  00:4909  FE 06 F2 FC F0 F0 E0 20 
      30.  00:4911                          ; mask 2
      31.  00:4911                          DB $00,$00,$1A,$00,$00,$00,$00,$00
      31.  00:4911  00 00 1A 00 00 00 00 00 
      32.  00:4919                          DB $6F,$70,$00,$00,$00,$00,$01,$00
      32.  00:4919  6F 70 00 00 00 00 01 00 
      33.  00:4921                          DB $00,$00,$50,$00,$00,$00,$00,$00
      33.  00:4921  00 00 50 00 00 00 00 00 
      34.  00:4929                          DB $FE,$0A,$00,$00,$00,$00,$E0,$00
      34.  00:4929  FE 0A 00 00 00 00 E0 00 
      35.  00:4931                          
      36.  00:4931                      SPRITE_P1_DOWN:
      37.  00:4931                          ; DOWN 1 - 00h
      38.  00:4931                          ; mask 0
      39.  00:4931                          DB $07,$0F,$04,$06,$0F,$07,$1F,$3F
      39.  00:4931  07 0F 04 06 0F 07 1F 3F 
      40.  00:4939                          DB $4C,$4E,$4E,$3C,$0C,$0E,$0F,$08
      40.  00:4939  4C 4E 4E 3C 0C 0E 0F 08 
      41.  00:4941                          DB $E0,$F0,$20,$20,$70,$E0,$F8,$FC
      41.  00:4941  E0 F0 20 20 70 E0 F8 FC 
      42.  00:4949                          DB $32,$72,$7E,$7C,$70,$F0,$C0,$00    
      42.  00:4949  32 72 7E 7C 70 F0 C0 00 
      43.  00:4951                          ; mask 1
      44.  00:4951                          DB $00,$00,$19,$19,$10,$3A,$3A,$78
      44.  00:4951  00 00 19 19 10 3A 3A 78 
      45.  00:4959                          DB $5F,$5E,$7E,$3C,$0C,$0E,$0F,$04
      45.  00:4959  5F 5E 7E 3C 0C 0E 0F 04 
      46.  00:4961                          DB $00,$00,$90,$D8,$88,$58,$5C,$1E
      46.  00:4961  00 00 90 D8 88 58 5C 1E 
      47.  00:4969                          DB $F6,$FE,$FE,$3C,$30,$70,$A0,$00    
      47.  00:4969  F6 FE FE 3C 30 70 A0 00 
      48.  00:4971                          ; mask 2
      49.  00:4971                          DB $00,$00,$1B,$00,$10,$00,$00,$00
      49.  00:4971  00 00 1B 00 10 00 00 00 
      50.  00:4979                          DB $6F,$6F,$7F,$3F,$0F,$0F,$0F,$00
      50.  00:4979  6F 6F 7F 3F 0F 0F 0F 00 
      51.  00:4981                          DB $00,$00,$D0,$00,$8C,$00,$00,$00
      51.  00:4981  00 00 D0 00 8C 00 00 00 
      52.  00:4989                          DB $FA,$7E,$7E,$BC,$B0,$70,$80,$00
      52.  00:4989  FA 7E 7E BC B0 70 80 00 
      53.  00:4991                          
      54.  00:4991                          ; DOWN 2
      55.  00:4991                          ; mask 0 - 0Ch    
      56.  00:4991                          DB $07,$0F,$04,$06,$0F,$07,$1F,$3F
      56.  00:4991  07 0F 04 06 0F 07 1F 3F 
      57.  00:4999                          DB $4C,$4E,$7E,$3C,$0C,$0E,$05,$00
      57.  00:4999  4C 4E 7E 3C 0C 0E 05 00 
      58.  00:49A1                          DB $E0,$F0,$20,$20,$70,$E0,$F8,$FC
      58.  00:49A1  E0 F0 20 20 70 E0 F8 FC 
      59.  00:49A9                          DB $32,$72,$72,$7C,$70,$F0,$E0,$40    
      59.  00:49A9  32 72 72 7C 70 F0 E0 40 
      60.  00:49B1                          ; mask 1
      61.  00:49B1                          DB $00,$00,$19,$19,$10,$3A,$3A,$78
      61.  00:49B1  00 00 19 19 10 3A 3A 78 
      62.  00:49B9                          DB $5F,$7E,$7E,$3C,$0C,$0E,$03,$00
      62.  00:49B9  5F 7E 7E 3C 0C 0E 03 00 
      63.  00:49C1                          DB $00,$00,$90,$D8,$88,$58,$5C,$1E
      63.  00:49C1  00 00 90 D8 88 58 5C 1E 
      64.  00:49C9                          DB $F6,$F6,$FE,$3C,$30,$70,$E0,$20    
      64.  00:49C9  F6 F6 FE 3C 30 70 E0 20 
      65.  00:49D1                          ; mask 2
      66.  00:49D1                          DB $00,$00,$1B,$00,$10,$00,$00,$00
      66.  00:49D1  00 00 1B 00 10 00 00 00 
      67.  00:49D9                          DB $6F,$7F,$7F,$3F,$0F,$0F,$01,$00
      67.  00:49D9  6F 7F 7F 3F 0F 0F 01 00 
      68.  00:49E1                          DB $00,$00,$D0,$00,$8C,$00,$00,$00
      68.  00:49E1  00 00 D0 00 8C 00 00 00 
      69.  00:49E9                          DB $FA,$7A,$7E,$BC,$B0,$70,$E0,$00
      69.  00:49E9  FA 7A 7E BC B0 70 E0 00 
      70.  00:49F1                      
      71.  00:49F1                      SPRITE_P1_LEFT:         
      72.  00:49F1                          ; --- Slot 1
      73.  00:49F1                          ; mask 0
      74.  00:49F1                          DB $07,$0F,$02,$05,$07,$07,$0F,$0F
      74.  00:49F1  07 0F 02 05 07 07 0F 0F 
      75.  00:49F9                          DB $07,$03,$03,$01,$01,$03,$03,$04
      75.  00:49F9  07 03 03 01 01 03 03 04 
      76.  00:4A01                          DB $E0,$F0,$80,$00,$A0,$E0,$C0,$C0
      76.  00:4A01  E0 F0 80 00 A0 E0 C0 C0 
      77.  00:4A09                          DB $E0,$B0,$B0,$F0,$F0,$F0,$C0,$00
      77.  00:4A09  E0 B0 B0 F0 F0 F0 C0 00 
      78.  00:4A11                          ; mask 1
      79.  00:4A11                          DB $00,$00,$18,$1A,$08,$0A,$12,$10
      79.  00:4A11  00 00 18 1A 08 0A 12 10 
      80.  00:4A19                          DB $08,$03,$03,$01,$01,$03,$03,$03
      80.  00:4A19  08 03 03 01 01 03 03 03 
      81.  00:4A21                          DB $00,$00,$78,$F8,$5C,$1C,$7E,$7E
      81.  00:4A21  00 00 78 F8 5C 1C 7E 7E 
      82.  00:4A29                          DB $FE,$3E,$3E,$3C,$F8,$F8,$B0,$00    
      82.  00:4A29  FE 3E 3E 3C F8 F8 B0 00 
      83.  00:4A31                          ; mask 2
      84.  00:4A31                          DB $00,$00,$1D,$00,$28,$00,$00,$00
      84.  00:4A31  00 00 1D 00 28 00 00 00 
      85.  00:4A39                          DB $00,$07,$07,$07,$07,$07,$03,$00
      85.  00:4A39  00 07 07 07 07 07 03 00 
      86.  00:4A41                          DB $00,$00,$78,$00,$5C,$00,$00,$00
      86.  00:4A41  00 00 78 00 5C 00 00 00 
      87.  00:4A49                          DB $00,$7E,$7E,$3C,$F8,$F8,$80,$00    
      87.  00:4A49  00 7E 7E 3C F8 F8 80 00 
      88.  00:4A51                          ; --- Slot 3
      89.  00:4A51                          ; mask 0
      90.  00:4A51                          DB $07,$0F,$02,$05,$07,$07,$0F,$0F
      90.  00:4A51  07 0F 02 05 07 07 0F 0F 
      91.  00:4A59                          DB $07,$03,$03,$01,$01,$03,$04,$00
      91.  00:4A59  07 03 03 01 01 03 04 00 
      92.  00:4A61                          DB $E0,$F0,$80,$00,$A0,$E0,$C0,$C0
      92.  00:4A61  E0 F0 80 00 A0 E0 C0 C0 
      93.  00:4A69                          DB $E0,$B0,$B0,$B0,$F0,$F0,$E0,$40
      93.  00:4A69  E0 B0 B0 B0 F0 F0 E0 40 
      94.  00:4A71                          ; mask 1
      95.  00:4A71                          DB $00,$00,$18,$1A,$08,$0A,$12,$10
      95.  00:4A71  00 00 18 1A 08 0A 12 10 
      96.  00:4A79                          DB $08,$03,$03,$01,$01,$03,$03,$00
      96.  00:4A79  08 03 03 01 01 03 03 00 
      97.  00:4A81                          DB $00,$00,$78,$F8,$5C,$1C,$7E,$7E
      97.  00:4A81  00 00 78 F8 5C 1C 7E 7E 
      98.  00:4A89                          DB $FE,$3E,$3E,$3C,$38,$F8,$E0,$30
      98.  00:4A89  FE 3E 3E 3C 38 F8 E0 30 
      99.  00:4A91                          ; mask 2
     100.  00:4A91                          DB $00,$00,$1D,$00,$28,$00,$00,$00
     100.  00:4A91  00 00 1D 00 28 00 00 00 
     101.  00:4A99                          DB $00,$07,$07,$07,$07,$07,$00,$00
     101.  00:4A99  00 07 07 07 07 07 00 00 
     102.  00:4AA1                          DB $00,$00,$78,$00,$5C,$00,$00,$00
     102.  00:4AA1  00 00 78 00 5C 00 00 00 
     103.  00:4AA9                          DB $00,$7E,$7E,$7C,$38,$F8,$E0,$00
     103.  00:4AA9  00 7E 7E 7C 38 F8 E0 00 
     104.  00:4AB1                      
     105.  00:4AB1                      SPRITE_P1_RIGHT:
     106.  00:4AB1                          ; --- Slot 0
     107.  00:4AB1                          ; mask 0
     108.  00:4AB1                          DB $07,$0F,$01,$00,$05,$07,$03,$03
     108.  00:4AB1  07 0F 01 00 05 07 03 03 
     109.  00:4AB9                          DB $07,$0D,$0E,$0F,$0F,$0F,$03,$00
     109.  00:4AB9  07 0D 0E 0F 0F 0F 03 00 
     110.  00:4AC1                          DB $E0,$F0,$40,$A0,$E0,$E0,$F0,$F0
     110.  00:4AC1  E0 F0 40 A0 E0 E0 F0 F0 
     111.  00:4AC9                          DB $E0,$C0,$C0,$C0,$80,$C0,$C0,$20
     111.  00:4AC9  E0 C0 C0 C0 80 C0 C0 20 
     112.  00:4AD1                          ; mask 1
     113.  00:4AD1                          DB $00,$00,$1E,$1F,$3A,$38,$7E,$7E
     113.  00:4AD1  00 00 1E 1F 3A 38 7E 7E 
     114.  00:4AD9                          DB $7F,$7C,$7E,$3E,$1F,$1F,$0D,$00
     114.  00:4AD9  7F 7C 7E 3E 1F 1F 0D 00 
     115.  00:4AE1                          DB $00,$00,$18,$58,$10,$50,$48,$08
     115.  00:4AE1  00 00 18 58 10 50 48 08 
     116.  00:4AE9                          DB $10,$C0,$40,$40,$80,$C0,$C0,$C0
     116.  00:4AE9  10 C0 40 40 80 C0 C0 C0 
     117.  00:4AF1                          ; mask 2
     118.  00:4AF1                          DB $00,$00,$1E,$00,$3A,$00,$00,$00
     118.  00:4AF1  00 00 1E 00 3A 00 00 00 
     119.  00:4AF9                          DB $00,$7E,$7F,$3E,$1F,$1F,$01,$00
     119.  00:4AF9  00 7E 7F 3E 1F 1F 01 00 
     120.  00:4B01                          DB $00,$00,$B8,$00,$14,$00,$00,$00
     120.  00:4B01  00 00 B8 00 14 00 00 00 
     121.  00:4B09                          DB $00,$E0,$60,$60,$E0,$E0,$C0,$00
     121.  00:4B09  00 E0 60 60 E0 E0 C0 00 
     122.  00:4B11                          
     123.  00:4B11                          ; --- Slot 2
     124.  00:4B11                         ; mask 0
     125.  00:4B11                          DB $07,$0F,$01,$00,$05,$07,$03,$03
     125.  00:4B11  07 0F 01 00 05 07 03 03 
     126.  00:4B19                          DB $07,$0D,$0B,$0B,$0F,$0F,$07,$02
     126.  00:4B19  07 0D 0B 0B 0F 0F 07 02 
     127.  00:4B21                          DB $E0,$F0,$40,$A0,$E0,$E0,$F0,$F0
     127.  00:4B21  E0 F0 40 A0 E0 E0 F0 F0 
     128.  00:4B29                          DB $E0,$C0,$C0,$C0,$80,$C0,$20,$00
     128.  00:4B29  E0 C0 C0 C0 80 C0 20 00 
     129.  00:4B31                          ; mask 1
     130.  00:4B31                          DB $00,$00,$1E,$1F,$3A,$38,$7E,$7E
     130.  00:4B31  00 00 1E 1F 3A 38 7E 7E 
     131.  00:4B39                          DB $7F,$7C,$79,$39,$19,$1F,$07,$0C
     131.  00:4B39  7F 7C 79 39 19 1F 07 0C 
     132.  00:4B41                          DB $00,$00,$18,$58,$10,$50,$48,$08
     132.  00:4B41  00 00 18 58 10 50 48 08 
     133.  00:4B49                          DB $10,$C0,$C0,$C0,$80,$C0,$C0,$00
     133.  00:4B49  10 C0 C0 C0 80 C0 C0 00 
     134.  00:4B51                              ; mask 2
     135.  00:4B51                          DB $00,$00,$1E,$00,$3A,$00,$00,$00
     135.  00:4B51  00 00 1E 00 3A 00 00 00 
     136.  00:4B59                          DB $00,$7E,$7D,$3D,$19,$1F,$07,$00
     136.  00:4B59  00 7E 7D 3D 19 1F 07 00 
     137.  00:4B61                          DB $00,$00,$B8,$00,$14,$00,$00,$00
     137.  00:4B61  00 00 B8 00 14 00 00 00 
     138.  00:4B69                          DB $00,$E0,$E0,$E0,$E0,$E0,$00,$00
     138.  00:4B69  00 E0 E0 E0 E0 E0 00 00 
     139.  00:4B71                          
     140.  00:4B71                      SPRITE_PATTERN:    
     141.  00:4B71                          ; P1 - DOWN 1 
     142.  00:4B71                          ; DOWN 1 - 00h
     143.  00:4B71                          ; mask 0
     144.  00:4B71                          DB $07,$0F,$04,$06,$0F,$07,$1F,$3F
     144.  00:4B71  07 0F 04 06 0F 07 1F 3F 
     145.  00:4B79                          DB $4C,$4E,$4E,$3C,$0C,$0E,$0F,$08
     145.  00:4B79  4C 4E 4E 3C 0C 0E 0F 08 
     146.  00:4B81                          DB $E0,$F0,$20,$20,$70,$E0,$F8,$FC
     146.  00:4B81  E0 F0 20 20 70 E0 F8 FC 
     147.  00:4B89                          DB $32,$72,$7E,$7C,$70,$F0,$C0,$00    
     147.  00:4B89  32 72 7E 7C 70 F0 C0 00 
     148.  00:4B91                          ; mask 1
     149.  00:4B91                          DB $00,$00,$19,$19,$10,$3A,$3A,$78
     149.  00:4B91  00 00 19 19 10 3A 3A 78 
     150.  00:4B99                          DB $5F,$5E,$7E,$3C,$0C,$0E,$0F,$04
     150.  00:4B99  5F 5E 7E 3C 0C 0E 0F 04 
     151.  00:4BA1                          DB $00,$00,$90,$D8,$88,$58,$5C,$1E
     151.  00:4BA1  00 00 90 D8 88 58 5C 1E 
     152.  00:4BA9                          DB $F6,$FE,$FE,$3C,$30,$70,$A0,$00    
     152.  00:4BA9  F6 FE FE 3C 30 70 A0 00 
     153.  00:4BB1                          ; mask 2
     154.  00:4BB1                          DB $00,$00,$1B,$00,$10,$00,$00,$00
     154.  00:4BB1  00 00 1B 00 10 00 00 00 
     155.  00:4BB9                          DB $6F,$6F,$7F,$3F,$0F,$0F,$0F,$00
     155.  00:4BB9  6F 6F 7F 3F 0F 0F 0F 00 
     156.  00:4BC1                          DB $00,$00,$D0,$00,$8C,$00,$00,$00
     156.  00:4BC1  00 00 D0 00 8C 00 00 00 
     157.  00:4BC9                          DB $FA,$7E,$7E,$BC,$B0,$70,$80,$00
     157.  00:4BC9  FA 7E 7E BC B0 70 80 00 
     158.  00:4BD1                          
     159.  00:4BD1                          ; DOWN 2
     160.  00:4BD1                          ; mask 0 - 0Ch    
     161.  00:4BD1                          DB $07,$0F,$04,$06,$0F,$07,$1F,$3F
     161.  00:4BD1  07 0F 04 06 0F 07 1F 3F 
     162.  00:4BD9                          DB $4C,$4E,$7E,$3C,$0C,$0E,$05,$00
     162.  00:4BD9  4C 4E 7E 3C 0C 0E 05 00 
     163.  00:4BE1                          DB $E0,$F0,$20,$20,$70,$E0,$F8,$FC
     163.  00:4BE1  E0 F0 20 20 70 E0 F8 FC 
     164.  00:4BE9                          DB $32,$72,$72,$7C,$70,$F0,$E0,$40    
     164.  00:4BE9  32 72 72 7C 70 F0 E0 40 
     165.  00:4BF1                          ; mask 1
     166.  00:4BF1                          DB $00,$00,$19,$19,$10,$3A,$3A,$78
     166.  00:4BF1  00 00 19 19 10 3A 3A 78 
     167.  00:4BF9                          DB $5F,$7E,$7E,$3C,$0C,$0E,$03,$00
     167.  00:4BF9  5F 7E 7E 3C 0C 0E 03 00 
     168.  00:4C01                          DB $00,$00,$90,$D8,$88,$58,$5C,$1E
     168.  00:4C01  00 00 90 D8 88 58 5C 1E 
     169.  00:4C09                          DB $F6,$F6,$FE,$3C,$30,$70,$E0,$20    
     169.  00:4C09  F6 F6 FE 3C 30 70 E0 20 
     170.  00:4C11                          ; mask 2
     171.  00:4C11                          DB $00,$00,$1B,$00,$10,$00,$00,$00
     171.  00:4C11  00 00 1B 00 10 00 00 00 
     172.  00:4C19                          DB $6F,$7F,$7F,$3F,$0F,$0F,$01,$00
     172.  00:4C19  6F 7F 7F 3F 0F 0F 01 00 
     173.  00:4C21                          DB $00,$00,$D0,$00,$8C,$00,$00,$00
     173.  00:4C21  00 00 D0 00 8C 00 00 00 
     174.  00:4C29                          DB $FA,$7A,$7E,$BC,$B0,$70,$E0,$00
     174.  00:4C29  FA 7A 7E BC B0 70 E0 00 
     175.  00:4C31                          
     176.  00:4C31                          ; Antichrist - RIGHT
     177.  00:4C31                          ; mask 0 - 18h    
     178.  00:4C31                          DB $00,$00,$00,$01,$01,$01,$01,$01
     178.  00:4C31  00 00 00 01 01 01 01 01 
     179.  00:4C39                          DB $01,$01,$07,$07,$01,$01,$00,$00
     179.  00:4C39  01 01 07 07 01 01 00 00 
     180.  00:4C41                          DB $00,$00,$00,$80,$80,$80,$80,$80
     180.  00:4C41  00 00 00 80 80 80 80 80 
     181.  00:4C49                          DB $80,$80,$E0,$E0,$80,$80,$00,$00
     181.  00:4C49  80 80 E0 E0 80 80 00 00 
     182.  00:4C51                      
     183.  00:4C51                          ;Ghost 1 Left - 1CH
     184.  00:4C51                          ; mask 0
     185.  00:4C51                          DB $03,$04,$08,$68,$B5,$90,$50,$40
     185.  00:4C51  03 04 08 68 B5 90 50 40 
     186.  00:4C59                          DB $22,$20,$10,$10,$08,$06,$03,$00
     186.  00:4C59  22 20 10 10 08 06 03 00 
     187.  00:4C61                          DB $C0,$E0,$70,$36,$BB,$33,$26,$06
     187.  00:4C61  C0 E0 70 36 BB 33 26 06 
     188.  00:4C69                          DB $0C,$18,$3E,$19,$07,$0C,$F8,$E0
     188.  00:4C69  0C 18 3E 19 07 0C F8 E0 
     189.  00:4C71                          ; mask 1    20h
     190.  00:4C71                          DB $00,$07,$0F,$6F,$DF,$FF,$6F,$7F
     190.  00:4C71  00 07 0F 6F DF FF 6F 7F 
     191.  00:4C79                          DB $3F,$3F,$1F,$1F,$0F,$05,$03,$00
     191.  00:4C79  3F 3F 1F 1F 0F 05 03 00 
     192.  00:4C81                          DB $00,$20,$90,$D6,$DD,$DD,$DA,$FA
     192.  00:4C81  00 20 90 D6 DD DD DA FA 
     193.  00:4C89                          DB $F4,$E8,$CE,$EF,$FB,$F4,$18,$00
     193.  00:4C89  F4 E8 CE EF FB F4 18 00 
     194.  00:4C91                          
     195.  00:4C91                          ; Ghost 2 Left - 24h
     196.  00:4C91                          ; mask 0    24-h
     197.  00:4C91                          DB $03,$04,$08,$08,$65,$B0,$90,$40
     197.  00:4C91  03 04 08 08 65 B0 90 40 
     198.  00:4C99                          DB $22,$20,$10,$10,$08,$06,$01,$00
     198.  00:4C99  22 20 10 10 08 06 01 00 
     199.  00:4CA1                          DB $C0,$E0,$70,$30,$B6,$3B,$27,$06
     199.  00:4CA1  C0 E0 70 30 B6 3B 27 06 
     200.  00:4CA9                          DB $0C,$18,$3C,$1A,$06,$0C,$F0,$C0
     200.  00:4CA9  0C 18 3C 1A 06 0C F0 C0 
     201.  00:4CB1                          ; mask 1    28h
     202.  00:4CB1                          DB $00,$07,$0F,$0F,$6F,$DF,$EF,$7F
     202.  00:4CB1  00 07 0F 0F 6F DF EF 7F 
     203.  00:4CB9                          DB $3F,$3F,$1F,$1F,$0F,$05,$01,$00
     203.  00:4CB9  3F 3F 1F 1F 0F 05 01 00 
     204.  00:4CC1                          DB $00,$20,$90,$D0,$D6,$DD,$D9,$FA
     204.  00:4CC1  00 20 90 D0 D6 DD D9 FA 
     205.  00:4CC9                          DB $F4,$E8,$CC,$EE,$FA,$F4,$30,$00
     205.  00:4CC9  F4 E8 CC EE FA F4 30 00 
     206.  00:4CD1                      
     207.  00:4CD1                          ; Ghost 1 Right - 2Ch
     208.  00:4CD1                          ; mask 0
     209.  00:4CD1                          DB $03,$07,$0E,$6C,$DD,$CC,$64,$60
     209.  00:4CD1  03 07 0E 6C DD CC 64 60 
     210.  00:4CD9                          DB $30,$18,$7C,$98,$E0,$30,$1F,$07
     210.  00:4CD9  30 18 7C 98 E0 30 1F 07 
     211.  00:4CE1                          DB $C0,$20,$10,$16,$AD,$09,$0A,$02
     211.  00:4CE1  C0 20 10 16 AD 09 0A 02 
     212.  00:4CE9                          DB $44,$04,$08,$08,$10,$60,$C0,$00
     212.  00:4CE9  44 04 08 08 10 60 C0 00 
     213.  00:4CF1                          ; mask 1    - 30h
     214.  00:4CF1                          DB $00,$04,$09,$6B,$BB,$BB,$5B,$5F
     214.  00:4CF1  00 04 09 6B BB BB 5B 5F 
     215.  00:4CF9                          DB $2F,$17,$73,$F7,$DF,$2F,$18,$00
     215.  00:4CF9  2F 17 73 F7 DF 2F 18 00 
     216.  00:4D01                          DB $00,$E0,$F0,$F6,$FB,$FF,$F6,$FE
     216.  00:4D01  00 E0 F0 F6 FB FF F6 FE 
     217.  00:4D09                          DB $FC,$FC,$F8,$F8,$F0,$A0,$C0,$00
     217.  00:4D09  FC FC F8 F8 F0 A0 C0 00 
     218.  00:4D11                          
     219.  00:4D11                          ; Ghost 2 Right - 34h
     220.  00:4D11                          ; mask 0
     221.  00:4D11                          DB $03,$07,$0E,$0C,$6D,$DC,$E4,$60
     221.  00:4D11  03 07 0E 0C 6D DC E4 60 
     222.  00:4D19                          DB $30,$18,$3C,$58,$60,$30,$0F,$03
     222.  00:4D19  30 18 3C 58 60 30 0F 03 
     223.  00:4D21                          DB $C0,$20,$10,$10,$A6,$0D,$09,$02
     223.  00:4D21  C0 20 10 10 A6 0D 09 02 
     224.  00:4D29                          DB $44,$04,$08,$08,$10,$60,$80,$00
     224.  00:4D29  44 04 08 08 10 60 80 00 
     225.  00:4D31                          ; mask 1    38h
     226.  00:4D31                          DB $00,$04,$09,$0B,$6B,$BB,$9B,$5F
     226.  00:4D31  00 04 09 0B 6B BB 9B 5F 
     227.  00:4D39                          DB $2F,$17,$33,$77,$5F,$2F,$0C,$00
     227.  00:4D39  2F 17 33 77 5F 2F 0C 00 
     228.  00:4D41                          DB $00,$E0,$F0,$F0,$F6,$FB,$F7,$FE
     228.  00:4D41  00 E0 F0 F0 F6 FB F7 FE 
     229.  00:4D49                          DB $FC,$FC,$F8,$F8,$F0,$A0,$80,$00
     229.  00:4D49  FC FC F8 F8 F0 A0 80 00 
     230.  00:4D51                          
     231.  00:4D51                      
     232.  00:4D51                          ; Esqueleto Left - 1
     233.  00:4D51                          ; mask 0 - 3Ch
     234.  00:4D51                          DB $1F,$1B,$2E,$24,$3F,$1F,$1F,$00
     234.  00:4D51  1F 1B 2E 24 3F 1F 1F 00 
     235.  00:4D59                          DB $03,$05,$09,$04,$01,$02,$02,$04
     235.  00:4D59  03 05 09 04 01 02 02 04 
     236.  00:4D61                          DB $80,$C0,$C0,$C0,$80,$00,$00,$80
     236.  00:4D61  80 C0 C0 C0 80 00 00 80 
     237.  00:4D69                          DB $E0,$D0,$C8,$C4,$C0,$20,$20,$40
     237.  00:4D69  E0 D0 C8 C4 C0 20 20 40 
     238.  00:4D71                          ; mask 1 - 40h
     239.  00:4D71                          DB $1F,$1F,$3F,$3F,$3F,$1E,$0A,$00
     239.  00:4D71  1F 1F 3F 3F 3F 1E 0A 00 
     240.  00:4D79                          DB $03,$05,$09,$04,$01,$00,$00,$00
     240.  00:4D79  03 05 09 04 01 00 00 00 
     241.  00:4D81                          DB $00,$80,$80,$80,$00,$00,$00,$00
     241.  00:4D81  00 80 80 80 00 00 00 00 
     242.  00:4D89                          DB $80,$10,$88,$84,$80,$00,$00,$00
     242.  00:4D89  80 10 88 84 80 00 00 00 
     243.  00:4D91                      
     244.  00:4D91                          ; Esqueleto Left - 2
     245.  00:4D91                          ; mask 0 - 44h
     246.  00:4D91                          ; mask 0
     247.  00:4D91                          DB $0F,$0D,$17,$12,$1F,$0F,$0F,$00
     247.  00:4D91  0F 0D 17 12 1F 0F 0F 00 
     248.  00:4D99                          DB $03,$05,$09,$10,$01,$06,$08,$00
     248.  00:4D99  03 05 09 10 01 06 08 00 
     249.  00:4DA1                          DB $C0,$E0,$60,$60,$C0,$80,$80,$80
     249.  00:4DA1  C0 E0 60 60 C0 80 80 80 
     250.  00:4DA9                          DB $E0,$D0,$C8,$D0,$C0,$20,$20,$50
     250.  00:4DA9  E0 D0 C8 D0 C0 20 20 50 
     251.  00:4DB1                          ; mask 1 - 48h
     252.  00:4DB1                          DB $0F,$0F,$1F,$1F,$1F,$0F,$05,$00
     252.  00:4DB1  0F 0F 1F 1F 1F 0F 05 00 
     253.  00:4DB9                          DB $03,$05,$09,$10,$01,$00,$00,$00
     253.  00:4DB9  03 05 09 10 01 00 00 00 
     254.  00:4DC1                          DB $80,$C0,$C0,$C0,$80,$00,$00,$00
     254.  00:4DC1  80 C0 C0 C0 80 00 00 00 
     255.  00:4DC9                          DB $80,$10,$88,$90,$80,$00,$20,$40
     255.  00:4DC9  80 10 88 90 80 00 20 40 
     256.  00:4DD1                          
     257.  00:4DD1                          ; Esqueleto Right - 1
     258.  00:4DD1                          ; mask 0 - 4Ch
     259.  00:4DD1                          DB $01,$03,$03,$03,$01,$00,$00,$01
     259.  00:4DD1  01 03 03 03 01 00 00 01 
     260.  00:4DD9                          DB $07,$0B,$13,$23,$03,$04,$04,$02
     260.  00:4DD9  07 0B 13 23 03 04 04 02 
     261.  00:4DE1                          DB $F8,$D8,$74,$24,$FC,$F8,$F8,$00
     261.  00:4DE1  F8 D8 74 24 FC F8 F8 00 
     262.  00:4DE9                          DB $C0,$A0,$90,$20,$80,$40,$40,$20
     262.  00:4DE9  C0 A0 90 20 80 40 40 20 
     263.  00:4DF1                          ; mask 1 - 50h
     264.  00:4DF1                          DB $00,$01,$01,$01,$00,$00,$00,$00
     264.  00:4DF1  00 01 01 01 00 00 00 00 
     265.  00:4DF9                          DB $01,$08,$11,$21,$01,$00,$00,$00
     265.  00:4DF9  01 08 11 21 01 00 00 00 
     266.  00:4E01                          DB $F8,$F8,$FC,$FC,$FC,$78,$50,$00
     266.  00:4E01  F8 F8 FC FC FC 78 50 00 
     267.  00:4E09                          DB $C0,$A0,$90,$20,$80,$00,$00,$00
     267.  00:4E09  C0 A0 90 20 80 00 00 00 
     268.  00:4E11                          
     269.  00:4E11                          ; Esqueleto Right - 2
     270.  00:4E11                          ; mask 0 - 54h
     271.  00:4E11                          DB $03,$07,$06,$06,$03,$01,$01,$01
     271.  00:4E11  03 07 06 06 03 01 01 01 
     272.  00:4E19                          DB $07,$0B,$13,$0B,$03,$04,$04,$0A
     272.  00:4E19  07 0B 13 0B 03 04 04 0A 
     273.  00:4E21                          DB $F0,$B0,$E8,$48,$F8,$F0,$F0,$00
     273.  00:4E21  F0 B0 E8 48 F8 F0 F0 00 
     274.  00:4E29                          DB $C0,$A0,$90,$08,$80,$60,$10,$00
     274.  00:4E29  C0 A0 90 08 80 60 10 00 
     275.  00:4E31                          ; mask 1 - 58h
     276.  00:4E31                          DB $01,$03,$03,$03,$01,$00,$00,$00
     276.  00:4E31  01 03 03 03 01 00 00 00 
     277.  00:4E39                          DB $01,$08,$11,$09,$01,$00,$04,$02
     277.  00:4E39  01 08 11 09 01 00 04 02 
     278.  00:4E41                          DB $F0,$F0,$F8,$F8,$F8,$F0,$A0,$00
     278.  00:4E41  F0 F0 F8 F8 F8 F0 A0 00 
     279.  00:4E49                          DB $C0,$A0,$90,$08,$80,$00,$00,$00
     279.  00:4E49  C0 A0 90 08 80 00 00 00 
     280.  00:4E51                      
     281.  00:4E51                      SPRITE_COLOR_TABLE:       
     282.  00:4E51                           ;P1 - DOWN 1
     283.  00:4E51                          ;DOWN 1
     284.  00:4E51                          ; attr 0
     285.  00:4E51                          DB $05,$05,$0A,$0B,$0B,$0B,$0B,$0B
     285.  00:4E51  05 05 0A 0B 0B 0B 0B 0B 
     286.  00:4E59                          DB $04,$04,$04,$0A,$0A,$0A,$08,$08    
     286.  00:4E59  04 04 04 0A 0A 0A 08 08 
     287.  00:4E61                          ; attr 1
     288.  00:4E61                          DB $00,$00,$44,$45,$45,$45,$45,$45
     288.  00:4E61  00 00 44 45 45 45 45 45 
     289.  00:4E69                          DB $4A,$4A,$4A,$44,$44,$44,$45,$45    
     289.  00:4E69  4A 4A 4A 44 44 44 45 45 
     290.  00:4E71                          ; attr 2
     291.  00:4E71                          DB $00,$00,$41,$00,$40,$00,$00,$00
     291.  00:4E71  00 00 41 00 40 00 00 00 
     292.  00:4E79                          DB $41,$41,$41,$41,$41,$41,$42,$00
     292.  00:4E79  41 41 41 41 41 41 42 00 
     293.  00:4E81                               
     294.  00:4E81                          ; Cada posición ha de corresponder con la tabla de atributos    
     295.  00:4E81                          ; Disparo - antichrist    
     296.  00:4E81                          DB $00,$00,$00,$0A,$0A,$0A,$0A,$0A
     296.  00:4E81  00 00 00 0A 0A 0A 0A 0A 
     297.  00:4E89                          DB $0A,$0A,$0A,$0A,$0A,$0A,$00,$00
     297.  00:4E89  0A 0A 0A 0A 0A 0A 00 00 
     298.  00:4E91                          ; Fantasma
     299.  00:4E91                          ; attr 0
     300.  00:4E91                          DB $0F,$08,$08,$08,$08,$08,$08,$08
     300.  00:4E91  0F 08 08 08 08 08 08 08 
     301.  00:4E99                          DB $08,$08,$08,$08,$08,$08,$08,$0F
     301.  00:4E99  08 08 08 08 08 08 08 0F 
     302.  00:4EA1                          ; attr 1
     303.  00:4EA1                          DB $00,$47,$47,$47,$47,$47,$47,$47
     303.  00:4EA1  00 47 47 47 47 47 47 47 
     304.  00:4EA9                          DB $47,$47,$47,$47,$47,$47,$47,$00
     304.  00:4EA9  47 47 47 47 47 47 47 00 
     305.  00:4EB1                          
     306.  00:4EB1                          
     307.  00:4EB1                          ; Esqueleto Left 1
     308.  00:4EB1                          ; attr 0
     309.  00:4EB1                          DB $0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E
     309.  00:4EB1  0E 0E 0E 0E 0E 0E 0E 0E 
     310.  00:4EB9                          DB $0E,$0E,$0E,$0E,$0E,$0F,$0F,$0F
     310.  00:4EB9  0E 0E 0E 0E 0E 0F 0F 0F 
     311.  00:4EC1                          ; attr 1
     312.  00:4EC1                          DB $41,$49,$49,$49,$41,$41,$41,$00
     312.  00:4EC1  41 49 49 49 41 41 41 00 
     313.  00:4EC9                          DB $41,$41,$41,$41,$41,$00,$00,$00
     313.  00:4EC9  41 41 41 41 41 00 00 00 
     314.  00:4ED1                      
     315.  00:4ED1                      SPRITE_COLOR_P1_UP:
     316.  00:4ED1                          ;UP 1
     317.  00:4ED1                          ; attr 0
     318.  00:4ED1                          DB $05,$05,$0A,$05,$05,$05,$05,$05
     318.  00:4ED1  05 05 0A 05 05 05 05 05 
     319.  00:4ED9                          DB $0A,$05,$0B,$0A,$0A,$0A,$08,$08
     319.  00:4ED9  0A 05 0B 0A 0A 0A 08 08 
     320.  00:4EE1                          ; attr 1
     321.  00:4EE1                          DB $00,$00,$44,$00,$40,$00,$00,$00
     321.  00:4EE1  00 00 44 00 40 00 00 00 
     322.  00:4EE9                          DB $44,$4A,$45,$45,$45,$45,$45,$45    
     322.  00:4EE9  44 4A 45 45 45 45 45 45 
     323.  00:4EF1                          ; attr 2
     324.  00:4EF1                          DB $00,$00,$41,$00,$00,$00,$00,$00
     324.  00:4EF1  00 00 41 00 00 00 00 00 
     325.  00:4EF9                          DB $41,$41,$00,$00,$00,$00,$42,$00
     325.  00:4EF9  41 41 00 00 00 00 42 00 
     326.  00:4F01                          
     327.  00:4F01                          ;SPRITE_COLOR_P1_UP2:
     328.  00:4F01                          ;UP 1
     329.  00:4F01                          ; attr 0
     330.  00:4F01                          DB $05,$05,$0A,$05,$05,$05,$05,$05
     330.  00:4F01  05 05 0A 05 05 05 05 05 
     331.  00:4F09                          DB $0A,$05,$0B,$0A,$0A,$0A,$08,$08
     331.  00:4F09  0A 05 0B 0A 0A 0A 08 08 
     332.  00:4F11                          ; attr 1
     333.  00:4F11                          DB $00,$00,$44,$00,$40,$00,$00,$00
     333.  00:4F11  00 00 44 00 40 00 00 00 
     334.  00:4F19                          DB $44,$4A,$45,$45,$45,$45,$45,$45
     334.  00:4F19  44 4A 45 45 45 45 45 45 
     335.  00:4F21                          ; attr 2
     336.  00:4F21                          DB $00,$00,$41,$00,$00,$00,$00,$00
     336.  00:4F21  00 00 41 00 00 00 00 00 
     337.  00:4F29                          DB $41,$41,$00,$00,$00,$00,$42,$00
     337.  00:4F29  41 41 00 00 00 00 42 00 
     338.  00:4F31                      
     339.  00:4F31                      
     340.  00:4F31                      SPRITE_COLOR_P1_DOWN:
     341.  00:4F31                          ;DOWN 1
     342.  00:4F31                          ; attr 0
     343.  00:4F31                          DB $05,$05,$0A,$0B,$0B,$0B,$0B,$0B
     343.  00:4F31  05 05 0A 0B 0B 0B 0B 0B 
     344.  00:4F39                          DB $04,$04,$04,$0A,$0A,$0A,$08,$08    
     344.  00:4F39  04 04 04 0A 0A 0A 08 08 
     345.  00:4F41                          ; attr 1
     346.  00:4F41                          DB $00,$00,$44,$45,$45,$45,$45,$45
     346.  00:4F41  00 00 44 45 45 45 45 45 
     347.  00:4F49                          DB $4A,$4A,$4A,$44,$44,$44,$45,$45    
     347.  00:4F49  4A 4A 4A 44 44 44 45 45 
     348.  00:4F51                          ; attr 2
     349.  00:4F51                          DB $00,$00,$41,$00,$40,$00,$00,$00
     349.  00:4F51  00 00 41 00 40 00 00 00 
     350.  00:4F59                          DB $41,$41,$41,$41,$41,$41,$42,$00
     350.  00:4F59  41 41 41 41 41 41 42 00 
     351.  00:4F61                          ;SPRITE_COLOR_P1_DOWN2:
     352.  00:4F61                          ;DOWN 1
     353.  00:4F61                          ; attr 0
     354.  00:4F61                          DB $05,$05,$0A,$0B,$0B,$0B,$0B,$0B
     354.  00:4F61  05 05 0A 0B 0B 0B 0B 0B 
     355.  00:4F69                          DB $04,$04,$04,$0A,$0A,$0A,$08,$08    
     355.  00:4F69  04 04 04 0A 0A 0A 08 08 
     356.  00:4F71                          ; attr 1
     357.  00:4F71                          DB $00,$00,$44,$45,$45,$45,$45,$45
     357.  00:4F71  00 00 44 45 45 45 45 45 
     358.  00:4F79                          DB $4A,$4A,$4A,$44,$44,$44,$45,$45    
     358.  00:4F79  4A 4A 4A 44 44 44 45 45 
     359.  00:4F81                          ; attr 2
     360.  00:4F81                          DB $00,$00,$41,$00,$40,$00,$00,$00
     360.  00:4F81  00 00 41 00 40 00 00 00 
     361.  00:4F89                          DB $41,$41,$41,$41,$41,$41,$42,$00
     361.  00:4F89  41 41 41 41 41 41 42 00 
     362.  00:4F91                      
     363.  00:4F91                      SPRITE_COLOR_P1_RIGHT:
     364.  00:4F91                          ; attr 0
     365.  00:4F91                          DB $05,$05,$0A,$0B,$0B,$0B,$0B,$0B
     365.  00:4F91  05 05 0A 0B 0B 0B 0B 0B 
     366.  00:4F99                          DB $0B,$0A,$0A,$0B,$0A,$0A,$08,$08    
     366.  00:4F99  0B 0A 0A 0B 0A 0A 08 08 
     367.  00:4FA1                          ; attr 1
     368.  00:4FA1                          DB $00,$00,$44,$45,$45,$45,$45,$45
     368.  00:4FA1  00 00 44 45 45 45 45 45 
     369.  00:4FA9                          DB $45,$44,$44,$44,$44,$44,$45,$45    
     369.  00:4FA9  45 44 44 44 44 44 45 45 
     370.  00:4FB1                          ; attr 2
     371.  00:4FB1                          DB $00,$00,$41,$00,$40,$00,$00,$00
     371.  00:4FB1  00 00 41 00 40 00 00 00 
     372.  00:4FB9                          DB $00,$41,$41,$41,$41,$41,$42,$00
     372.  00:4FB9  00 41 41 41 41 41 42 00 
     373.  00:4FC1                             
     374.  00:4FC1                          ; attr 0
     375.  00:4FC1                          DB $05,$05,$0A,$0B,$0B,$0B,$0B,$0B
     375.  00:4FC1  05 05 0A 0B 0B 0B 0B 0B 
     376.  00:4FC9                          DB $0B,$0A,$0A,$0A,$0B,$0A,$08,$08    
     376.  00:4FC9  0B 0A 0A 0A 0B 0A 08 08 
     377.  00:4FD1                          ; attr 1
     378.  00:4FD1                          DB $00,$00,$44,$45,$45,$45,$45,$45
     378.  00:4FD1  00 00 44 45 45 45 45 45 
     379.  00:4FD9                          DB $45,$44,$44,$44,$44,$44,$45,$45
     379.  00:4FD9  45 44 44 44 44 44 45 45 
     380.  00:4FE1                          ; attr 2
     381.  00:4FE1                          DB $00,$00,$41,$00,$40,$00,$00,$00
     381.  00:4FE1  00 00 41 00 40 00 00 00 
     382.  00:4FE9                          DB $00,$41,$41,$41,$41,$41,$42,$00
     382.  00:4FE9  00 41 41 41 41 41 42 00 
     383.  00:4FF1                      
     384.  00:4FF1                      mapa1:
     385.  00:4FF1                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#00,#00,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     385.  00:4FF1  01 01 01 01 01 01 01 01 01 01 01 01 01 00 00 00 
     385.  00:5001  00 00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 
     386.  00:5011                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#00,#00,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     386.  00:5011  01 01 01 01 01 01 01 01 01 01 01 01 01 00 00 00 
     386.  00:5021  00 00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 
     387.  00:5031                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#01        
     387.  00:5031  01 01 01 01 01 01 01 01 01 01 01 01 01 00 00 00 
     387.  00:5041  00 00 00 01 00 00 00 00 00 00 00 00 00 00 01 01 
     388.  00:5051                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#01        
     388.  00:5051  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     388.  00:5061  00 00 00 01 00 00 00 00 00 00 00 00 00 00 01 01 
     389.  00:5071                            db #01,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#01        
     389.  00:5071  01 00 00 00 01 00 00 00 00 00 00 00 00 00 00 00 
     389.  00:5081  00 00 00 01 00 00 00 00 00 00 00 00 00 00 01 01 
     390.  00:5091                            db #01,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#01        
     390.  00:5091  01 00 00 00 01 00 00 00 00 00 00 00 00 00 00 00 
     390.  00:50A1  00 00 00 01 00 00 00 00 00 00 00 00 00 00 01 01 
     391.  00:50B1                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#01        
     391.  00:50B1  01 01 01 01 01 01 01 01 01 01 01 01 01 00 00 00 
     391.  00:50C1  00 00 00 01 00 00 00 00 00 00 00 00 00 00 01 01 
     392.  00:50D1                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#01        
     392.  00:50D1  01 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 
     392.  00:50E1  00 00 00 01 00 00 00 00 00 00 00 00 00 00 01 01 
     393.  00:50F1                          
     394.  00:50F1                            db #01,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#01        
     394.  00:50F1  01 01 00 00 00 00 00 00 00 00 00 00 01 00 00 00 
     394.  00:5101  00 00 00 01 00 00 00 00 00 00 00 00 00 00 01 01 
     395.  00:5111                            db #01,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#01        
     395.  00:5111  01 01 00 00 00 00 00 00 00 00 00 00 01 00 00 00 
     395.  00:5121  00 00 00 01 00 00 00 00 00 00 00 00 00 00 01 01 
     396.  00:5131                            db #01,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01        
     396.  00:5131  01 01 00 00 00 00 00 00 00 00 00 00 01 00 00 00 
     396.  00:5141  00 00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 
     397.  00:5151                            db #01,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00,#00,#01,#01        
     397.  00:5151  01 01 00 00 00 00 00 00 00 00 00 00 01 00 00 00 
     397.  00:5161  00 00 00 00 00 00 00 00 00 00 00 01 00 00 01 01 
     398.  00:5171                            db #01,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00,#00,#01,#01        
     398.  00:5171  01 01 00 00 00 00 00 00 00 00 00 00 01 00 00 00 
     398.  00:5181  00 00 00 00 00 00 00 00 00 00 00 01 00 00 01 01 
     399.  00:5191                            db #01,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00,#00,#01,#01        
     399.  00:5191  01 01 00 00 00 00 00 00 00 00 00 00 01 00 00 00 
     399.  00:51A1  00 00 00 00 00 00 00 00 00 00 00 01 00 00 01 01 
     400.  00:51B1                            db #01,#01,#00,#00,#00,#00,#00,#01,#01,#01,#01,#01,#01,#00,#00,#00,#00,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01        
     400.  00:51B1  01 01 00 00 00 00 00 01 01 01 01 01 01 00 00 00 
     400.  00:51C1  00 00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 
     401.  00:51D1                            db #01,#01,#00,#00,#00,#00,#00,#01,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#01        
     401.  00:51D1  01 01 00 00 00 00 00 01 01 00 00 00 00 00 00 00 
     401.  00:51E1  00 00 00 01 00 00 00 00 00 00 00 00 00 00 01 01 
     402.  00:51F1                      
     403.  00:51F1                            db #01,#01,#00,#00,#00,#00,#01,#01,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#01        
     403.  00:51F1  01 01 00 00 00 00 01 01 01 00 00 00 00 00 00 00 
     403.  00:5201  00 00 00 01 00 00 00 00 00 00 00 00 00 00 01 01 
     404.  00:5211                            db #01,#01,#00,#00,#00,#00,#01,#01,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#01        
     404.  00:5211  01 01 00 00 00 00 01 01 01 00 00 00 00 00 00 00 
     404.  00:5221  00 00 00 01 00 00 00 00 00 00 00 00 00 00 01 01 
     405.  00:5231                            db #01,#01,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#01        
     405.  00:5231  01 01 00 00 01 01 01 01 01 01 01 01 01 00 00 00 
     405.  00:5241  00 00 00 01 00 00 00 00 00 00 00 00 00 00 01 01 
     406.  00:5251                            db #01,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#01        
     406.  00:5251  01 01 00 00 00 00 00 00 00 00 00 00 01 00 00 00 
     406.  00:5261  00 00 00 01 00 00 00 00 00 00 00 00 00 00 01 01 
     407.  00:5271                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#00,#00,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     407.  00:5271  01 01 01 01 01 01 01 01 01 01 01 01 01 00 00 00 
     407.  00:5281  00 00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 
     408.  00:5291                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#00,#00,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     408.  00:5291  01 01 01 01 01 01 01 01 01 01 01 01 01 00 00 00 
     408.  00:52A1  00 00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 
     409.  00:52B1                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     409.  00:52B1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     409.  00:52C1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     410.  00:52D1                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     410.  00:52D1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     410.  00:52E1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     411.  00:52F1                      
     412.  00:52F1                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     412.  00:52F1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     412.  00:5301  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     413.  00:5311                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     413.  00:5311  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     413.  00:5321  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     414.  00:5331                      
     415.  00:5331                      mapa2:
     416.  00:5331                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     416.  00:5331  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     416.  00:5341  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     417.  00:5351                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     417.  00:5351  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     417.  00:5361  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     418.  00:5371                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     418.  00:5371  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     418.  00:5381  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     419.  00:5391                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     419.  00:5391  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     419.  00:53A1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     420.  00:53B1                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     420.  00:53B1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     420.  00:53C1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     421.  00:53D1                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     421.  00:53D1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     421.  00:53E1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     422.  00:53F1                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     422.  00:53F1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     422.  00:5401  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     423.  00:5411                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     423.  00:5411  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     423.  00:5421  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     424.  00:5431                            
     425.  00:5431                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     425.  00:5431  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     425.  00:5441  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     426.  00:5451                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     426.  00:5451  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     426.  00:5461  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     427.  00:5471                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     427.  00:5471  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     427.  00:5481  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     428.  00:5491                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     428.  00:5491  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     428.  00:54A1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     429.  00:54B1                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     429.  00:54B1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 00 00 
     429.  00:54C1  00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     430.  00:54D1                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     430.  00:54D1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 00 00 
     430.  00:54E1  00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     431.  00:54F1                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     431.  00:54F1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 00 00 
     431.  00:5501  00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     432.  00:5511                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     432.  00:5511  01 01 01 01 01 01 01 01 01 01 01 01 01 01 00 00 
     432.  00:5521  00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     433.  00:5531                            
     434.  00:5531                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     434.  00:5531  01 01 01 01 01 01 01 01 01 01 01 01 01 01 00 00 
     434.  00:5541  00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     435.  00:5551                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     435.  00:5551  01 01 01 01 01 01 01 01 01 01 01 01 01 01 00 00 
     435.  00:5561  00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     436.  00:5571                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     436.  00:5571  01 01 01 01 01 01 01 01 01 01 01 01 01 01 00 00 
     436.  00:5581  00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     437.  00:5591                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     437.  00:5591  01 01 01 01 01 01 01 01 01 01 01 01 01 01 00 00 
     437.  00:55A1  00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     438.  00:55B1                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     438.  00:55B1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 00 00 
     438.  00:55C1  00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     439.  00:55D1                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     439.  00:55D1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 00 00 
     439.  00:55E1  00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     440.  00:55F1                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     440.  00:55F1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 00 00 
     440.  00:5601  00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     441.  00:5611                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     441.  00:5611  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     441.  00:5621  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     442.  00:5631                            
     443.  00:5631                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     443.  00:5631  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     443.  00:5641  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     444.  00:5651                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     444.  00:5651  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     444.  00:5661  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     445.  00:5671                      
     446.  00:5671                      
     447.  00:5671                      mapa0:      
     448.  00:5671                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     448.  00:5671  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     448.  00:5681  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     449.  00:5691                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     449.  00:5691  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     449.  00:56A1  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     450.  00:56B1                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     450.  00:56B1  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     450.  00:56C1  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     451.  00:56D1                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     451.  00:56D1  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     451.  00:56E1  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     452.  00:56F1                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     452.  00:56F1  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     452.  00:5701  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     453.  00:5711                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     453.  00:5711  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     453.  00:5721  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     454.  00:5731                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01       
     454.  00:5731  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     454.  00:5741  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     455.  00:5751                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     455.  00:5751  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     455.  00:5761  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     456.  00:5771                            
     457.  00:5771                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     457.  00:5771  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     457.  00:5781  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     458.  00:5791                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     458.  00:5791  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     458.  00:57A1  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     459.  00:57B1                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     459.  00:57B1  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     459.  00:57C1  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     460.  00:57D1                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     460.  00:57D1  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     460.  00:57E1  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     461.  00:57F1                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     461.  00:57F1  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     461.  00:5801  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     462.  00:5811                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     462.  00:5811  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     462.  00:5821  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     463.  00:5831                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     463.  00:5831  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     463.  00:5841  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     464.  00:5851                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     464.  00:5851  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     464.  00:5861  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     465.  00:5871                      
     466.  00:5871                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     466.  00:5871  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     466.  00:5881  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     467.  00:5891                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     467.  00:5891  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     467.  00:58A1  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     468.  00:58B1                            db #01,#00,#00,#00,#01,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     468.  00:58B1  01 00 00 00 01 01 00 00 00 00 00 00 00 00 00 00 
     468.  00:58C1  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     469.  00:58D1                            db #01,#00,#00,#00,#01,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     469.  00:58D1  01 00 00 00 01 01 00 00 00 00 00 00 00 00 00 00 
     469.  00:58E1  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     470.  00:58F1                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     470.  00:58F1  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     470.  00:5901  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     471.  00:5911                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     471.  00:5911  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     471.  00:5921  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     472.  00:5931                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     472.  00:5931  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     472.  00:5941  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     473.  00:5951                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01   
     473.  00:5951  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     473.  00:5961  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     474.  00:5971                            
     475.  00:5971                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     475.  00:5971  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     475.  00:5981  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     476.  00:5991                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     476.  00:5991  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     476.  00:59A1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     477.  00:59B1                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     477.  00:59B1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     477.  00:59C1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     478.  00:59D1                          
     479.  00:59D1                      
     480.  00:59D1                      SPRITE_COLOR_P1_LEFT:
     481.  00:59D1                          ; attr 0
     482.  00:59D1                          DB $05,$05,$0A,$0B,$0B,$0B,$0B,$0B
     482.  00:59D1  05 05 0A 0B 0B 0B 0B 0B 
     483.  00:59D9                          DB $0B,$0A,$0A,$0B,$0A,$0A,$08,$08
     483.  00:59D9  0B 0A 0A 0B 0A 0A 08 08 
     484.  00:59E1                          ; attr 1
     485.  00:59E1                          DB $00,$00,$44,$45,$45,$45,$45,$45
     485.  00:59E1  00 00 44 45 45 45 45 45 
     486.  00:59E9                          DB $45,$44,$44,$44,$44,$44,$45,$45
     486.  00:59E9  45 44 44 44 44 44 45 45 
     487.  00:59F1                          ; attr 2
     488.  00:59F1                          DB $00,$00,$41,$00,$40,$00,$00,$00
     488.  00:59F1  00 00 41 00 40 00 00 00 
     489.  00:59F9                          DB $00,$41,$41,$41,$41,$41,$42,$00
     489.  00:59F9  00 41 41 41 41 41 42 00 
     490.  00:5A01                          ;SPRITE_COLOR_P1_LEFT2:    
     491.  00:5A01                          ; attr 0
     492.  00:5A01                          DB $05,$05,$0A,$0B,$0B,$0B,$0B,$0B
     492.  00:5A01  05 05 0A 0B 0B 0B 0B 0B 
     493.  00:5A09                          DB $0B,$0A,$0A,$0A,$0B,$0A,$08,$08    
     493.  00:5A09  0B 0A 0A 0A 0B 0A 08 08 
     494.  00:5A11                          ; attr 1
     495.  00:5A11                          DB $00,$00,$44,$45,$45,$45,$45,$45
     495.  00:5A11  00 00 44 45 45 45 45 45 
     496.  00:5A19                          DB $45,$44,$44,$44,$44,$44,$45,$45    
     496.  00:5A19  45 44 44 44 44 44 45 45 
     497.  00:5A21                          ; attr 2
     498.  00:5A21                          DB $00,$00,$41,$00,$40,$00,$00,$00
     498.  00:5A21  00 00 41 00 40 00 00 00 
     499.  00:5A29                          DB $00,$41,$41,$41,$41,$41,$42,$00
     499.  00:5A29  00 41 41 41 41 41 42 00 
     500.  00:5A31                      
     501.  00:5A31                      
     502.  00:5A31                      BLANK_DATA:
     503.  00:5A31                          DB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
     503.  00:5A31  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     503.  00:5A41  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     504.  00:5A51                          DB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
     504.  00:5A51  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     504.  00:5A61  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     505.  00:5A71                          DB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
     505.  00:5A71  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     505.  00:5A81  00 00 00 00 
     506.  00:5A85                          
     507.  00:5A85                      PaletteData:
     508.  00:5A85                      			;  data 1 (red 0-7; blue 0-7); data 2 (0000; green 0-7)
     509.  00:5A85  00 00                   db 0x00, 0x00 ; Color index 0
     510.  00:5A87  30 00                   db 0x30, 0x00 ; Color index 1
     511.  00:5A89  70 06                   db 0x70, 0x06 ; Color index 2
     512.  00:5A8B  50 00                   db 0x50, 0x00 ; Color index 3
     513.  00:5A8D  11 01                   db 0x11, 0x01 ; Color index 4
     514.  00:5A8F  22 02                   db 0x22, 0x02 ; Color index 5
     515.  00:5A91  06 02                   db 0x06, 0x02 ; Color index 6
     516.  00:5A93  77 07                   db 0x77, 0x07 ; Color index 7
     517.  00:5A95  33 03                   db 0x33, 0x03 ; Color index 8
     518.  00:5A97  66 06                   db 0x66, 0x06 ; Color index 9
     519.  00:5A99  70 00                   db 0x70, 0x00 ; Color index 10
     520.  00:5A9B  64 05                   db 0x64, 0x05 ; Color index 11
     521.  00:5A9D  50 03                   db 0x50, 0x03 ; Color index 12
     522.  00:5A9F  02 04                   db 0x02, 0x04 ; Color index 13
     523.  00:5AA1  01 02                   db 0x01, 0x02 ; Color index 14
     524.  00:5AA3  00 00                   db 0x00, 0x00 ; Color index 15
     482   00:5AA5                      
     483   00:5AA5  (01)                 PAGE 1
     484   01:8000                      ; CODE O NO
     485   01:8000                      
     486   01:8000  (02)                 PAGE 2
     487   02:8000                      
     488   02:8000  (03)                 PAGE 3
     489   03:8000                      
     490   03:8000  (04)                 PAGE 4
     491   04:8000  (05)                 PAGE 5
     492   05:8000  (06)                 PAGE 6
     493   06:8000                      FONT:
     494   06:8000  (07F7)               INCBIN "gfx\FONT.SC5",#7
     495   06:87F7  (07)                 PAGE 7
     496   07:8000                      CEMENTER1
     497   07:8000  (4000)               INCBIN "gfx\CEMENTER1.SC5",#7,#4000			; Cada página tiene 16K = 4000h
     498   07:C000  (08)                 PAGE 8
     499   08:8000  (2A00)               INCBIN "gfx\CEMENTER1.SC5",#4007			; Cada página tiene 16K = 4000h 
     500   08:AA00  (09)                 PAGE 9
     501   09:8000                      GRAPHIC
     502   09:8000  (4000)               INCBIN "gfx\BTH.SR8",#7,#4000			; Cada página tiene 16K = 4000h
     503   09:C000  (0A)                 PAGE 10
     504   0A:8000  (4000)               INCBIN "gfx\BTH.SR8",#4007,#4000
     505   0A:C000                      
     506   0A:C000  (0B)                 PAGE 11
     507   0B:8000  (4000)               INCBIN "gfx\BTH.SR8",#8007,#4000
     508   0B:C000                      
     509   0B:C000  (0C)                 PAGE 12
     510   0C:8000  (1400)               INCBIN "gfx\BTH.SR8",#C007
     511   0C:9400                      
     512   0C:9400  (0D)                 PAGE 13
     513   0D:8000                      CEMENTER2
     514   0D:8000  (4000)               INCBIN "gfx\CEMENTER2.SC5",#7,#4000			; Cada página tiene 16K = 4000h
     515   0D:C000  (0E)                 PAGE 14
     516   0E:8000  (2A00)               INCBIN "gfx\CEMENTER2.SC5",#4007			; Cada página tiene 16K = 4000h 
     517   0E:AA00  (0F)                 PAGE 15
     518   0F:C000                      ;---------------------------------------------------------
     519   0F:C000                      ; Variables
     520   0F:C000                      ;---------------------------------------------------------
     521   0F:C000                      	
     522   0F:C000  (C000)              	MAP #C000  ;Ram page 3
     523   0F:C000                      ;	MAP #E5FF  ;Ram page 3
     524   0F:C000                      ;NAME #1  ;a byte is reserved for this variable
     525   0F:C000                      ;ETC
     526   0F:C000                      ;
     527   0F:C000                      	include "include\BTH_RAM.asm"
       1.  0F:C000  00 (1)              SHOWING_DIALOG  DS 1
       2.  0F:C001  (0F:0008)           FONT_HEIGHT EQU 8
       3.  0F:C001  (0F:0008)           FONT_WIDTH  EQU 8
       4.  0F:C001  00 (2)              CHR_ACR DS 2
       5.  0F:C003  00 (1)              PTR_STR_DX DS 1
       6.  0F:C004  00 (1)              PTR_STR_DY DS 1
       7.  0F:C005                      
       8.  0F:C005  00 (1)              LAST_KEY_PRESSED DS 1
       9.  0F:C006  00 (1)              OLD_KEY_PRESSED DS 1
      10.  0F:C007  00                  JIFFY_TEMP DB $00
      11.  0F:C008  00                  CHAR_SPEED_X DB $00
      12.  0F:C009  00                  CHAR_SPEED_Y DB $00
      13.  0F:C00A  00                  CHAR_SPEED_X_GHOST DB $00
      14.  0F:C00B  00                  CHAR_SPEED_X_GHOST_STG2 DB $00
      15.  0F:C00C  00 (1)              CHAR_GHOST_DEAD DS 1
      16.  0F:C00D  00 (1)              CHAR_GHOST_DEAD_STG2 DS 1
      17.  0F:C00E  00 (1)              CHAR_MIN_STEP_STG2 DS 1
      18.  0F:C00F  00                  CHAR_DIR_GHOST1 DB $00      ; $00 - LEFT, $FF - RIGHT
      19.  0F:C010  00                  CHAR_DIR_GHOST_STG2 DB $00      ; $00 - LEFT, $FF - RIGHT
      20.  0F:C011  00                  CHAR_DIR_MAIN DB $00        ; $00 - UP, $01 - DOWN, $02 - LEFT, $03 - RIGHT
      21.  0F:C012  00 (1)              CHAR_NEW_DIR_MAIN DS 1
      22.  0F:C013  00 (1)              CHAR_MAIN_SHOOT DS 1        ; $01 - SHOOT LEFT $02 - SHOOT RIGHT $03 - SHOOT UP $04 - SHOOT DOWN
      23.  0F:C014  00 (1)              CHAR_MIN_STEP DS 1          ; número de ciclos antes de cambiar de patrón
      24.  0F:C015  00 (1)              CHAR_DISTANCE_SHOOT DS 1
      25.  0F:C016  00 (1)              CHAR_SPEED_SHOOT DS 1
      26.  0F:C017                      SPRITE_ATTRS:
      27.  0F:C017  00 (128)                DS 128
      28.  0F:C097                      SLOTBIOS:
      29.  0F:C097  00 (1)                  DS 1
      30.  0F:C098                      SLOTGAME:
      31.  0F:C098  00 (1)                  DS 1
      32.  0F:C099                      SLOTRAM:
      33.  0F:C099  00 (1)                  DS 1
      34.  0F:C09A                      SPRITE_PTR_REPLACE:
      35.  0F:C09A  00 (2)                  DS 2
      36.  0F:C09C                      SPRITE_COLOR_REPLACE:
      37.  0F:C09C  00 (2)                  DS 2
      38.  0F:C09E                      SPRITE_COLOR_REPLACE2:
      39.  0F:C09E  00 (2)                  DS 2
      40.  0F:C0A0                      MAPA:
      41.  0F:C0A0  00 (2)                  DS 2
      42.  0F:C0A2                      BITMAP:
      43.  0F:C0A2  00 (2)                  DS 2
     528   0F:C0A4  (0000)              	ENDMAP

    LABELS
-------------------------------------------------
00:00004000 X PageSize
00:00006000 X _bank1
00:00007000   _bank2
00:0000009F X CHGET
00:000000A2 X CHPUT
00:0000005F   CHGMOD
00:0000005C   LDIRVM
00:0000013E X RDVDP
00:00000047   WRTVDP
00:0000F3DB   CLIKSW
00:00000141   SNSMAT
00:0000FC9E X JIFFY
00:00000041   DISSCR
00:00000044   ENASCR
00:00000072 X INIGRP
00:00000138   RSLREG
00:00000024   ENASLT
00:00005C28   FIRST_LINE_DLG_BOX
00:00006028   SEC_LINE_DLG_BOX
00:00006428   THIRD_LINE_DLG_BOX
00:00000001 X ROMMODE
00:00000007   KB_RIGHT
00:00000006   KB_DOWN
00:00000005   KB_UP
00:00000004   KB_LEFT
00:00000003   KB_DEL
00:00000000   KB_SPACE
00:00000001   MOV_SPEED
00:00000001   MOV_SPEED_GHOST
00:00000003   MOV_SPEED_SHOOT
00:00000030   MAX_DISTANCE_SHOOT
00:00000005   MAX_CHAR_STEPS
00:00000006   MAX_CHAR_STEPS_STG2
00:0000FFE8   REG9SAV
00:00000098   PORT_0
00:00000099   PORT_1
00:0000009A X PORT_2
00:0000009B X PORT_3
00:0000F3E0   RG15AV
00:0000F3E9   FORCLR
00:000000C8   TOMB3_STG1_X
00:0000000C   SPR_SHOOT_P1
00:00000018   SPR_SHOOT_P1_PTRN
00:00000010   SPR_GHOST_STG1
00:0000001C   SPR_GHOST_STG1_PTRN_L1
00:00000024   SPR_GHOST_STG1_PTRN_L2
00:0000002C   SPR_GHOST_STG1_PTRN_R1
00:00000034   SPR_GHOST_STG1_PTRN_R2
00:00000018   SPR_GHOST_STG2
00:0000003C   SPR_GHOST_STG2_PTRN_L1
00:00000044   SPR_GHOST_STG2_PTRN_L2
00:0000004C   SPR_GHOST_STG2_PTRN_R1
00:00000054   SPR_GHOST_STG2_PTRN_R2
00:00004010   sardu01_strings
00:00004016   string01
00:0000401D   string02
00:00004033   string03
00:0000403B X mensaje
00:00004040   check_spr_collision
00:0000404D   check_spr_collision.no_collision
00:00004050   get_bloque_en_X_Y
00:00004071   SetVdp_Write
00:0000408D   Set212Lines
00:00004099   ClearVram_MSX2
00:000040A3   ClearVram_MSX2.loop_2
00:000040A5   ClearVram_MSX2.loop_1
00:000040A7   ClearVram_MSX2.loop
00:000040B4 X opening_screen
00:000040D7   load_screen
00:000040F9   _vdpsetvramwr
00:0000410A X _vdpsetvramwr14
00:00004113   GETSLOT
00:0000412A   EXIT
00:0000412C   SETPAGES32K
00:00004131   NOPRET
00:0000413F   SET_SCREEN5_MODE
00:00004161   DUMP_SPR_ALL
00:00004186   DUMP_SPR_ATTS
00:000041A0 X DUMP_SPR_ATTS.DUMP_SPR_ATTS_END
00:000041A1   DUMP_SPR_P1
00:000041BE   SetPalette
00:000041CD   move_up
00:00004204   move_down
00:0000423C   move_right
00:0000428A   move_left
00:000042D8   CHECK_DIRECTION_MAIN
00:000042FA   CHECK_DIRECTION_MAIN.SET_DIR_DOWN
00:0000430F   CHECK_DIRECTION_MAIN.SET_DIR_UP
00:00004324   CHECK_DIRECTION_MAIN.SET_DIR_LEFT
00:00004339   CHECK_DIRECTION_MAIN.SET_DIR_RIGHT
00:0000434E   CHECK_DIRECTION_MAIN.FINISH
00:00004362   UPDATE_MOVEMENT
00:000043B0   UPDATE_MOVEMENT.SET_SPR_1P_2
00:000043C7   UPDATE_MOVEMENT.NO_CHAR_PATTERN_CHANGE
00:000043CD   NO_MOVEMENT
00:000043CE   MOVE_SHOOT
00:000043E6   MOVE_SHOOT.MOVE_SHOOT_RIGHT
00:000043EE   MOVE_SHOOT.MOVE_SHOOT_UP
00:000043F6   MOVE_SHOOT.MOVE_SHOOT_DOWN
00:000043FE   MOVE_SHOOT.MOVE_SHOOT_LEFT
00:00004403   MOVE_SHOOT.CHECK_SHOOT_DISTANCE
00:00004418   MOVE_SHOOT.ADD_SHOOT_Y
00:00004422   MOVE_SHOOT.ADD_DISTANCE
00:0000442D X MOVE_SHOOT.HIDE_SHOOT
00:00004439   print_strings_dialog_box
00:00004466   print_string
00:00004466   print_string.loop_str
00:00004481   print_string.first_line_font
00:0000449A   print_char
00:000044D1   CLEAR_DIALOG_BOX
00:00004507   START
00:0000452A   INIT_CHARS_VARS
00:000045A7   STAGE1
00:000045C4   MAIN_LOOP
00:000045EB   MAIN_LOOP.check_dialog_box
00:000045F3   MAIN_LOOP.animate_ghost
00:00004615   MAIN_LOOP.CHANGE_DIR_RIGHT
00:00004622   MAIN_LOOP.CHANGE_DIR_LEFT
00:0000462B   MAIN_LOOP.check_pattern
00:00004646   MAIN_LOOP.change_pattern_L
00:00004651   MAIN_LOOP.check_pattern_RIGHT
00:00004664   MAIN_LOOP.change_pattern_R
00:0000466C   MAIN_LOOP.continue
00:0000466F X MAIN_LOOP.CHECK_GHOST
00:0000468B X MAIN_LOOP.KILL_GHOST
00:00004698   MAIN_LOOP.check_KB
00:000046BA X no_arrows
00:000046C2   SHOOT_MAIN_CHAR
00:000046FC   SHOOT_MAIN_CHAR.SHOOT_RIGHT
00:0000470B   SHOOT_MAIN_CHAR.SHOOT_UP
00:0000471E   SHOOT_MAIN_CHAR.SHOOT_DOWN
00:0000472E   SHOOT_MAIN_CHAR.CONTINUE
00:00004732   STAGE2
00:0000478C   MAIN_LOOP2
00:000047B1   MAIN_LOOP2.GHOST_DEAD
00:000047BC   MAIN_LOOP2.no_screen_change
00:000047EE   MAIN_LOOP2.CHANGE_DIR_RIGHT
00:000047FB   MAIN_LOOP2.CHANGE_DIR_LEFT
00:00004804   MAIN_LOOP2.check_pattern
00:00004823   MAIN_LOOP2.change_pattern_L
00:0000482E   MAIN_LOOP2.check_pattern_RIGHT
00:00004841   MAIN_LOOP2.change_pattern_R
00:00004849   MAIN_LOOP2.continue
00:00004871   SPRITE_P1_UP
00:00004931   SPRITE_P1_DOWN
00:000049F1   SPRITE_P1_LEFT
00:00004AB1   SPRITE_P1_RIGHT
00:00004B71   SPRITE_PATTERN
00:00004E51   SPRITE_COLOR_TABLE
00:00004ED1   SPRITE_COLOR_P1_UP
00:00004F31   SPRITE_COLOR_P1_DOWN
00:00004F91   SPRITE_COLOR_P1_RIGHT
00:00004FF1   mapa1
00:00005331   mapa2
00:00005671 X mapa0
00:000059D1   SPRITE_COLOR_P1_LEFT
00:00005A31   BLANK_DATA
00:00005A85   PaletteData
06:00008000   FONT
07:00008000   CEMENTER1
09:00008000   GRAPHIC
0D:00008000   CEMENTER2
0F:0000C000   SHOWING_DIALOG
0F:00000008 X FONT_HEIGHT
0F:00000008 X FONT_WIDTH
0F:0000C001   CHR_ACR
0F:0000C003 X PTR_STR_DX
0F:0000C004 X PTR_STR_DY
0F:0000C005 X LAST_KEY_PRESSED
0F:0000C006   OLD_KEY_PRESSED
0F:0000C007   JIFFY_TEMP
0F:0000C008   CHAR_SPEED_X
0F:0000C009   CHAR_SPEED_Y
0F:0000C00A   CHAR_SPEED_X_GHOST
0F:0000C00B   CHAR_SPEED_X_GHOST_STG2
0F:0000C00C   CHAR_GHOST_DEAD
0F:0000C00D   CHAR_GHOST_DEAD_STG2
0F:0000C00E   CHAR_MIN_STEP_STG2
0F:0000C00F   CHAR_DIR_GHOST1
0F:0000C010   CHAR_DIR_GHOST_STG2
0F:0000C011   CHAR_DIR_MAIN
0F:0000C012   CHAR_NEW_DIR_MAIN
0F:0000C013   CHAR_MAIN_SHOOT
0F:0000C014   CHAR_MIN_STEP
0F:0000C015   CHAR_DISTANCE_SHOOT
0F:0000C016   CHAR_SPEED_SHOOT
0F:0000C017   SPRITE_ATTRS
0F:0000C097 X SLOTBIOS
0F:0000C098 X SLOTGAME
0F:0000C099 X SLOTRAM
0F:0000C09A   SPRITE_PTR_REPLACE
0F:0000C09C   SPRITE_COLOR_REPLACE
0F:0000C09E   SPRITE_COLOR_REPLACE2
0F:0000C0A0   MAPA
0F:0000C0A2   BITMAP


 Output: .\BTH.out
-------------------------------------------------

 Page: 00
  Org: 00004000  Size: *  Used: 00000000

    No output

 Output: BTH.rom
-------------------------------------------------

 Page: 00
  Org: 00004000  Size: 00004000  Used: 00001AAB

   Address   Length Align   Label
   00004000    6821         sardu01_strings
   00005AA5       6         
   00005AAB    9557       <empty>

 Page: 01
  Org: 00008000  Size: 00004000  Used: 00000000

   00008000   16384       <empty>

 Page: 02
  Org: 00008000  Size: 00004000  Used: 00000000

   00008000   16384       <empty>

 Page: 03
  Org: 00008000  Size: 00004000  Used: 00000000

   00008000   16384       <empty>

 Page: 04
  Org: 00008000  Size: 00004000  Used: 00000000

   00008000   16384       <empty>

 Page: 05
  Org: 00008000  Size: 00004000  Used: 00000000

   00008000   16384       <empty>

 Page: 06
  Org: 00008000  Size: 00004000  Used: 000007F7

   Address   Length Align   Label
   00008000    2039         FONT
   000087F7   14345       <empty>

 Page: 07
  Org: 00008000  Size: 00004000  Used: 00004000

   Address   Length Align   Label
   00008000   16384         CEMENTER1

 Page: 08
  Org: 00008000  Size: 00004000  Used: 00002A00

   Address   Length Align   Label
   00008000   10752         
   0000AA00    5632       <empty>

 Page: 09
  Org: 00008000  Size: 00004000  Used: 00004000

   Address   Length Align   Label
   00008000   16384         GRAPHIC

 Page: 0A
  Org: 00008000  Size: 00004000  Used: 00004000

   Address   Length Align   Label
   00008000   16384         

 Page: 0B
  Org: 00008000  Size: 00004000  Used: 00004000

   Address   Length Align   Label
   00008000   16384         

 Page: 0C
  Org: 00008000  Size: 00004000  Used: 00001400

   Address   Length Align   Label
   00008000    5120         
   00009400   11264       <empty>

 Page: 0D
  Org: 00008000  Size: 00004000  Used: 00004000

   Address   Length Align   Label
   00008000   16384         CEMENTER2

 Page: 0E
  Org: 00008000  Size: 00004000  Used: 00002A00

   Address   Length Align   Label
   00008000   10752         
   0000AA00    5632       <empty>

 Page: 0F
  Org: 0000C000  Size: 00004000  Used: 000000A4

   Address   Length Align   Label
   0000C000     164         SHOWING_DIALOG
   0000C0A4   16220       <empty>
