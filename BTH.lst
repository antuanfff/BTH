Sjasm Z80 Assembler v0.42c - www.xl2s.tk             [2024.03.05 - 20:32:55]

.\bth.asm
Errors: 0

       1   00:0000                      	output "BTH.rom" 
       2   00:558F                      
       3   00:558F                      ;ROM ASCII16
       4   00:558F                      		defpage	0,0x4000, 0x4000
       5   00:558F                      		defpage	1,0x8000, 0x4000        
       6   00:558F                      		defpage	2..14 ;Here it is determined rom size        
       7   00:558F                              defpage	15,0xC000, 0x4000
       8   00:558F                      
       9   00:558F  (00:6000)           _bank1	equ	6000h
      10   00:558F  (00:7000)           _bank2	equ	7000h
      11   00:558F  32 00 70 32 FF 77   		DB 32h,0,70h,32h,0FFh,77h		; Para evitar seleccionar el tipo de ROM ASCII16 en OpenMSX
      12   00:5595  (00)                		page 0			
      13   00:4000                              org 4000h		
      14   00:4000                              dw  4241h,START,0,0,0,0,0,0
      14   00:4000  41 42 FF 41 00 00 00 00 00 00 00 00 00 00 00 00 
      15   00:4010                      
      16   00:4010                      ;Llamadas a rutinas bios
      17   00:4010                          include "include\System_BIOSCalls.asm"
       1.  00:4010  (00:009F)           CHGET                   equ #009F    ; Se queda esperando que se pulse una tecla
       2.  00:4010  (00:00A2)           CHPUT                   equ #00A2    ; escribe el caracter ascii almacenado en a                         
       3.  00:4010  (00:005F)           CHGMOD                  equ #005F   ; Cambia el modo de screen pero previamente necesita que se le asigne el modo en el registro a
       4.  00:4010  (00:005C)           LDIRVM                  equ #005C   ;Tansfiere bloques de la RAM a la VRAM, es la más importante, necesita previamente asignar valor al registro bc con la longitud, dc con la dirección de inicio de la VRAM y hl con la dirección de inicio de la RAM:
       5.  00:4010  (00:013E)           RDVDP                   equ #013E    ; Lee el registro de estado del VDP
       6.  00:4010  (00:0047)           WRTVDP                  equ #0047   ; Escribe en los registros del VDP 
       7.  00:4010  (00:F3DB)           CLIKSW                  equ $F3DB ; Keyboard click sound
       8.  00:4010  (00:0141)           SNSMAT					equ #0141
       9.  00:4010  (00:FC9E)           JIFFY 					equ #FC9E
      10.  00:4010  (00:0041)           DISSCR                  equ #0041   ; Disable screen
      11.  00:4010  (00:0044)           ENASCR                  equ #0044   ; Enable screen
      12.  00:4010  (00:0072)           INIGRP                  equ #0072   ; Enable Screen 2
      13.  00:4010  (00:0138)           RSLREG                  equ #0138   ; Leemos el contenido del registro de seleccion de slots
      14.  00:4010  (00:0024)           ENASLT                  equ #0024   ; Switches indicated slot at indicated page on perpetually Input    : A - Slot ID, see RDSLT            H - Bit 6 and 7 must contain the page number (00-11)
      18   00:4010                      
      19   00:4010                      ;Constantes
      20   00:4010                          include "include\BTH_const.asm"
       1.  00:4010  (00:0001)           ROMMODE                 equ 1 ; 0 Dos Mode 1 Rom Mode
       2.  00:4010  (00:0007)           KB_RIGHT 				equ 7
       3.  00:4010  (00:0006)           KB_DOWN 				equ 6
       4.  00:4010  (00:0005)           KB_UP 					equ	5        
       5.  00:4010  (00:0004)           KB_LEFT 				equ	4
       6.  00:4010  (00:0003)           KB_DEL 					equ	3
       7.  00:4010  (00:0000)           KB_SPACE				equ	0
       8.  00:4010                      
       9.  00:4010  (00:0001)           MOV_SPEED				equ 1
      10.  00:4010  (00:0001)           MOV_SPEED_GHOST			equ 1
      11.  00:4010  (00:0003)           MOV_SPEED_SHOOT         equ 3
      12.  00:4010  (00:0030)           MAX_DISTANCE_SHOOT      equ 48
      13.  00:4010  (00:0004)           MAX_CHAR_STEPS          equ 4       ; #steps pattern change MAIN CHAR
      14.  00:4010  (00:FFE8)           REG9SAV                 equ #FFE8
      15.  00:4010  (00:0098)           PORT_0                  equ 0x98
      16.  00:4010  (00:0099)           PORT_1                  equ 0x99
      17.  00:4010  (00:009A)           PORT_2                  equ 0x9a
      18.  00:4010  (00:009B)           PORT_3                  equ 0x9b
      19.  00:4010                      
      20.  00:4010  (00:F3E0)           RG15AV equ #F3E0 ; alamcena el valor del registro 1 de escritura del VDP, hay unas rutinas de la bios que guardan es entas direcciones valores globals del sistema
      21.  00:4010  (00:F3E9)           FORCLR equ $F3E9 ; Foreground colour
      22.  00:4010                      
      21   00:4010                      
      22   00:4010                      ; Funciones auxiliares
      23   00:4010                      	include "include\BTH_func.asm"
       1.  00:4010                      ; Dadas las coordenadas X,Y en pixels de dos sprites, devuelve 1 si hay colision
       2.  00:4010                      ;Entrada:
       3.  00:4010                      ;   b - Y SPR1
       4.  00:4010                      ;   C - X SPR1
       5.  00:4010                      
       6.  00:4010                      ;   d - Y SPR2
       7.  00:4010                      ;   e - X SPR2
       8.  00:4010                      ;Salida:
       9.  00:4010                      ;   a - bloque
      10.  00:4010                      ;Modifica:
      11.  00:4010                      ;   a, hl, de
      12.  00:4010                      check_spr_collision:        
      13.  00:4010  78                          LD A,B          ; a = Y SPR1
      14.  00:4011  BA                          CP D
      15.  00:4012  C2 1D 40                    JP NZ,.no_collision
      16.  00:4015                      
      17.  00:4015  79                          LD A,C          ; a = X SPR1
      18.  00:4016  BB                          CP E
      19.  00:4017  C2 1D 40                    JP NZ,.no_collision
      20.  00:401A                      
      21.  00:401A  3E 01                       LD A,1
      22.  00:401C  C9                          RET
      23.  00:401D                      .no_collision
      24.  00:401D  3E 00                   LD A,0
      25.  00:401F  C9                      RET
      26.  00:4020                      
      27.  00:4020                      ; Dadas las coordenadas X,Y en pixels, devuelve el bloque de 8x8 al que corresponde esas coordenadas
      28.  00:4020                      ; La tabla de colisiones es la tabla de nombres con 32x24 = 756 bytes
      29.  00:4020                      ;Entrada:
      30.  00:4020                      ;   d - X
      31.  00:4020                      ;   e - y
      32.  00:4020                      ;Salida:
      33.  00:4020                      ;   a - bloque
      34.  00:4020                      ;Modifica:
      35.  00:4020                      ;   a, hl, de
      36.  00:4020                      get_bloque_en_X_Y:
      37.  00:4020                              ;(y/8)*32+(x/8)
      38.  00:4020  7B                          ld a,e      ;a=y
      39.  00:4021  CB 3F CB 3F CB 3F   [3]     srl a       ;a=y/8
      40.  00:4027  26 00                       ld h,0
      41.  00:4029  6F                          ld l,a      ;hl=y/8
      42.  00:402A  29 29 29 29 29      [5]     add hl,hl   ;x32    ;a=(y/8)*32
      43.  00:402F                      
      44.  00:402F  7A                          ld a,d      ;a=x
      45.  00:4030  CB 3F CB 3F CB 3F   [3]     srl a       ;a=x/8
      46.  00:4036  16 00                       ld d,0
      47.  00:4038  5F                          ld e,a      ;de=x/8
      48.  00:4039  19                          add hl,de   ;hl=(y/8)*32+(x/8)
      49.  00:403A                      
      50.  00:403A  11 2F 4C                    ld de,mapa
      51.  00:403D  19                          add hl,de   ;hl=mapa + hl=(y/8)*32+(x/8)
      52.  00:403E                      
      53.  00:403E  7E                          ld a,[hl]
      54.  00:403F  C9                          ret
      55.  00:4040                      
      56.  00:4040                      ; SCREEN 8
      57.  00:4040                      SetVdp_Write:
      58.  00:4040                      
      59.  00:4040                      	; transform address from 
      60.  00:4040                      	;
      61.  00:4040                      	; |           Register A            |           Register H            |           Register L            |
      62.  00:4040                      	; | --- --- --- --- --- --- --- A16 | A15 A14 A13 A12 A11 A10  A9  A8 |  A7  A6  A5  A4  A3  A2  A1  A0 |
      63.  00:4040                      	;
      64.  00:4040                      	; to
      65.  00:4040                      	;
      66.  00:4040                      	; |           Register A            |           Register H            |           Register L            |
      67.  00:4040                      	; | --- --- --- --- --- A16 A15 A14 | --- --- A13 A12 A11 A10  A9  A8 |  A7  A6  A5  A4  A3  A2  A1  A0 |
      68.  00:4040  CB 04                   rlc     h
      69.  00:4042  17                      rla
      70.  00:4043  CB 04                   rlc     h
      71.  00:4045  17                      rla
      72.  00:4046  CB 3C                   srl     h
      73.  00:4048  CB 3C                   srl     h
      74.  00:404A                      
      75.  00:404A  F3                      di
      76.  00:404B                      	    ; write bits a14-16 of address to R#14
      77.  00:404B  D3 99               	    out     (PORT_1), a
      78.  00:404D  3E 8E               	    ld      a, 14 + 128
      79.  00:404F  D3 99               	    out     (PORT_1), a
      80.  00:4051                      
      81.  00:4051                      	    ; write the other address bits to VDP PORT_1
      82.  00:4051  7D                  	    ld      a, l
      83.  00:4052  00                  	    nop
      84.  00:4053  D3 99               	    out     (PORT_1), a
      85.  00:4055  7C                  	    ld      a, h
      86.  00:4056  F6 40               	    or      64
      87.  00:4058  FB                      ei
      88.  00:4059  D3 99                   out     (PORT_1),a
      89.  00:405B  C9                      ret
      90.  00:405C                      
      91.  00:405C                      Set212Lines:
      92.  00:405C                              ; set LN (bit 7) of R#9 to 1
      93.  00:405C  3A E8 FF                    ld      a, (REG9SAV)
      94.  00:405F  F6 80                       or      10000000b
      95.  00:4061  47                          ld      b, a
      96.  00:4062  0E 09                       ld      c, 9            ; register #
      97.  00:4064  CD 47 00                    call    WRTVDP
      98.  00:4067  C9                          ret
      99.  00:4068                      
     100.  00:4068                      ClearVram_MSX2:
     101.  00:4068  AF                          xor     a           ; set vram write base address
     102.  00:4069  21 00 00                    ld      hl, 0     	; to 1st byte of page 0
     103.  00:406C  CD 40 40                    call    SetVdp_Write
     104.  00:406F  AF                          xor		a
     105.  00:4070                      
     106.  00:4070                          ; TODO: 
     107.  00:4070                          ;   use VDP command (currently is taking almost 1 second)
     108.  00:4070                          ;   disable screen/sprites (should I ??)
     109.  00:4070                      
     110.  00:4070                          ; clear all 128kb of VRAM
     111.  00:4070  16 02               	ld		d, 2		; 2 repetitions
     112.  00:4072                      .loop_2:
     113.  00:4072  0E 00               	ld		c, 0		; 256 repetitions
     114.  00:4074                      .loop_1:
     115.  00:4074  06 00               	ld		b, 0		; 256 repetitions
     116.  00:4076                      .loop:
     117.  00:4076  D3 98               	out		(PORT_0), a
     118.  00:4078  10 FC               	djnz	.loop
     119.  00:407A  0D                  	dec		c
     120.  00:407B  C2 74 40            	jp		nz, .loop_1
     121.  00:407E  15                  	dec		d
     122.  00:407F  C2 72 40            	jp		nz, .loop_2
     123.  00:4082                      
     124.  00:4082  C9                  	ret
     125.  00:4083                      
     126.  00:4083                      ; MEGAROM
     127.  00:4083                      
     128.  00:4083                      opening_screen		
     129.  00:4083  0E 00               		ld		c,0
     130.  00:4085  11 00 00            		ld		de,0
     131.  00:4088  CD EB 40            		call	_vdpsetvramwr
     132.  00:408B  1E 04               		ld	e,4
     133.  00:408D  3E 09               		ld	a, :GRAPHIC
     134.  00:408F  57                  		ld	d,a
     135.  00:4090  32 00 70            2:		ld	(_bank2),a
     136.  00:4093  21 00 80            		ld	hl,GRAPHIC
     137.  00:4096  01 98 00            		ld	bc,0x98
     138.  00:4099  3E 40               		ld	a,32*2
     139.  00:409B  ED B3               1:		otir
     140.  00:409D  3D                  		dec	a
     141.  00:409E  20 FB               		jr	nz,1b
     142.  00:40A0  14                  		inc	d
     143.  00:40A1  7A                  		ld	a,d
     144.  00:40A2  1D                  		dec	e
     145.  00:40A3  20 EB               		jr	nz,2b
     146.  00:40A5  C9                  		ret 
     147.  00:40A6                      
     148.  00:40A6                      load_screen
     149.  00:40A6  0E 00               		ld		c,0
     150.  00:40A8  11 00 00            		ld		de,0
     151.  00:40AB  CD EB 40            		call	_vdpsetvramwr
     152.  00:40AE  1E 02               		ld	e,2					; #pages
     153.  00:40B0  3E 0F               		ld	a, :BITMAP
     154.  00:40B2  57                  		ld	d,a
     155.  00:40B3  32 00 70            2:		ld	(_bank2),a
     156.  00:40B6  21 95 C0            		ld	hl,BITMAP
     157.  00:40B9  01 98 00            		ld	bc,0x98
     158.  00:40BC  3E 40               		ld	a,64
     159.  00:40BE  ED B3               1:		otir
     160.  00:40C0  3D                  		dec	a
     161.  00:40C1  20 FB               		jr	nz,1b
     162.  00:40C3  14                  		inc	d
     163.  00:40C4  7A                  		ld	a,d
     164.  00:40C5  1D                  		dec	e
     165.  00:40C6  20 EB               		jr	nz,2b
     166.  00:40C8  C9                  		ret 
     167.  00:40C9                      
     168.  00:40C9                      load_screen2
     169.  00:40C9  0E 00               		ld		c,0
     170.  00:40CB  11 00 00            		ld		de,0
     171.  00:40CE  CD EB 40            		call	_vdpsetvramwr
     172.  00:40D1  1E 02               		ld	e,2					; #pages
     173.  00:40D3  78                  		ld	a, b			; 1st page bitmap
     174.  00:40D4  57                  		ld	d,a
     175.  00:40D5  32 00 70            2:		ld	(_bank2),a
     176.  00:40D8  2A 95 C0            		ld	hl,(BITMAP)		; Bitmap address
     177.  00:40DB  01 98 00            		ld	bc,0x98
     178.  00:40DE  3E 40               		ld	a,64
     179.  00:40E0  ED B3               1:		otir
     180.  00:40E2  3D                  		dec	a
     181.  00:40E3  20 FB               		jr	nz,1b
     182.  00:40E5  14                  		inc	d
     183.  00:40E6  7A                  		ld	a,d
     184.  00:40E7  1D                  		dec	e
     185.  00:40E8  20 EB               		jr	nz,2b
     186.  00:40EA  C9                  		ret 
     187.  00:40EB                      
     188.  00:40EB                      ;Set VDP for writing at address CDE (17-bit) 
     189.  00:40EB                      
     190.  00:40EB                      _vdpsetvramwr:
     191.  00:40EB  79                  	ld a,c
     192.  00:40EC  CB 02               	rlc d
     193.  00:40EE  17                  	rla
     194.  00:40EF  CB 02               	rlc d
     195.  00:40F1  17                  	rla
     196.  00:40F2  CB 3A               	srl d ; primo shift, il secondo dopo la out
     197.  00:40F4                      
     198.  00:40F4  D3 99               	out (0x99),a ;set bits 14-16
     199.  00:40F6  3E 8E               	ld a,14+128
     200.  00:40F8  D3 99               	out (0x99),a
     201.  00:40FA  CB 3A               	srl d ; secondo shift.     
     202.  00:40FC                      _vdpsetvramwr14
     203.  00:40FC  7B                  	ld a,e ;set bits 0-7
     204.  00:40FD  D3 99               	out (0x99),a
     205.  00:40FF  7A                  	ld a,d ;set bits 8-13
     206.  00:4100  F6 40               	or 0x40 ; + write access
     207.  00:4102  D3 99               	out (0x99),a
     208.  00:4104  C9                  	ret
     209.  00:4105                      
     210.  00:4105                      
     211.  00:4105                      
     212.  00:4105                      		; --- RUTINAS PARA COLOCAR LAS PAGINAS DEL CARTUCHO ---
     213.  00:4105                      		; -----------------------------------------------------
     214.  00:4105                      		; --- SIEMPRE DEBEN IR EN LA PAGINA 1 DEL CARTUCHO! ---
     215.  00:4105                      		; -----------------------------------------------------
     216.  00:4105                      
     217.  00:4105                      		; --- RUTINAS PRINCIPALES DEL MODULO ---
     218.  00:4105                      		; GETSLOT:	OBTIENE EL VALOR DEL SLOT QUE LE INDIQUEMOS
     219.  00:4105                      		; SETPAGES32K:	BIOS-ROM-YY-ZZ	 -> BIOS-ROM-ROM-ZZ (SITUA PAGINA 2)
     220.  00:4105                      
     221.  00:4105                      		; --- VARIABLES EN RAM NECESARIAS ---
     222.  00:4105                      		; NINGUNA
     223.  00:4105                      
     224.  00:4105                      GETSLOT:	; --- Rutina que construye el valor del SLOT para llamar a ENASLT ---
     225.  00:4105                      		; --- Entrada: a = SLOT                                           ---
     226.  00:4105                      		; --- Salida: a = valor para ENASLT                               ---
     227.  00:4105                      		; --- AUTOR: Konamiman                                            ---
     228.  00:4105  E6 03               		and	$03				; Proteccion, nos aseguramos de que el valor esta en 0-3
     229.  00:4107  4F                  		ld	c,a				; c = slot de la pagina
     230.  00:4108  06 00               		ld	b,0				; bc = slot de la pagina
     231.  00:410A  21 C1 FC            		ld	hl,$FCC1			; Tabla de slots expandidos
     232.  00:410D  09                  		add	hl,bc				; hl -> variable que indica si este slot esta expandido
     233.  00:410E  7E                  		ld	a,(hl)				; Tomamos el valor
     234.  00:410F  E6 80               		and	$80				; Si el bit mas alto es cero...
     235.  00:4111  28 09               		jr	z,EXIT			; ...nos vamos a @@EXIT
     236.  00:4113                      		; --- El slot esta expandido ---
     237.  00:4113  B1                  		or	c				; Slot basico en el lugar adecuado
     238.  00:4114  4F                  		ld	c,a				; Guardamos el valor en c
     239.  00:4115  23                  		inc	hl				; Incrementamos hl una...
     240.  00:4116  23                  		inc	hl				; ...dos...
     241.  00:4117  23                  		inc	hl				; ...tres...
     242.  00:4118  23                  		inc	hl				; ...cuatro veces
     243.  00:4119  7E                  		ld	a,(hl)				; a = valor del registro de subslot del slot donde estamos
     244.  00:411A  E6 0C               		and	$0C				; Nos quedamos con el valor donde esta nuestro cartucho
     245.  00:411C  B1                  EXIT:		or	c				; Slot extendido/basico en su lugar
     246.  00:411D  C9                  		ret					; Volvemos
     247.  00:411E                      
     248.  00:411E                      SETPAGES32K:	; --- Posiciona las paginas de un megarom o un 32K ---
     249.  00:411E  3E C9               		ld	a,$C9				; Codigo de RET
     250.  00:4120  32 23 41            		ld	(NOPRET),a			; Modificamos la siguiente instruccion si estamos en RAM
     251.  00:4123  00                  NOPRET:	nop					; No hacemos nada si no estamos en RAM
     252.  00:4124                      		; --- Si llegamos aqui no estamos en RAM, hay que posicionar la pagina ---
     253.  00:4124  CD 38 01            		call	RSLREG  			; Leemos el contenido del registro de seleccion de slots
     254.  00:4127  0F                  		rrca					; Rotamos a la derecha...
     255.  00:4128  0F                  		rrca					; ...dos veces
     256.  00:4129  CD 05 41            		call	GETSLOT				; Obtenemos el slot de la pagina 1 ($4000-$BFFF)
     257.  00:412C  26 80               		ld	h,$80				; Seleccionamos pagina 2 ($8000-$BFFF)
     258.  00:412E  C3 24 00            		jp	ENASLT ;ENASLT
     259.  00:4131                      
     260.  00:4131                      SET_SCREEN5_MODE:
     261.  00:4131                           ;Cambiamos el modo de pantalla
     262.  00:4131                          ; BASIC: COLOR 15,1,1
     263.  00:4131                          ; Establecer los colores
     264.  00:4131  21 E9 F3            	ld hl,FORCLR ; Variable del Sistema
     265.  00:4134  36 0F               	ld [hl],15 ; Color del primer plano 15=blanco
     266.  00:4136  23                  	inc hl ; FORCLR+1
     267.  00:4137  36 01               	ld [hl],1 ; Color de fondo 1=negro
     268.  00:4139  23                  	inc hl ; FORCLR+2
     269.  00:413A  36 01               	ld [hl],1 ; Color del borde 1=negro
     270.  00:413C                      
     271.  00:413C  3E 05                   ld  a,5     ; La rutina CHGMOD nos obliga a poner en el registro A el modo de pantalla que queremos
     272.  00:413E  CD 5F 00                call CHGMOD ; Mira arriba, pone la explicación
     273.  00:4141                      ;
     274.  00:4141  3A E0 F3                ld a,(RG15AV) ; esta dirección de memoria almacena el valor del registro de lectura del VDP, mira arriba
     275.  00:4144                          ;En or 0+0=0, 0+1=1, 1+1=1
     276.  00:4144                          ;En and 0+0=0, 0+1=0, 1+1=1
     277.  00:4144                          ;Con eso queremos cambiar los bits 7 y 8 del registro de escritura 1 del z80, queremos poner el 7 a 1 y también el 8 a 1
     278.  00:4144                          ;el bit 7 del registro 1 pone los sprites en modo 16x16 (los que nostros queremos dibujar)
     279.  00:4144                          ;el bit 8 queremos desactivarlo para no utilizar los sprites agrandados
     280.  00:4144  F6 02                   or 00000010b ; con or poniendo un 0 siempre respetamos los bits que hay y poniendo 1 1 obligamos a que sea 1
     281.  00:4146                          ;and 11111110b ; con and obligamos a que el ultimo bit valga 0
     282.  00:4146  E6 FE                   and 11111110b ; con and obligamos a que el ultimo bit valga 0
     283.  00:4148                      
     284.  00:4148  47                      ld b,a ;carga en b el valor de a
     285.  00:4149  0E 01                   ld c,1 ; La rutina WRTVDP necesta que le carguemos previamente el entero en C del z80 del registro que queroms modificar
     286.  00:414B  CD 47 00                call WRTVDP ;Escribe en los registros del VDP 
     287.  00:414E  AF                      xor a ; ld a,0
     288.  00:414F  32 DB F3            	ld [CLIKSW],a ; Variable BIOS desactivar sonido teclas
     289.  00:4152  C9                      ret
     290.  00:4153                      
     291.  00:4153                      DUMP_SPR_ALL:
     292.  00:4153                      
     293.  00:4153                      ;-----------------------------Definición del sprite en #7800  y volcado a la VRAM-------------------------------------------
     294.  00:4153                      
     295.  00:4153  21 CF 48                ld hl, SPRITE_PATTERN ; la rutina LDIRVM necesita haber cargado previamente la dirección de inicio de la RAM, para saber porqué he puesto 03800 fíjate este dibujo https://sites.google.com/site/multivac7/files-images/TMS9918_VRAMmap_G2_300dpi.png ,así es como está formado el VDP en screen 2
     296.  00:4156  11 00 78                ld de, #7800; la rutina necesita haber cargado previamente con de la dirección de inicio de la VRAM          
     297.  00:4159  01 80 01                ld bc, 8*4*12; 8 byte de cada tile * 4 que son los sprites de 16x16 y * #sprites
     298.  00:415C  CD 5C 00                call  LDIRVM ; Mira arriba, pone la explicación
     299.  00:415F                      
     300.  00:415F                      ;-----------------------------Definición de los atributos en #7600 y volcado a la VRAM------------------------------------
     301.  00:415F                      
     302.  00:415F  21 0C C0                ld hl, SPRITE_ATTRS ; la rutina LDIRVM necesita haber cargado previamente la dirección de inicio de la RAM, para saber porqué he puesto 0000 fíjate este dibujo https://sites.google.com/site/multivac7/files-images/TMS9918_VRAMmap_G2_300dpi.png ,así es como está formado el VDP en screen 2
     303.  00:4162  11 00 76                ld de, #7600; la rutina necesita haber cargado previamente con de la dirección de inicio de la VRAM          
     304.  00:4165  01 80 00                ld bc,128; 4 x #Sprites
     305.  00:4168  CD 5C 00                call  LDIRVM ; Mira arriba, pone la explicación
     306.  00:416B                      
     307.  00:416B                      ;-----------------------------Definición de los colores en #7400 y volcado a la VRAM------------------------------------
     308.  00:416B                      
     309.  00:416B  21 4F 4A                ld hl, SPRITE_COLOR_TABLE ; la rutina LDIRVM necesita haber cargado previamente la dirección de inicio de la RAM, para saber porqué he puesto 0000 fíjate este dibujo https://sites.google.com/site/multivac7/files-images/TMS9918_VRAMmap_G2_300dpi.png ,así es como está formado el VDP en screen 2
     310.  00:416E  11 00 74                ld de, #7400; la rutina necesita haber cargado previamente con de la dirección de inicio de la VRAM          
     311.  00:4171  01 A0 00                ld bc,16*10; 16 x #Sprites
     312.  00:4174  CD 5C 00                call  LDIRVM ; Mira arriba, pone la explicación
     313.  00:4177  C9                      ret
     314.  00:4178                      	
     315.  00:4178                      DUMP_SPR_ATTS:
     316.  00:4178                      
     317.  00:4178                      ;-----------------------------Definición de los atributos en #1E00 y volcado a la VRAM------------------------------------
     318.  00:4178                      
     319.  00:4178  21 0C C0                ld hl, SPRITE_ATTRS ; la rutina LDIRVM necesita haber cargado previamente la dirección de inicio de la RAM, para saber porqué he puesto 0000 fíjate este dibujo https://sites.google.com/site/multivac7/files-images/TMS9918_VRAMmap_G2_300dpi.png ,así es como está formado el VDP en screen 2
     320.  00:417B  11 00 76                ld de, #7600	; la rutina necesita haber cargado previamente con de la dirección de inicio de la VRAM          
     321.  00:417E  01 14 00                ld bc,20		; 5 x #Sprites
     322.  00:4181  CD 5C 00                call  LDIRVM 	; Mira arriba, pone la explicación
     323.  00:4184                      
     324.  00:4184                      ;	ld a, (SPRITE_COLOR_REPLACE2)
     325.  00:4184                      ;	JP Z,.DUMP_SPR_ATTS_END
     326.  00:4184  2A 93 C0            	ld hl, (SPRITE_COLOR_REPLACE2) ; la rutina LDIRVM necesita haber cargado previamente la dirección de inicio de la RAM, para saber porqué he puesto 0000 fíjate este dibujo https://sites.google.com/site/multivac7/files-images/TMS9918_VRAMmap_G2_300dpi.png ,así es como está formado el VDP en screen 2
     327.  00:4187  11 00 74                ld de, #7400; la rutina necesita haber cargado previamente con de la dirección de inicio de la VRAM          
     328.  00:418A  C5                      PUSH BC
     329.  00:418B  01 30 00            	ld bc,16*3; 16 x #Sprites
     330.  00:418E  CD 5C 00                call  LDIRVM 
     331.  00:4191  C1                  	POP BC
     332.  00:4192                      
     333.  00:4192                      .DUMP_SPR_ATTS_END:
     334.  00:4192  C9                      ret
     335.  00:4193                      
     336.  00:4193                      DUMP_SPR_P1:    
     337.  00:4193                      ;-----------------------------Definición del sprite en #7800  y volcado a la VRAM-------------------------------------------
     338.  00:4193                      
     339.  00:4193  2A 8F C0                ld hl, (SPRITE_PTR_REPLACE) ; la rutina LDIRVM necesita haber cargado previamente la dirección de inicio de la RAM, para saber porqué he puesto 03800 fíjate este dibujo https://sites.google.com/site/multivac7/files-images/TMS9918_VRAMmap_G2_300dpi.png ,así es como está formado el VDP en screen 2
     340.  00:4196  11 00 78                ld de, #7800; la rutina necesita haber cargado previamente con de la dirección de inicio de la VRAM          
     341.  00:4199  C5                      PUSH BC
     342.  00:419A  01 C0 00            	ld bc, 192; 32 bytes por sprite
     343.  00:419D  CD 5C 00                call  LDIRVM 
     344.  00:41A0  C1                  	POP BC
     345.  00:41A1                      
     346.  00:41A1                      ;-----------------------------Definición de los colores en #7400 y volcado a la VRAM------------------------------------
     347.  00:41A1                      
     348.  00:41A1  2A 91 C0                ld hl, (SPRITE_COLOR_REPLACE) ; la rutina LDIRVM necesita haber cargado previamente la dirección de inicio de la RAM, para saber porqué he puesto 0000 fíjate este dibujo https://sites.google.com/site/multivac7/files-images/TMS9918_VRAMmap_G2_300dpi.png ,así es como está formado el VDP en screen 2
     349.  00:41A4  11 00 74                ld de, #7400; la rutina necesita haber cargado previamente con de la dirección de inicio de la VRAM          
     350.  00:41A7  C5                      PUSH BC
     351.  00:41A8  01 30 00            	ld bc,16*3; 16 x #Sprites
     352.  00:41AB  CD 5C 00                call  LDIRVM 
     353.  00:41AE  C1                  	POP BC
     354.  00:41AF                      
     355.  00:41AF                      ; Replace 4 sprites(P1) in Sprite Pattern Table
     356.  00:41AF                      ;    xor a
     357.  00:41AF                      ;	di			; set VRAM address to 1800h
     358.  00:41AF                      ;	out (99h),a		; lower byte 00
     359.  00:41AF                      ;	ld a,78h + 040h		; upper byte 7800h with flag to set the bus in write mode (3800 VRAM: Sprite Pattern Table)
     360.  00:41AF                      ;	ei
     361.  00:41AF                      ;	out (99h),a		; note that this is protected by the ei instruction
     362.  00:41AF                      ;   push BC
     363.  00:41AF                      ;	ld bc,8098h     ; 80h = 128 bytes y port 98h 
     364.  00:41AF                      ;	ld hl,(SPRITE_PTR_REPLACE)
     365.  00:41AF                      
     366.  00:41AF                      ;.loop1:
     367.  00:41AF                      ;	outi			; send the data (HL) to port 98h 
     368.  00:41AF                      ;	jp nz,.loop1		; the inner loop is exactly 29 cycles. 
     369.  00:41AF                      ;   POP BC
     370.  00:41AF                      
     371.  00:41AF                          ; Replace 2 entries in sprite color table
     372.  00:41AF                      ;    xor a
     373.  00:41AF                      ;	di			; set VRAM address to 1800h
     374.  00:41AF                      ;	out (99h),a		; lower byte 00
     375.  00:41AF                      ;	ld a,74h + 040h		; upper byte 7400h with flag to set the bus in write mode (1C00 VRAM: Sprite Color Table)
     376.  00:41AF                      ;	ei
     377.  00:41AF                      ;	out (99h),a		; note that this is protected by the ei instruction
     378.  00:41AF                       ;   push BC
     379.  00:41AF                      ;	ld bc,2098h     ; 20h = 32 bytes y port 98h 
     380.  00:41AF                      ;	ld hl,(SPRITE_COLOR_REPLACE)
     381.  00:41AF                      	
     382.  00:41AF                      ;.loop2:
     383.  00:41AF                      ;	outi			; send the data (HL) to port 98h 
     384.  00:41AF                      ;	jp nz,.loop2		; the inner loop is exactly 29 cycles. 
     385.  00:41AF                       ;   POP BC
     386.  00:41AF                      
     387.  00:41AF  C9                      ret
      24   00:41B0                      	include "include\SETPAGES48K.asm"
       1.  00:41B0                      		; -----------------------------------------------------
       2.  00:41B0                      		; --- RUTINAS PARA COLOCAR LAS PAGINAS DEL CARTUCHO ---
       3.  00:41B0                      		; --- MODO 48K                                      ---
       4.  00:41B0                      		; -----------------------------------------------------
       5.  00:41B0                      		; --- SIEMPRE DEBEN IR EN LA PAGINA 1 DEL CARTUCHO! ---
       6.  00:41B0                      		; -----------------------------------------------------
       7.  00:41B0                      
       8.  00:41B0                      		; --- RUTINAS PRINCIPALES DEL MODULO ---
       9.  00:41B0                      		; SETPAGES48K:	BIOS-ROM-YY-ZZ	 -> ROM-ROM-ROM-ZZ (SITUA PAGINAS 2 Y 0, EN ESTE ORDEN)
      10.  00:41B0                      		;               ADEMAS GUARDA LOS SLOTS DEL JUEGO Y LA BIOS POR SI HAY QUE INTERCAMBIAR
      11.  00:41B0                      		; SETGAMEPAGE0:	XX-ROM-YY-ZZ     -> ROM-ROM-YY-ZZ (NO TOCA LA PAGINA 2)
      12.  00:41B0                      		; RESTOREBIOS:  XX-ROM-YY-ZZ     -> BIOS-ROM-YY-ZZ (VUELVE A SITUAR LA BIOS)
      13.  00:41B0                      		; SETPAGE0:	POSICIONA SLOT EN LA PAGINA 0
      14.  00:41B0                      
      15.  00:41B0                      		; --- VARIABLES EN RAM NECESARIAS ---
      16.  00:41B0                      		; SLOTBIOS:	BYTE PARA ALMACENAR EL SLOT DE LA BIOS
      17.  00:41B0                      		; SLOTGAME:	BYTE PARA ALMACENAR EL SLOT DEL JUEGO
      18.  00:41B0                      
      19.  00:41B0                      		;INCLUDE	"SETPAGES32K.ASM"
      20.  00:41B0                      
      21.  00:41B0                      SETPAGES48K:	; --- Posiciona las paginas de un cartucho de 48K ---
      22.  00:41B0  CD 1E 41            		call	SETPAGES32K			; Colocamos la pagina 2 del cartucho
      23.  00:41B3                      		; --- Guardamos el slot de la BIOS por si tenemos que restaurarla ---
      24.  00:41B3  3A C1 FC            		ld	a,[$FCC1]			; Valor del slot de la BIOS
      25.  00:41B6  32 8C C0            		ld	[SLOTBIOS],a			; Grabamos el slot de la BIOS para recuperarlo si hace falta
      26.  00:41B9                      		; --- Guardamos el slot del juego por si hay que restaurarlo ---
      27.  00:41B9  CD 38 01            		call	RSLREG				; Leemos el contenido del registro de seleccion de slots
      28.  00:41BC  0F                  		rrca					; Rotamos a la derecha...
      29.  00:41BD  0F                  		rrca					; ...dos veces
      30.  00:41BE  CD 05 41            		call	GETSLOT				; Obtenemos el slot de la pagina 1 ($4000-$7FFF) y volvemos
      31.  00:41C1  32 8D C0            		ld	[SLOTGAME],a			; Grabamos el slot del juego para recuperarlo si hace falta
      32.  00:41C4                      SETGAMEPAGE0:	; --- RUTINA QUE POSICIONA LA PAGINA 0 DEL JUEGO ---
      33.  00:41C4                      		; ---     ANTES HAY QUE LLAMAR A SETPAGES48K     ---
      34.  00:41C4  3A 8D C0            		ld	a,[SLOTGAME]			; Leemos el slot del juego
      35.  00:41C7  C3 CD 41            		jp	SETPAGE0			; Situamos la pagina 0 del juego y volvemos
      36.  00:41CA                      RESTOREBIOS:	; --- RUTINA QUE VUELVE A SITUAR LA BIOS ---
      37.  00:41CA                      		; --- ANTES HAY QUE LLAMAR A SETPAGES48K ---
      38.  00:41CA  3A 8C C0            		ld	a,[SLOTBIOS]			; Leemos el slot de la BIOS
      39.  00:41CD                      SETPAGE0:	; --- RUTINA QUE POSICIONA SLOT EN LA PAGINA 0 ---
      40.  00:41CD                      		; --- AUTOR: Ramones                           ---
      41.  00:41CD                      		; --- ENTRADA: a = slot con formato FxxxSSPP   ---
      42.  00:41CD  F3                  		di					; Desactivamos las interrupciones
      43.  00:41CE  47                  		ld	b,a				; Guardamos el slot
      44.  00:41CF  DB A8               		in	a,[$0A8]			; Leemos el registro principal de slots
      45.  00:41D1  E6 FC               		and	$FC				; Nos quedamos con los valores de las tres paginas superiores
      46.  00:41D3  57                  		ld	d,a				; D = Valor del slot primario
      47.  00:41D4  78                  		ld	a,b				; Recuperamos el slot
      48.  00:41D5  E6 03               		and	$03				; Nos fijamos en el slot primario
      49.  00:41D7  B2                  		or	d				; Colocamos los bits de las paginas superiores
      50.  00:41D8  57                  		ld	d,a				; Guardamos en D el valor final para el slot primario
      51.  00:41D9                      		; Comprobamos si esta expandido
      52.  00:41D9  78                  		ld	a,b				; Recuperamos el slot
      53.  00:41DA  CB 7F               		bit	7,a				; Miramos el bit de expansion
      54.  00:41DC  28 1D               		jr	z,.SETPRIMARY			; ...y saltamos si no esta expandido
      55.  00:41DE                      		; Si llegamos aqui el slot esta expandido
      56.  00:41DE  E6 03               		and	03h				; Nos quedamos con el slot primario
      57.  00:41E0  0F                  		rrca					; Rotamos ciclicamente a la derecha una...
      58.  00:41E1  0F                  		rrca					; ...y dos veces
      59.  00:41E2  4F                  		ld	c,a				; Guardamos el valor en c
      60.  00:41E3  7A                  		ld	a,d				; Recuperamos el valor final para el slot primario
      61.  00:41E4  E6 3F               		and	$3F				; Nos quedamos con las paginas 0, 1 y 2
      62.  00:41E6  B1                  		or	c				; Colocamos los bits para la pagina 3
      63.  00:41E7  4F                  		ld	c,a				; C:=valor del slot primario incluso en pagina 3
      64.  00:41E8  78                  		ld	a,b				; Recuperamos otra vez el slot
      65.  00:41E9  E6 0C               		and	$0C				; Nos quedamos con el valor del subslot
      66.  00:41EB  0F                  		rrca					; Rotamos ciclicamente a la derecha una...
      67.  00:41EC  0F                  		rrca					; ...y dos veces
      68.  00:41ED  47                  		ld	b,a				; B:= Slot expandido en pagina 3
      69.  00:41EE  79                  		ld	a,c				; valor del slot primario incluyendo pagina 3
      70.  00:41EF  D3 A8               		out	[$A8],a				; Slots : Primario, xx, xx, Primario
      71.  00:41F1  3A FF FF            		ld	a,[$FFFF]			; Leemos registro de seleccion de subslots
      72.  00:41F4  2F                  		cpl					; Complementamos (recordemos que siempre hay que complementarlo)
      73.  00:41F5  E6 FC               		and	$FC				; Nos quedamos con las paginas superiores
      74.  00:41F7  B0                  		or	b				; Colocamos el valor del slot expandido en pagina 0
      75.  00:41F8  32 FF FF            		ld	[$FFFF],a			; Seleccionamos el slot expandido
      76.  00:41FB                      .SETPRIMARY:	; --- Colocamos el slot primario ---
      77.  00:41FB  7A                  		ld	a,d				; Valor final del slot primario
      78.  00:41FC  D3 A8               		out	[$A8],a				; Slots: Seleccionado, xx, xx, Ram
      79.  00:41FE  C9                  		ret					; Volvemos
      25   00:41FF                      
      26   00:41FF                      START
      27   00:41FF                      	; CODE
      28   00:41FF  3E 08               	LD A,8
      29   00:4201  CD 5F 00            	CALL CHGMOD    	
      30   00:4204  CD 1E 41                CALL SETPAGES32K
      31   00:4207  CD 83 40            	CALL opening_screen
      32   00:420A  3E 01               	LD A,1
      33   00:420C  32 00 70            	LD (_bank2),A
      34   00:420F  CD 9F 00            	CALL CHGET
      35   00:4212                      	; Empieza el juego    
      36   00:4212  CD 68 40            	call ClearVram_MSX2		
      37   00:4215  CD 31 41            	call SET_SCREEN5_MODE    
      38   00:4218  CD 5C 40                call Set212Lines
      39   00:421B  21 00 80                LD HL, CEMENTER
      40   00:421E  22 95 C0                LD (BITMAP), HL
      41   00:4221  06 07                   LD B, :CEMENTER
      42   00:4223  CD C9 40                call load_screen2
      43   00:4226                          
      44   00:4226  CD 35 42                call INIT_CHARS_VARS
      45   00:4229  3E FF                   LD A, -MOV_SPEED_GHOST
      46   00:422B  32 03 C0            	LD (CHAR_SPEED_X_GHOST), A
      47   00:422E  CD 53 41                call DUMP_SPR_ALL
      48   00:4231  CD A3 42                call MAIN_LOOP
      49   00:4234                          ;CALL CHGET
      50   00:4234  C9                  	ret
      51   00:4235                      
      52   00:4235                      
      53   00:4235                      INIT_CHARS_VARS:    
      54   00:4235  DD 21 0C C0             ld ix, SPRITE_ATTRS           
      55   00:4239                          
      56   00:4239  DD 36 00 07             ld (ix), 07h        ; Sprite 1 - $AF abajo
      57   00:423D  DD 36 01 09             ld (ix+1), 09h
      58   00:4241  DD 36 02 00             ld (ix+2), 00h    
      59   00:4245                      
      60   00:4245  DD 36 04 07             ld (ix+4), 07h     ; Sprite 2
      61   00:4249  DD 36 05 09             ld (ix+5), 09h
      62   00:424D  DD 36 06 04             ld (ix+6), 04h        
      63   00:4251                      
      64   00:4251  DD 36 08 07             ld (ix+8), 07h     ; Sprite 3
      65   00:4255  DD 36 09 09             ld (ix+9), 09h
      66   00:4259  DD 36 0A 08             ld (ix+10), 08h        
      67   00:425D                      
      68   00:425D  DD 36 0C 07             ld (ix+12), $07      ; Sprite 1 - Ghost
      69   00:4261  DD 36 0D B9             ld (ix+13), $B9
      70   00:4265  DD 36 0E 18             ld (ix+14), $18
      71   00:4269                          
      72   00:4269  AF                      XOR A
      73   00:426A  32 00 C0                LD (JIFFY_TEMP),A
      74   00:426D  32 01 C0                LD (CHAR_SPEED_X),A
      75   00:4270  32 02 C0                LD (CHAR_SPEED_Y),A
      76   00:4273  32 03 C0                LD (CHAR_SPEED_X_GHOST),A
      77   00:4276  32 05 C0                LD (CHAR_DIR_GHOST1),A      ; $00 - LEFT, $FF - RIGHT
      78   00:4279  32 07 C0                LD (CHAR_NEW_DIR_MAIN),A    
      79   00:427C  32 08 C0                LD (CHAR_MAIN_SHOOT),A      ; Indica si el personaje está disparando - $FF
      80   00:427F  32 0A C0                LD (CHAR_DISTANCE_SHOOT),A
      81   00:4282  32 0B C0                LD (CHAR_SPEED_SHOOT),A
      82   00:4285  32 04 C0                LD (CHAR_GHOST_DEAD),A
      83   00:4288  32 09 C0                LD (CHAR_MIN_STEP), A
      84   00:428B  32 93 C0                LD (SPRITE_COLOR_REPLACE2), A
      85   00:428E  3E 01                   LD A,$01
      86   00:4290  32 06 C0                LD (CHAR_DIR_MAIN),A        ; $00 - UP, $01 - DOWN, $02 - LEFT, $03 - RIGHT
      87   00:4293                      
      88   00:4293  21 8F 46                ld hl, SPRITE_P1_DOWN
      89   00:4296  22 8F C0                ld (SPRITE_PTR_REPLACE), HL    
      90   00:4299  21 0F 4B                ld hl, SPRITE_COLOR_P1_DOWN
      91   00:429C  22 91 C0                ld (SPRITE_COLOR_REPLACE), HL
      92   00:429F  22 93 C0                LD (SPRITE_COLOR_REPLACE2), HL
      93   00:42A2  C9                      ret
      94   00:42A3                      
      95   00:42A3                      MAIN_LOOP:
      96   00:42A3                          ;halt ; sincroniza el teclado y pantalla con el procesador (que va muy rápido)    
      97   00:42A3  CD 78 41                call DUMP_SPR_ATTS    
      98   00:42A6                          
      99   00:42A6  3A 04 C0                LD A,(CHAR_GHOST_DEAD)
     100   00:42A9  FE 01                   CP $01
     101   00:42AB  CA 0C 43                JP Z,.continue
     102   00:42AE  DD 7E 0D                LD A, (ix+13)          ;cargamos la X del Fantasma
     103   00:42B1  2A 03 C0            	LD HL, (CHAR_SPEED_X_GHOST)
     104   00:42B4  85                  	ADD L					; Actualizamos la posicion en base a la velocidad
     105   00:42B5                          
     106   00:42B5  DD 77 0D            	LD (ix+13), A	
     107   00:42B8  FE 16                   CP $16
     108   00:42BA  CA C5 42                JP Z,.CHANGE_DIR_RIGHT
     109   00:42BD  FE B9                   CP $B9
     110   00:42BF  CA D2 42                JP Z,.CHANGE_DIR_LEFT
     111   00:42C2                          		
     112   00:42C2  C3 DB 42                JP .check_pattern
     113   00:42C5                      
     114   00:42C5                      .CHANGE_DIR_RIGHT:
     115   00:42C5  3E 01                   LD A, MOV_SPEED_GHOST
     116   00:42C7  32 03 C0            	LD (CHAR_SPEED_X_GHOST), A
     117   00:42CA  3E FF                   LD A,$FF
     118   00:42CC  32 05 C0                LD (CHAR_DIR_GHOST1),A
     119   00:42CF  C3 DB 42                JP .check_pattern
     120   00:42D2                      
     121   00:42D2                      .CHANGE_DIR_LEFT:
     122   00:42D2  3E FF                   LD A, -MOV_SPEED_GHOST
     123   00:42D4  32 03 C0            	LD (CHAR_SPEED_X_GHOST), A
     124   00:42D7  AF                      XOR A   ; Pone A a 0
     125   00:42D8  32 05 C0                LD (CHAR_DIR_GHOST1),A
     126   00:42DB                      
     127   00:42DB                      .check_pattern:
     128   00:42DB  3A 05 C0                LD A,(CHAR_DIR_GHOST1)
     129   00:42DE  FE FF                   CP $FF
     130   00:42E0  CA F9 42                JP Z,.check_pattern_RIGHT
     131   00:42E3  DD 7E 0E                LD A, (ix+14)       ; Cargamos el patrón y lo cambiamos
     132   00:42E6  FE 18                   CP $18
     133   00:42E8  CA F2 42                jp z,.change_pattern_L
     134   00:42EB  DD 36 0E 18             LD (ix+14),$18
     135   00:42EF  C3 0C 43                jp .continue
     136   00:42F2                      .change_pattern_L:
     137   00:42F2  DD 36 0E 1C             LD (ix+14),$1C
     138   00:42F6  C3 0C 43                jp .continue
     139   00:42F9                      
     140   00:42F9                      .check_pattern_RIGHT
     141   00:42F9  DD 7E 0E                LD A, (ix+14)       ; Cargamos el patrón y lo cambiamos
     142   00:42FC  FE 20                   CP $20
     143   00:42FE  CA 08 43                jp z,.change_pattern_R
     144   00:4301  DD 36 0E 20             LD (ix+14),$20
     145   00:4305  C3 0C 43                jp .continue
     146   00:4308                      .change_pattern_R:
     147   00:4308  DD 36 0E 24             LD (ix+14),$24
     148   00:430C                      
     149   00:430C                      .continue:    
     150   00:430C  3A 08 C0                LD A,(CHAR_MAIN_SHOOT)    
     151   00:430F  FE 01                   CP $01
     152   00:4311  CA 24 43                JP Z,.MOVE_SHOOT_LEFT
     153   00:4314  FE 02                   CP $02
     154   00:4316  CA 1C 43                JP Z,.MOVE_SHOOT_RIGHT
     155   00:4319  C3 73 43                JP .check_KB
     156   00:431C                      
     157   00:431C                      .MOVE_SHOOT_RIGHT:        
     158   00:431C  3E 03                   LD A, MOV_SPEED_SHOOT
     159   00:431E  32 0B C0            	LD (CHAR_SPEED_SHOOT), A    
     160   00:4321  C3 29 43                JP .CHECK_SHOOT_DISTANCE
     161   00:4324                      
     162   00:4324                      .MOVE_SHOOT_LEFT:    
     163   00:4324  3E FD                   LD A, -MOV_SPEED_SHOOT
     164   00:4326  32 0B C0            	LD (CHAR_SPEED_SHOOT), A    
     165   00:4329                      
     166   00:4329                      .CHECK_SHOOT_DISTANCE:
     167   00:4329                          ; Movemos el disparo
     168   00:4329  DD 7E 11                LD A, (ix+17)          ;cargamos la X del disparo
     169   00:432C  2A 0B C0            	LD HL, (CHAR_SPEED_SHOOT)
     170   00:432F  85                  	ADD L					; Actualizamos la posicion en base a la velocidad
     171   00:4330  DD 77 11                LD (ix+17), A
     172   00:4333                          ; Comprobamos si hay colision con el fantasma
     173   00:4333  3A 04 C0                LD A,(CHAR_GHOST_DEAD)  ; si está muerto,no lo miramos
     174   00:4336  FE 01                   CP $01
     175   00:4338  CA 4F 43                JP Z,.ADD_DISTANCE
     176   00:433B                      
     177   00:433B  DD 46 10                LD B,(ix+16)         ; Y del disparo
     178   00:433E  DD 4E 11                LD C,(ix+17)         ; X del disparo
     179   00:4341  DD 56 0C                LD D,(ix+12)         ; Y del fantasma 
     180   00:4344  DD 5E 0D                LD E,(ix+13)         ; X del fantasma
     181   00:4347  CD 10 40                call check_spr_collision
     182   00:434A  FE 01                   CP 1
     183   00:434C  CA 5F 43                JP Z,.KILL_GHOST
     184   00:434F                      .ADD_DISTANCE:
     185   00:434F  3A 0A C0                LD A,(CHAR_DISTANCE_SHOOT)
     186   00:4352  C6 03                   ADD MOV_SPEED_SHOOT
     187   00:4354  32 0A C0                LD (CHAR_DISTANCE_SHOOT),A    
     188   00:4357  FE 30                   CP MAX_DISTANCE_SHOOT
     189   00:4359  C2 73 43                JP NZ,.check_KB
     190   00:435C  C3 68 43                JP .HIDE_SHOOT
     191   00:435F                      
     192   00:435F                      .KILL_GHOST:
     193   00:435F  3E 01                   LD A,1
     194   00:4361  32 04 C0                LD (CHAR_GHOST_DEAD),A
     195   00:4364  DD 36 0C D9             LD (ix+12),217    
     196   00:4368                      
     197   00:4368                      .HIDE_SHOOT:
     198   00:4368  DD 36 10 D9             LD (ix+16),217          ; Y = 217 para ocultar el Sprite
     199   00:436C  AF                      XOR A
     200   00:436D  32 08 C0                LD (CHAR_MAIN_SHOOT),A   ; Desactivo el estado disparando 
     201   00:4370  32 0A C0                LD (CHAR_DISTANCE_SHOOT),A
     202   00:4373                      
     203   00:4373                      .check_KB:
     204   00:4373  76                      halt    
     205   00:4374                      
     206   00:4374  3E 08                   ld a, 8
     207   00:4376  CD 41 01            	call SNSMAT   
     208   00:4379  4F                      LD C,A    
     209   00:437A                          
     210   00:437A  CB 79                   BIT KB_RIGHT, C			; La tecla presionada es DOWN?
     211   00:437C  CC 4A 44                call z, move_right
     212   00:437F                          
     213   00:437F  CB 61                   BIT KB_LEFT, C			; La tecla presionada es DOWN?
     214   00:4381  CC 97 44                call z, move_left
     215   00:4384                      
     216   00:4384  CB 69                   BIT KB_UP, C			; La tecla presionada es UP?
     217   00:4386  CC DD 43                call z, move_up
     218   00:4389                      
     219   00:4389  CB 71                   BIT KB_DOWN, C			; La tecla presionada es DOWN?
     220   00:438B  CC 13 44                call z, move_down
     221   00:438E                          
     222   00:438E  CB 41                   BIT KB_SPACE, C			; La tecla presionada es SPACE
     223   00:4390  CC 99 43                call z,SHOOT_MAIN_CHAR
     224   00:4393                      
     225   00:4393  CB 59                   BIT KB_DEL, C			; La tecla presionada es DEL    
     226   00:4395  C8                      ret z
     227   00:4396                      
     228   00:4396  C3 A3 42                jp MAIN_LOOP
     229   00:4399                      
     230   00:4399                      SHOOT_MAIN_CHAR:    
     231   00:4399  3A 08 C0                LD A, (CHAR_MAIN_SHOOT)
     232   00:439C  FE 01                   CP $01                  ; Si ya está disparando esperamos a que termine
     233   00:439E  CA A3 42                JP Z,MAIN_LOOP
     234   00:43A1  FE 02                   CP $02                  ; Si ya está disparando esperamos a que termine
     235   00:43A3  CA A3 42                JP Z,MAIN_LOOP
     236   00:43A6                      
     237   00:43A6  DD 7E 00                LD A, (ix)          
     238   00:43A9  DD 77 10                ld (ix+16), A       ; Asignamos la Y del personaje    
     239   00:43AC                      
     240   00:43AC  3A 06 C0                LD A, (CHAR_DIR_MAIN)
     241   00:43AF  FE 03                   CP $03
     242   00:43B1  CA C7 43                JP Z,.SHOOT_RIGHT
     243   00:43B4  3E 01                   LD A,$01                ; SHOOT LEFT
     244   00:43B6  32 08 C0                LD (CHAR_MAIN_SHOOT),A   ; Activo el estado disparando izquierda
     245   00:43B9  DD 7E 01                LD A, (ix+1)			;cargamos la X - Si no es derecha, debe ser izquierda
     246   00:43BC  21 F4 FF            	LD HL, -12
     247   00:43BF  85                  	ADD L
     248   00:43C0  DD 36 12 2C             ld (ix+18), $2C     ; Sprite Boomerang
     249   00:43C4  C3 D7 43                JP .CONTINUE
     250   00:43C7                      
     251   00:43C7                      .SHOOT_RIGHT:
     252   00:43C7  3E 02                   LD A,$02
     253   00:43C9  32 08 C0                LD (CHAR_MAIN_SHOOT),A   ; Activo el estado disparando derecha
     254   00:43CC  DD 36 12 28             ld (ix+18), $28     ; Sprite Boomerang - Right
     255   00:43D0  DD 7E 01                LD A, (ix+1)			;cargamos la X
     256   00:43D3  21 0C 00            	LD HL, 12
     257   00:43D6  85                  	ADD L
     258   00:43D7                      
     259   00:43D7                      .CONTINUE:
     260   00:43D7  DD 77 11                ld (ix+17), A       ; Asignamos la X del personaje + el desplazamiento        
     261   00:43DA  C3 A3 42                jp MAIN_LOOP
     262   00:43DD                      
     263   00:43DD                      move_up:
     264   00:43DD                          ; Actualizamos la última tecla de dirección pulsada
     265   00:43DD  AF                      XOR A
     266   00:43DE  32 07 C0                LD (CHAR_NEW_DIR_MAIN),A
     267   00:43E1  CD E4 44                CALL CHECK_DIRECTION_MAIN
     268   00:43E4                      
     269   00:43E4  DD 7E 00                ld a,(ix); obtenemos el valor actual de la posicion y
     270   00:43E7  D6 01                   sub 1 ; decrementamos en 1 el valor, aunque realmente será dos por el desplazamiento de la Y que hace el VDP
     271   00:43E9  5F                      ld e,a  ; Metemos el parametro Y para verificar si hay colision
     272   00:43EA  DD 7E 01                ld a,(ix+1)
     273   00:43ED  57                      ld d,a  ; Metemos el parametro X para verificar si hay colision
     274   00:43EE  CD 20 40                call get_bloque_en_X_Y
     275   00:43F1  FE 01                   cp 1
     276   00:43F3  CA CB 45                jp z,NO_MOVEMENT
     277   00:43F6                      
     278   00:43F6  DD 7E 00                ld a,(ix); obtenemos el valor actual de la posicion y
     279   00:43F9  D6 01                   sub 1 ; decrementamos en 1 el valor, aunque realmente será dos por el desplazamiento de la Y que hace el VGP
     280   00:43FB  5F                      ld e,a  ; Metemos el parametro Y para verificar si hay colision
     281   00:43FC  DD 7E 01                ld a,(ix+1)
     282   00:43FF  C6 0A                   add 10 ; miramos la segunda tile 8+2
     283   00:4401  57                      ld d,a  ; Metemos el parametro X para verificar si hay colision
     284   00:4402  CD 20 40                call get_bloque_en_X_Y
     285   00:4405  FE 01                   cp 1
     286   00:4407  CA CB 45                jp z,NO_MOVEMENT
     287   00:440A                            
     288   00:440A  3E FF               	LD A, -MOV_SPEED
     289   00:440C  32 02 C0            	LD (CHAR_SPEED_Y), A
     290   00:440F  CD 62 45                call UPDATE_MOVEMENT    
     291   00:4412  C9                      ret
     292   00:4413                      
     293   00:4413                      move_down:    
     294   00:4413                          ; Actualizamos la última tecla de dirección pulsada
     295   00:4413  3E 01                   LD A,$01
     296   00:4415  32 07 C0                LD (CHAR_NEW_DIR_MAIN),A
     297   00:4418  CD E4 44                CALL CHECK_DIRECTION_MAIN
     298   00:441B                      
     299   00:441B  DD 7E 00                ld a,(ix); obtenemos el valor actual de la posicion y
     300   00:441E  C6 11                   add 17 ; incrementamos en 15+2 el valor
     301   00:4420  5F                      ld e,a  ; Metemos el parametro Y para verificar si hay colision
     302   00:4421  DD 7E 01                ld a,(ix+1)
     303   00:4424  57                      ld d,a  ; Metemos el parametro X para verificar si hay colision
     304   00:4425  CD 20 40                call get_bloque_en_X_Y
     305   00:4428  FE 01                   cp 1
     306   00:442A  CA CB 45                jp z,NO_MOVEMENT
     307   00:442D                      
     308   00:442D  DD 7E 00                ld a,(ix); obtenemos el valor actual de la posicion y
     309   00:4430  C6 11                   add 17 ; incrementamos en 15 el valor
     310   00:4432  5F                      ld e,a  ; Metemos el parametro Y para verificar si hay colision
     311   00:4433  DD 7E 01                ld a,(ix+1)
     312   00:4436  C6 0A                   add 10 ; miramos la segunda tile 8+2
     313   00:4438  57                      ld d,a  ; Metemos el parametro X para verificar si hay colision    
     314   00:4439  CD 20 40                call get_bloque_en_X_Y
     315   00:443C  FE 01                   cp 1
     316   00:443E  CA CB 45                jp z,NO_MOVEMENT
     317   00:4441                          
     318   00:4441  3E 01                   LD A, MOV_SPEED
     319   00:4443  32 02 C0            	LD (CHAR_SPEED_Y), A
     320   00:4446  CD 62 45                call UPDATE_MOVEMENT    
     321   00:4449  C9                      ret
     322   00:444A                      
     323   00:444A                      move_right:
     324   00:444A                          ; Actualizamos la última tecla de dirección pulsada
     325   00:444A  3E 03                   LD A,$03
     326   00:444C  32 07 C0                LD (CHAR_NEW_DIR_MAIN),A
     327   00:444F  CD E4 44                CALL CHECK_DIRECTION_MAIN
     328   00:4452                      
     329   00:4452  DD 7E 01                ld a,(ix+1); obtenemos el valor actual de la posicion x   
     330   00:4455  C6 10                   add 16; incrementamos en 3 el valor
     331   00:4457  57                      ld d,a  ; Metemos el parametro X para verificar si hay colision
     332   00:4458  DD 7E 00                ld a,(ix)   ;obtenemos el valor actual de la posicion Y
     333   00:445B  C6 01                   add 1   ; incrementamos en 1 por el desplazamiento del VGP
     334   00:445D  5F                      ld e,a  ; Metemos el parametro Y para verificar si hay colision
     335   00:445E  CD 20 40                call get_bloque_en_X_Y
     336   00:4461  FE 01                   cp 1
     337   00:4463  CA CB 45                jp z,NO_MOVEMENT
     338   00:4466                      
     339   00:4466                          ;Miramos el tile del byte inferior del sprite - centro personaje
     340   00:4466  DD 7E 01                ld a,(ix+1); obetenemos el valor actual de la posicion x   
     341   00:4469  C6 10                   add 16; incrementamos en 2 tiles el valor
     342   00:446B  57                      ld d,a  ; Metemos el parametro X para verificar si hay colision
     343   00:446C  DD 7E 00                ld a,(ix) ;obtenemos el valor actual de la posicion y
     344   00:446F  C6 08                   add 8 ; Añadimos 8 para mirar el tile inferior - centro
     345   00:4471  5F                      ld e,a  ; Metemos el parametro Y para verificar si hay colision
     346   00:4472  CD 20 40                call get_bloque_en_X_Y
     347   00:4475  FE 01                   cp 1
     348   00:4477  CA CB 45                jp z,NO_MOVEMENT
     349   00:447A                      
     350   00:447A                          ;Miramos el tile del byte inferior del sprite - esquina inferior derecha
     351   00:447A  DD 7E 01                ld a,(ix+1); obetenemos el valor actual de la posicion x   
     352   00:447D  C6 10                   add 16; incrementamos en 2 tiles el valor
     353   00:447F  57                      ld d,a  ; Metemos el parametro X para verificar si hay colision
     354   00:4480  DD 7E 00                ld a,(ix) ;obtenemos el valor actual de la posicion y
     355   00:4483  C6 0F                   add 15 ; Añadimos 8+1 para mirar la esquina inferior derecha del tile inferior
     356   00:4485  5F                      ld e,a  ; Metemos el parametro Y para verificar si hay colision
     357   00:4486  CD 20 40                call get_bloque_en_X_Y
     358   00:4489  FE 01                   cp 1
     359   00:448B  CA CB 45                jp z,NO_MOVEMENT    
     360   00:448E                          
     361   00:448E  3E 01                   LD A, MOV_SPEED
     362   00:4490  32 01 C0            	LD (CHAR_SPEED_X), A
     363   00:4493  CD 62 45                call UPDATE_MOVEMENT            
     364   00:4496  C9                      ret
     365   00:4497                      
     366   00:4497                      move_left:
     367   00:4497                          ; Actualizamos la última tecla de dirección pulsada
     368   00:4497  3E 02                   LD A,$02
     369   00:4499  32 07 C0                LD (CHAR_NEW_DIR_MAIN),A
     370   00:449C  CD E4 44                CALL CHECK_DIRECTION_MAIN
     371   00:449F  DD 7E 01                ld a,(ix+1); obetenemos el valor actual de la posicion x
     372   00:44A2  D6 02                   sub 2 ; decrementamos en 2 el valor
     373   00:44A4  57                      ld d,a  ; Metemos el parametro X para verificar si hay colision
     374   00:44A5  DD 7E 00                ld a,(ix)   ;obtenemos el valor actual de la posicion Y
     375   00:44A8  C6 01                   add 1   ; incrementamos en 1 por el desplazamiento del VGP
     376   00:44AA  5F                      ld e,a  ; Metemos el parametro Y para verificar si hay colision
     377   00:44AB  CD 20 40                call get_bloque_en_X_Y
     378   00:44AE  FE 01                   cp 1
     379   00:44B0  CA CB 45                jp z,NO_MOVEMENT
     380   00:44B3                      
     381   00:44B3                          ;Miramos el tile inferior parte central del personaje
     382   00:44B3  DD 7E 01                ld a,(ix+1); obetenemos el valor actual de la posicion x
     383   00:44B6  D6 02                   sub 2 ; decrementamos en 2 el valor
     384   00:44B8  57                      ld d,a  ; Metemos el parametro X para verificar si hay colision
     385   00:44B9  DD 7E 00                ld a,(ix)   ;obtenemos el valor actual de la posicion Y
     386   00:44BC  C6 08                   add 8   ; incrementamos en 8 para mirar la parte central del personaje
     387   00:44BE  5F                      ld e,a  ; Metemos el parametro Y para verificar si hay colision
     388   00:44BF  CD 20 40                call get_bloque_en_X_Y
     389   00:44C2  FE 01                   cp 1
     390   00:44C4  CA CB 45                jp z,NO_MOVEMENT
     391   00:44C7                      
     392   00:44C7                          ;Miramos el tile inferior esquina inferior izquierda
     393   00:44C7  DD 7E 01                ld a,(ix+1); obetenemos el valor actual de la posicion x
     394   00:44CA  D6 02                   sub 2 ; decrementamos en 2 el valor
     395   00:44CC  57                      ld d,a  ; Metemos el parametro X para verificar si hay colision
     396   00:44CD  DD 7E 00                ld a,(ix)   ;obtenemos el valor actual de la posicion Y
     397   00:44D0  C6 0F                   add 15   ; incrementamos en 8 para mirar la parte central del personaje (-1 por el offset del VGP)
     398   00:44D2  5F                      ld e,a  ; Metemos el parametro Y para verificar si hay colision
     399   00:44D3  CD 20 40                call get_bloque_en_X_Y
     400   00:44D6  FE 01                   cp 1
     401   00:44D8  CA CB 45                jp z,NO_MOVEMENT
     402   00:44DB                      
     403   00:44DB  3E FF                   LD A, -MOV_SPEED
     404   00:44DD  32 01 C0            	LD (CHAR_SPEED_X), A
     405   00:44E0  CD 62 45                call UPDATE_MOVEMENT     
     406   00:44E3  C9                      ret
     407   00:44E4                      
     408   00:44E4                      CHECK_DIRECTION_MAIN:
     409   00:44E4  3A 06 C0                LD A, (CHAR_DIR_MAIN)		                ;Cargamos el valor anterior de direccion
     410   00:44E7  2A 07 C0            	LD HL, (CHAR_NEW_DIR_MAIN)		            ;Cargamos el valor actual de direccion
     411   00:44EA  BD                  	CP L		            	                ;Son iguales?
     412   00:44EB  C8                  	RET Z                           			;Si son iguales, vuelvo
     413   00:44EC  3A 07 C0                LD A,(CHAR_NEW_DIR_MAIN)
     414   00:44EF  FE 01                   CP $01
     415   00:44F1  CA 06 45                JP Z,.SET_DIR_DOWN
     416   00:44F4  FE 00                   CP $00
     417   00:44F6  CA 1B 45                JP Z,.SET_DIR_UP
     418   00:44F9  FE 03                   CP $03
     419   00:44FB  CA 30 45                JP Z,.SET_DIR_RIGHT
     420   00:44FE  FE 02                   CP $02
     421   00:4500  CA 42 45                JP Z,.SET_DIR_LEFT
     422   00:4503  C3 57 45                JP .FINISH
     423   00:4506                          
     424   00:4506                      .SET_DIR_DOWN:    
     425   00:4506  21 8F 46                ld hl, SPRITE_P1_DOWN
     426   00:4509  22 8F C0                ld (SPRITE_PTR_REPLACE), HL
     427   00:450C                          
     428   00:450C  21 0F 4B                ld hl, SPRITE_COLOR_P1_DOWN
     429   00:450F  22 91 C0                ld (SPRITE_COLOR_REPLACE), HL    
     430   00:4512  22 93 C0                ld (SPRITE_COLOR_REPLACE2), HL
     431   00:4515  CD 93 41                CALL DUMP_SPR_P1    
     432   00:4518                      
     433   00:4518  C3 57 45                JP .FINISH
     434   00:451B                      
     435   00:451B                      .SET_DIR_UP:
     436   00:451B  21 CF 45                ld hl, SPRITE_P1_UP
     437   00:451E  22 8F C0                ld (SPRITE_PTR_REPLACE), HL
     438   00:4521                          
     439   00:4521  21 AF 4A                ld hl, SPRITE_COLOR_P1_UP
     440   00:4524  22 91 C0                ld (SPRITE_COLOR_REPLACE), HL
     441   00:4527  22 93 C0                ld (SPRITE_COLOR_REPLACE2), HL
     442   00:452A  CD 93 41                CALL DUMP_SPR_P1
     443   00:452D                      
     444   00:452D  C3 57 45                JP .FINISH
     445   00:4530                      
     446   00:4530                      .SET_DIR_RIGHT:
     447   00:4530  21 0F 48                ld hl, SPRITE_P1_RIGHT
     448   00:4533  22 8F C0                ld (SPRITE_PTR_REPLACE), HL
     449   00:4536                          
     450   00:4536  21 CF 4B                ld hl, SPRITE_COLOR_P1_RIGHT
     451   00:4539  22 91 C0                ld (SPRITE_COLOR_REPLACE), HL
     452   00:453C                          ;;ld (SPRITE_COLOR_REPLACE2), HL
     453   00:453C  CD 93 41                CALL DUMP_SPR_P1
     454   00:453F  C3 57 45                JP .FINISH
     455   00:4542                      
     456   00:4542                      .SET_DIR_LEFT:    
     457   00:4542  21 4F 47                ld hl, SPRITE_P1_LEFT
     458   00:4545  22 8F C0                ld (SPRITE_PTR_REPLACE), HL
     459   00:4548                          
     460   00:4548  21 6F 4B                ld hl, SPRITE_COLOR_P1_LEFT
     461   00:454B  22 91 C0                ld (SPRITE_COLOR_REPLACE), HL
     462   00:454E  22 93 C0                ld (SPRITE_COLOR_REPLACE2), HL
     463   00:4551  CD 93 41                CALL DUMP_SPR_P1
     464   00:4554                          
     465   00:4554  C3 57 45                JP .FINISH
     466   00:4557                      
     467   00:4557                      .FINISH:
     468   00:4557  AF                      XOR A
     469   00:4558  32 09 C0                LD (CHAR_MIN_STEP), A   ; reseteamos el contador de pasos
     470   00:455B  3A 07 C0                LD A, (CHAR_NEW_DIR_MAIN)
     471   00:455E  32 06 C0                LD (CHAR_DIR_MAIN),A    
     472   00:4561  C9                      RET
     473   00:4562                      
     474   00:4562                      UPDATE_MOVEMENT:
     475   00:4562  DD 7E 00            	LD A, (ix)          ;cargamos la Y			
     476   00:4565  2A 02 C0            	LD HL, (CHAR_SPEED_Y)
     477   00:4568  85                  	ADD L					; Actualizamos la posicion en base a la velocidad
     478   00:4569                          
     479   00:4569  DD 77 00            	LD (ix), A
     480   00:456C  DD 77 04                LD (ix+4), A
     481   00:456F  DD 77 08                LD (ix+8), A
     482   00:4572                      	
     483   00:4572  DD 7E 01            	LD A, (ix+1)			;cargamos la X
     484   00:4575  2A 01 C0            	LD HL, (CHAR_SPEED_X)
     485   00:4578  85                  	ADD L   					; Actualizamos la posicion en base a la velocidad
     486   00:4579                          
     487   00:4579  DD 77 01            	LD (ix+1), A
     488   00:457C  DD 77 05                LD (ix+5), A
     489   00:457F  DD 77 09                LD (ix+9), A	
     490   00:4582                      
     491   00:4582  AF                      XOR A            ; reseteamos las variables de movimiento para el siguiente ciclo
     492   00:4583  32 01 C0                LD (CHAR_SPEED_X),A
     493   00:4586  32 02 C0                LD (CHAR_SPEED_Y),A	
     494   00:4589                      
     495   00:4589                          ; Animación/pasos de personaje	
     496   00:4589  3A 09 C0                LD A, (CHAR_MIN_STEP)
     497   00:458C  FE 04                   CP MAX_CHAR_STEPS
     498   00:458E  C2 C5 45                JP NZ,.NO_CHAR_PATTERN_CHANGE
     499   00:4591                          
     500   00:4591  AF                      XOR A
     501   00:4592  32 09 C0                LD (CHAR_MIN_STEP), A   ; reseteamos el contador de pasos
     502   00:4595  DD 7E 02                LD A, (ix+2)    ; Cargamos el patrón
     503   00:4598  FE 00                   CP $00
     504   00:459A  CA B0 45                JP Z,.SET_SPR_1P_2
     505   00:459D  DD 36 02 00             LD (ix+2), $00
     506   00:45A1  DD 36 06 04             LD (ix+6), $04
     507   00:45A5  DD 36 0A 08             LD (ix+10), $08
     508   00:45A9  2A 91 C0                ld hl, (SPRITE_COLOR_REPLACE)
     509   00:45AC  22 93 C0                ld (SPRITE_COLOR_REPLACE2), HL
     510   00:45AF  C9                      ret
     511   00:45B0                      
     512   00:45B0                      .SET_SPR_1P_2:
     513   00:45B0  DD 36 02 0C             LD (ix+2), $0C
     514   00:45B4  DD 36 06 10             LD (ix+6), $10
     515   00:45B8  DD 36 0A 14             LD (ix+10), $14
     516   00:45BC                              
     517   00:45BC  3A 91 C0                ld A, (SPRITE_COLOR_REPLACE)
     518   00:45BF  C6 30                   ADD 48
     519   00:45C1  32 93 C0                ld (SPRITE_COLOR_REPLACE2), A
     520   00:45C4                      
     521   00:45C4  C9                  	ret
     522   00:45C5                      
     523   00:45C5                      .NO_CHAR_PATTERN_CHANGE    
     524   00:45C5  C6 01                   ADD 1
     525   00:45C7  32 09 C0                LD (CHAR_MIN_STEP), A
     526   00:45CA  C9                      ret
     527   00:45CB                      
     528   00:45CB                      NO_MOVEMENT:    
     529   00:45CB  CD A3 42                call MAIN_LOOP
     530   00:45CE  C9                      ret
     531   00:45CF                      
     532   00:45CF                      include "include\BTH_data.asm"
       1.  00:45CF                      SPRITE_P1_UP:
       2.  00:45CF                          ; UP 1        
       3.  00:45CF                          ; mask 0
       4.  00:45CF                          DB $03,$0F,$1F,$1F,$1F,$3F,$1F,$0F
       4.  00:45CF  03 0F 1F 1F 1F 3F 1F 0F 
       5.  00:45D7                          DB $30,$78,$60,$60,$03,$03,$06,$0E
       5.  00:45D7  30 78 60 60 03 03 06 0E 
       6.  00:45DF                          DB $E0,$F0,$F8,$F8,$FC,$F8,$FC,$F0
       6.  00:45DF  E0 F0 F8 F8 FC F8 FC F0 
       7.  00:45E7                          DB $0E,$18,$06,$00,$C0,$E0,$F0,$00    
       7.  00:45E7  0E 18 06 00 C0 E0 F0 00 
       8.  00:45EF                          ; mask 1
       9.  00:45EF                          DB $00,$00,$00,$00,$00,$00,$00,$00
       9.  00:45EF  00 00 00 00 00 00 00 00 
      10.  00:45F7                          DB $0F,$00,$03,$03,$01,$01,$00,$00
      10.  00:45F7  0F 00 03 03 01 01 00 00 
      11.  00:45FF                          DB $00,$00,$00,$00,$00,$00,$00,$00
      11.  00:45FF  00 00 00 00 00 00 00 00 
      12.  00:4607                          DB $F0,$06,$C0,$C0,$80,$80,$80,$00
      12.  00:4607  F0 06 C0 C0 80 80 80 00 
      13.  00:460F                          ; mask 2
      14.  00:460F                          DB $00,$00,$00,$00,$00,$00,$00,$00
      14.  00:460F  00 00 00 00 00 00 00 00 
      15.  00:4617                          DB $00,$07,$01,$01,$00,$00,$00,$00
      15.  00:4617  00 07 01 01 00 00 00 00 
      16.  00:461F                          DB $00,$00,$00,$00,$00,$00,$00,$00
      16.  00:461F  00 00 00 00 00 00 00 00 
      17.  00:4627                          DB $00,$E0,$80,$80,$00,$00,$00,$00    
      17.  00:4627  00 E0 80 80 00 00 00 00 
      18.  00:462F                      
      19.  00:462F                          ; UP 2
      20.  00:462F                          ; mask 0
      21.  00:462F                          DB $03,$0F,$1F,$1F,$1F,$3F,$1F,$0F
      21.  00:462F  03 0F 1F 1F 1F 3F 1F 0F 
      22.  00:4637                          DB $70,$18,$60,$00,$03,$07,$0E,$00
      22.  00:4637  70 18 60 00 03 07 0E 00 
      23.  00:463F                          DB $E0,$F0,$F8,$F8,$FC,$F8,$FC,$F0
      23.  00:463F  E0 F0 F8 F8 FC F8 FC F0 
      24.  00:4647                          DB $0C,$1E,$06,$06,$C0,$C0,$E0,$70    
      24.  00:4647  0C 1E 06 06 C0 C0 E0 70 
      25.  00:464F                          ; mask 1
      26.  00:464F                          DB $00,$00,$00,$00,$00,$00,$00,$00
      26.  00:464F  00 00 00 00 00 00 00 00 
      27.  00:4657                          DB $0F,$60,$03,$03,$01,$01,$00,$00
      27.  00:4657  0F 60 03 03 01 01 00 00 
      28.  00:465F                          DB $00,$00,$00,$00,$00,$00,$00,$00
      28.  00:465F  00 00 00 00 00 00 00 00 
      29.  00:4667                          DB $F0,$00,$C0,$C0,$80,$80,$80,$00
      29.  00:4667  F0 00 C0 C0 80 80 80 00 
      30.  00:466F                          ; mask 2
      31.  00:466F                          DB $00,$00,$00,$00,$00,$00,$00,$00
      31.  00:466F  00 00 00 00 00 00 00 00 
      32.  00:4677                          DB $00,$07,$01,$01,$00,$00,$00,$00
      32.  00:4677  00 07 01 01 00 00 00 00 
      33.  00:467F                          DB $00,$00,$00,$00,$00,$00,$00,$00
      33.  00:467F  00 00 00 00 00 00 00 00 
      34.  00:4687                          DB $00,$E0,$80,$80,$00,$00,$00,$00
      34.  00:4687  00 E0 80 80 00 00 00 00 
      35.  00:468F                      
      36.  00:468F                      SPRITE_P1_DOWN:
      37.  00:468F                          ; DOWN 1 - 00h
      38.  00:468F                          DB $03,$0F,$00,$0A,$0E,$0D,$07,$03
      38.  00:468F  03 0F 00 0A 0E 0D 07 03 
      39.  00:4697                          DB $3E,$7B,$60,$60,$03,$03,$06,$0E
      39.  00:4697  3E 7B 60 60 03 03 06 0E 
      40.  00:469F                          DB $E0,$F0,$A0,$90,$70,$B0,$E0,$C0
      40.  00:469F  E0 F0 A0 90 70 B0 E0 C0 
      41.  00:46A7                          DB $7E,$D8,$06,$00,$C0,$E0,$F0,$00
      41.  00:46A7  7E D8 06 00 C0 E0 F0 00 
      42.  00:46AF                          ; mask 1 - 04h
      43.  00:46AF                          DB $00,$00,$1F,$15,$11,$32,$18,$0C
      43.  00:46AF  00 00 1F 15 11 32 18 0C 
      44.  00:46B7                          DB $01,$00,$03,$03,$01,$01,$00,$00
      44.  00:46B7  01 00 03 03 01 01 00 00 
      45.  00:46BF                          DB $00,$00,$58,$68,$8C,$48,$1C,$30
      45.  00:46BF  00 00 58 68 8C 48 1C 30 
      46.  00:46C7                          DB $80,$06,$C0,$C0,$80,$80,$80,$00
      46.  00:46C7  80 06 C0 C0 80 80 80 00 
      47.  00:46CF                          ; mask 2 - 08h
      48.  00:46CF                          DB $00,$00,$00,$00,$00,$30,$00,$00
      48.  00:46CF  00 00 00 00 00 30 00 00 
      49.  00:46D7                          DB $00,$04,$00,$00,$00,$00,$00,$00
      49.  00:46D7  00 04 00 00 00 00 00 00 
      50.  00:46DF                          DB $00,$00,$00,$00,$00,$08,$00,$00
      50.  00:46DF  00 00 00 00 00 08 00 00 
      51.  00:46E7                          DB $00,$20,$00,$00,$00,$00,$00,$00
      51.  00:46E7  00 20 00 00 00 00 00 00 
      52.  00:46EF                      
      53.  00:46EF                          ; DOWN 2
      54.  00:46EF                          ; mask 0 - 0Ch
      55.  00:46EF                          DB $03,$0F,$00,$0A,$0E,$0D,$07,$03
      55.  00:46EF  03 0F 00 0A 0E 0D 07 03 
      56.  00:46F7                          DB $7E,$1B,$60,$00,$03,$07,$0E,$00
      56.  00:46F7  7E 1B 60 00 03 07 0E 00 
      57.  00:46FF                          DB $E0,$F0,$A0,$90,$70,$B0,$E0,$C0
      57.  00:46FF  E0 F0 A0 90 70 B0 E0 C0 
      58.  00:4707                          DB $7C,$DE,$06,$06,$C0,$C0,$E0,$70
      58.  00:4707  7C DE 06 06 C0 C0 E0 70 
      59.  00:470F                          ; mask 1 - 10h
      60.  00:470F                          DB $00,$00,$1F,$15,$11,$32,$18,$0C
      60.  00:470F  00 00 1F 15 11 32 18 0C 
      61.  00:4717                          DB $01,$60,$03,$03,$01,$01,$00,$00
      61.  00:4717  01 60 03 03 01 01 00 00 
      62.  00:471F                          DB $00,$00,$58,$68,$8C,$48,$1C,$30
      62.  00:471F  00 00 58 68 8C 48 1C 30 
      63.  00:4727                          DB $80,$00,$C0,$C0,$80,$80,$80,$00
      63.  00:4727  80 00 C0 C0 80 80 80 00 
      64.  00:472F                          ; mask 2 - 14h
      65.  00:472F                          DB $00,$00,$00,$00,$00,$30,$00,$00
      65.  00:472F  00 00 00 00 00 30 00 00 
      66.  00:4737                          DB $00,$04,$00,$00,$00,$00,$00,$00
      66.  00:4737  00 04 00 00 00 00 00 00 
      67.  00:473F                          DB $00,$00,$00,$00,$00,$08,$00,$00
      67.  00:473F  00 00 00 00 00 08 00 00 
      68.  00:4747                          DB $00,$20,$00,$00,$00,$00,$00,$00
      68.  00:4747  00 20 00 00 00 00 00 00 
      69.  00:474F                      
      70.  00:474F                      SPRITE_P1_LEFT:         
      71.  00:474F                          ; --- Slot 1
      72.  00:474F                          ; mask 0
      73.  00:474F                          DB $07,$1F,$03,$07,$0B,$1F,$0F,$07
      73.  00:474F  07 1F 03 07 0B 1F 0F 07 
      74.  00:4757                          DB $03,$0F,$30,$30,$03,$01,$01,$03
      74.  00:4757  03 0F 30 30 03 01 01 03 
      75.  00:475F                          DB $C0,$E0,$00,$80,$C0,$C0,$80,$00
      75.  00:475F  C0 E0 00 80 C0 C0 80 00 
      76.  00:4767                          DB $C0,$80,$00,$00,$D8,$B0,$20,$00
      76.  00:4767  C0 80 00 00 D8 B0 20 00 
      77.  00:476F                          ; mask 1
      78.  00:476F                          DB $00,$00,$0C,$18,$34,$00,$00,$00
      78.  00:476F  00 00 0C 18 34 00 00 00 
      79.  00:4777                          DB $0C,$00,$09,$03,$00,$00,$00,$00
      79.  00:4777  0C 00 09 03 00 00 00 00 
      80.  00:477F                          DB $00,$00,$F0,$78,$38,$3C,$70,$F8
      80.  00:477F  00 00 F0 78 38 3C 70 F8 
      81.  00:4787                          DB $00,$78,$C0,$F8,$18,$10,$00,$00
      81.  00:4787  00 78 C0 F8 18 10 00 00 
      82.  00:478F                          ; mask 2
      83.  00:478F                          DB $00,$00,$00,$00,$30,$00,$00,$00
      83.  00:478F  00 00 00 00 30 00 00 00 
      84.  00:4797                          DB $00,$00,$01,$00,$00,$00,$00,$00
      84.  00:4797  00 00 01 00 00 00 00 00 
      85.  00:479F                          DB $00,$00,$00,$00,$38,$00,$00,$00
      85.  00:479F  00 00 00 00 38 00 00 00 
      86.  00:47A7                          DB $3C,$00,$F0,$38,$00,$00,$00,$00
      86.  00:47A7  3C 00 F0 38 00 00 00 00 
      87.  00:47AF                              
      88.  00:47AF                          ; --- Slot 3
      89.  00:47AF                          ; mask 0
      90.  00:47AF                          DB $07,$1F,$03,$07,$0B,$1F,$0F,$07
      90.  00:47AF  07 1F 03 07 0B 1F 0F 07 
      91.  00:47B7                          DB $03,$0F,$01,$03,$03,$01,$03,$06
      91.  00:47B7  03 0F 01 03 03 01 03 06 
      92.  00:47BF                          DB $C0,$E0,$00,$80,$C0,$C0,$80,$00
      92.  00:47BF  C0 E0 00 80 C0 C0 80 00 
      93.  00:47C7                          DB $C0,$80,$F0,$F8,$D8,$D0,$40,$C0
      93.  00:47C7  C0 80 F0 F8 D8 D0 40 C0 
      94.  00:47CF                          ; mask 1
      95.  00:47CF                          DB $00,$00,$0C,$18,$34,$00,$00,$00
      95.  00:47CF  00 00 0C 18 34 00 00 00 
      96.  00:47D7                          DB $0C,$30,$31,$00,$00,$00,$00,$00
      96.  00:47D7  0C 30 31 00 00 00 00 00 
      97.  00:47DF                          DB $00,$00,$F0,$78,$38,$3C,$70,$F8
      97.  00:47DF  00 00 F0 78 38 3C 70 F8 
      98.  00:47E7                          DB $00,$00,$C0,$38,$18,$10,$00,$00
      98.  00:47E7  00 00 C0 38 18 10 00 00 
      99.  00:47EF                          ; mask 2
     100.  00:47EF                          DB $00,$00,$00,$00,$30,$00,$00,$00
     100.  00:47EF  00 00 00 00 30 00 00 00 
     101.  00:47F7                          DB $00,$00,$30,$00,$00,$00,$00,$00
     101.  00:47F7  00 00 30 00 00 00 00 00 
     102.  00:47FF                          DB $00,$00,$00,$00,$38,$00,$00,$00
     102.  00:47FF  00 00 00 00 38 00 00 00 
     103.  00:4807                          DB $3C,$78,$00,$00,$00,$00,$00,$00
     103.  00:4807  3C 78 00 00 00 00 00 00 
     104.  00:480F                      
     105.  00:480F                      SPRITE_P1_RIGHT:
     106.  00:480F                          ; --- Slot 0
     107.  00:480F                          ; mask 0
     108.  00:480F                          DB $03,$07,$00,$01,$03,$03,$01,$00
     108.  00:480F  03 07 00 01 03 03 01 00 
     109.  00:4817                          DB $03,$01,$00,$00,$1B,$0D,$04,$00
     109.  00:4817  03 01 00 00 1B 0D 04 00 
     110.  00:481F                          DB $E0,$F8,$C0,$E0,$D0,$F8,$F0,$E0
     110.  00:481F  E0 F8 C0 E0 D0 F8 F0 E0 
     111.  00:4827                          DB $C0,$F0,$0C,$0C,$C0,$80,$80,$C0
     111.  00:4827  C0 F0 0C 0C C0 80 80 C0 
     112.  00:482F                          ; mask 1
     113.  00:482F                          DB $00,$00,$0F,$1E,$1C,$3C,$0E,$1F
     113.  00:482F  00 00 0F 1E 1C 3C 0E 1F 
     114.  00:4837                          DB $00,$1E,$03,$1F,$18,$08,$00,$00
     114.  00:4837  00 1E 03 1F 18 08 00 00 
     115.  00:483F                          DB $00,$00,$30,$18,$2C,$00,$00,$00
     115.  00:483F  00 00 30 18 2C 00 00 00 
     116.  00:4847                          DB $30,$00,$90,$C0,$00,$00,$00,$00
     116.  00:4847  30 00 90 C0 00 00 00 00 
     117.  00:484F                          ; mask 2
     118.  00:484F                          DB $00,$00,$00,$00,$1C,$00,$00,$00
     118.  00:484F  00 00 00 00 1C 00 00 00 
     119.  00:4857                          DB $3C,$00,$0F,$1C,$00,$00,$00,$00
     119.  00:4857  3C 00 0F 1C 00 00 00 00 
     120.  00:485F                          DB $00,$00,$00,$00,$0C,$00,$00,$00
     120.  00:485F  00 00 00 00 0C 00 00 00 
     121.  00:4867                          DB $00,$00,$80,$00,$00,$00,$00,$00
     121.  00:4867  00 00 80 00 00 00 00 00 
     122.  00:486F                      
     123.  00:486F                          ; --- Slot 2
     124.  00:486F                          ; mask 0
     125.  00:486F                          DB $03,$07,$00,$01,$03,$03,$01,$00
     125.  00:486F  03 07 00 01 03 03 01 00 
     126.  00:4877                          DB $03,$01,$0F,$1F,$1B,$0B,$02,$03
     126.  00:4877  03 01 0F 1F 1B 0B 02 03 
     127.  00:487F                          DB $E0,$F8,$C0,$E0,$D0,$F8,$F0,$E0
     127.  00:487F  E0 F8 C0 E0 D0 F8 F0 E0 
     128.  00:4887                          DB $C0,$F0,$80,$C0,$C0,$80,$C0,$60
     128.  00:4887  C0 F0 80 C0 C0 80 C0 60 
     129.  00:488F                          ; mask 1
     130.  00:488F                          DB $00,$00,$0F,$1E,$1C,$3C,$0E,$1F
     130.  00:488F  00 00 0F 1E 1C 3C 0E 1F 
     131.  00:4897                          DB $00,$00,$03,$1C,$18,$08,$00,$00
     131.  00:4897  00 00 03 1C 18 08 00 00 
     132.  00:489F                          DB $00,$00,$30,$18,$2C,$00,$00,$00
     132.  00:489F  00 00 30 18 2C 00 00 00 
     133.  00:48A7                          DB $30,$0C,$8C,$00,$00,$00,$00,$00
     133.  00:48A7  30 0C 8C 00 00 00 00 00 
     134.  00:48AF                          ; mask 2
     135.  00:48AF                          DB $00,$00,$00,$00,$1C,$00,$00,$00
     135.  00:48AF  00 00 00 00 1C 00 00 00 
     136.  00:48B7                          DB $3C,$1E,$00,$00,$00,$00,$00,$00
     136.  00:48B7  3C 1E 00 00 00 00 00 00 
     137.  00:48BF                          DB $00,$00,$00,$00,$0C,$00,$00,$00
     137.  00:48BF  00 00 00 00 0C 00 00 00 
     138.  00:48C7                          DB $00,$00,$0C,$00,$00,$00,$00,$00
     138.  00:48C7  00 00 0C 00 00 00 00 00 
     139.  00:48CF                      
     140.  00:48CF                      SPRITE_PATTERN:    
     141.  00:48CF                          ; DOWN 1 
     142.  00:48CF                          ; mask 0 - 00h
     143.  00:48CF                          DB $03,$0F,$00,$0A,$0E,$0D,$07,$03
     143.  00:48CF  03 0F 00 0A 0E 0D 07 03 
     144.  00:48D7                          DB $3E,$7B,$60,$60,$03,$03,$06,$0E
     144.  00:48D7  3E 7B 60 60 03 03 06 0E 
     145.  00:48DF                          DB $E0,$F0,$A0,$90,$70,$B0,$E0,$C0
     145.  00:48DF  E0 F0 A0 90 70 B0 E0 C0 
     146.  00:48E7                          DB $7E,$D8,$06,$00,$C0,$E0,$F0,$00
     146.  00:48E7  7E D8 06 00 C0 E0 F0 00 
     147.  00:48EF                          ; mask 1 - 04h
     148.  00:48EF                          DB $00,$00,$1F,$15,$11,$32,$18,$0C
     148.  00:48EF  00 00 1F 15 11 32 18 0C 
     149.  00:48F7                          DB $01,$00,$03,$03,$01,$01,$00,$00
     149.  00:48F7  01 00 03 03 01 01 00 00 
     150.  00:48FF                          DB $00,$00,$58,$68,$8C,$48,$1C,$30
     150.  00:48FF  00 00 58 68 8C 48 1C 30 
     151.  00:4907                          DB $80,$06,$C0,$C0,$80,$80,$80,$00
     151.  00:4907  80 06 C0 C0 80 80 80 00 
     152.  00:490F                          ; mask 2 - 08h
     153.  00:490F                          DB $00,$00,$00,$00,$00,$30,$00,$00
     153.  00:490F  00 00 00 00 00 30 00 00 
     154.  00:4917                          DB $00,$04,$00,$00,$00,$00,$00,$00
     154.  00:4917  00 04 00 00 00 00 00 00 
     155.  00:491F                          DB $00,$00,$00,$00,$00,$08,$00,$00
     155.  00:491F  00 00 00 00 00 08 00 00 
     156.  00:4927                          DB $00,$20,$00,$00,$00,$00,$00,$00
     156.  00:4927  00 20 00 00 00 00 00 00 
     157.  00:492F                      
     158.  00:492F                          ; DOWN 2 
     159.  00:492F                          ; mask 0 - 0Ch
     160.  00:492F                          DB $03,$0F,$00,$0A,$0E,$0D,$07,$03
     160.  00:492F  03 0F 00 0A 0E 0D 07 03 
     161.  00:4937                          DB $7E,$1B,$60,$00,$03,$07,$0E,$00
     161.  00:4937  7E 1B 60 00 03 07 0E 00 
     162.  00:493F                          DB $E0,$F0,$A0,$90,$70,$B0,$E0,$C0
     162.  00:493F  E0 F0 A0 90 70 B0 E0 C0 
     163.  00:4947                          DB $7C,$DE,$06,$06,$C0,$C0,$E0,$70
     163.  00:4947  7C DE 06 06 C0 C0 E0 70 
     164.  00:494F                          ; mask 1 - 10h
     165.  00:494F                          DB $00,$00,$1F,$15,$11,$32,$18,$0C
     165.  00:494F  00 00 1F 15 11 32 18 0C 
     166.  00:4957                          DB $01,$60,$03,$03,$01,$01,$00,$00
     166.  00:4957  01 60 03 03 01 01 00 00 
     167.  00:495F                          DB $00,$00,$58,$68,$8C,$48,$1C,$30
     167.  00:495F  00 00 58 68 8C 48 1C 30 
     168.  00:4967                          DB $80,$00,$C0,$C0,$80,$80,$80,$00
     168.  00:4967  80 00 C0 C0 80 80 80 00 
     169.  00:496F                          ; mask 2 - 14h
     170.  00:496F                          DB $00,$00,$00,$00,$00,$30,$00,$00
     170.  00:496F  00 00 00 00 00 30 00 00 
     171.  00:4977                          DB $00,$04,$00,$00,$00,$00,$00,$00
     171.  00:4977  00 04 00 00 00 00 00 00 
     172.  00:497F                          DB $00,$00,$00,$00,$00,$08,$00,$00
     172.  00:497F  00 00 00 00 00 08 00 00 
     173.  00:4987                          DB $00,$20,$00,$00,$00,$00,$00,$00
     173.  00:4987  00 20 00 00 00 00 00 00 
     174.  00:498F                          
     175.  00:498F                          ;Ghost 1 Left - 18H
     176.  00:498F                          DB 00h,01h,07h,0fh,1fh,3fh,7fh,01h
     176.  00:498F  00 01 07 0F 1F 3F 7F 01 
     177.  00:4997                          DB $15,$14,$7f,$3f,$3f,$3f,$3f,$7f
     177.  00:4997  15 14 7F 3F 3F 3F 3F 7F 
     178.  00:499F                          DB $00,$e0,$80,$00,$00,$80,$80,$c0
     178.  00:499F  00 E0 80 00 00 80 80 C0 
     179.  00:49A7                          DB $c0,$e0,$f0,$f8,$fc,$fc,$fe,$ff  
     179.  00:49A7  C0 E0 F0 F8 FC FC FE FF 
     180.  00:49AF                          
     181.  00:49AF                          ; Ghost 2 Left - 1Ch
     182.  00:49AF                          DB $00,$01,$07,$0f,$1f,$3f,$7f,$01
     182.  00:49AF  00 01 07 0F 1F 3F 7F 01 
     183.  00:49B7                          DB $15,$14,$7f,$3f,$3f,$7f,$7f,$83
     183.  00:49B7  15 14 7F 3F 3F 7F 7F 83 
     184.  00:49BF                          DB $00,$e0,$80,$00,$00,$80,$80,$c0
     184.  00:49BF  00 E0 80 00 00 80 80 C0 
     185.  00:49C7                          DB $c0,$e0,$e0,$f0,$f8,$fc,$fe,$ff      
     185.  00:49C7  C0 E0 E0 F0 F8 FC FE FF 
     186.  00:49CF                      
     187.  00:49CF                          ; Ghost 1 Right - 20h
     188.  00:49CF                          DB $00,$07,$01,$00,$00,$01,$01,$03
     188.  00:49CF  00 07 01 00 00 01 01 03 
     189.  00:49D7                          DB $03,$07,$07,$0f,$1f,$3f,$7f,$ff
     189.  00:49D7  03 07 07 0F 1F 3F 7F FF 
     190.  00:49DF                          DB $00,$80,$e0,$f0,$f8,$fc,$fe,$80
     190.  00:49DF  00 80 E0 F0 F8 FC FE 80 
     191.  00:49E7                          DB $a8,$28,$fe,$fc,$fc,$fe,$fe,$c1
     191.  00:49E7  A8 28 FE FC FC FE FE C1 
     192.  00:49EF                          
     193.  00:49EF                          ; Ghost 2 Right - 24h
     194.  00:49EF                          DB $00,$07,$01,$00,$00,$01,$01,$03
     194.  00:49EF  00 07 01 00 00 01 01 03 
     195.  00:49F7                          DB $03,$07,$0f,$1f,$3f,$3f,$7f,$ff
     195.  00:49F7  03 07 0F 1F 3F 3F 7F FF 
     196.  00:49FF                          DB $00,$80,$e0,$f0,$f8,$fc,$fe,$80
     196.  00:49FF  00 80 E0 F0 F8 FC FE 80 
     197.  00:4A07                          DB $a8,$28,$fe,$fc,$fc,$fc,$fc,$fe  
     197.  00:4A07  A8 28 FE FC FC FC FC FE 
     198.  00:4A0F                      
     199.  00:4A0F                          ; Boomerang - RIGHT
     200.  00:4A0F                          ; mask 0 - 28h
     201.  00:4A0F                          ;DB $00,$00,$00,$03,$07,$0F,$1E,$1E
     202.  00:4A0F                          ;DB $1E,$1C,$1E,$0F,$07,$03,$00,$00
     203.  00:4A0F                          ;DB $00,$00,$00,$00,$80,$C0,$E0,$F0
     204.  00:4A0F                          ;DB $F8,$70,$E0,$C0,$80,$00,$00,$00
     205.  00:4A0F                          DB $00,$00,$00,$01,$01,$01,$01,$01
     205.  00:4A0F  00 00 00 01 01 01 01 01 
     206.  00:4A17                          DB $01,$01,$07,$07,$01,$01,$00,$00
     206.  00:4A17  01 01 07 07 01 01 00 00 
     207.  00:4A1F                          DB $00,$00,$00,$80,$80,$80,$80,$80
     207.  00:4A1F  00 00 00 80 80 80 80 80 
     208.  00:4A27                          DB $80,$80,$E0,$E0,$80,$80,$00,$00
     208.  00:4A27  80 80 E0 E0 80 80 00 00 
     209.  00:4A2F                      
     210.  00:4A2F                      
     211.  00:4A2F                          ; Boomerang - LEFT
     212.  00:4A2F                          ; mask 0 - 2Ch
     213.  00:4A2F                          ;DB $00,$00,$00,$00,$01,$03,$07,$0F
     214.  00:4A2F                          ;DB $1F,$0E,$07,$03,$01,$00,$00,$00
     215.  00:4A2F                          ;DB $00,$00,$00,$C0,$E0,$F0,$78,$78
     216.  00:4A2F                          ;DB $78,$38,$78,$F0,$E0,$C0,$00,$00
     217.  00:4A2F                          DB $00,$00,$00,$01,$01,$01,$01,$01
     217.  00:4A2F  00 00 00 01 01 01 01 01 
     218.  00:4A37                          DB $01,$01,$07,$07,$01,$01,$00,$00
     218.  00:4A37  01 01 07 07 01 01 00 00 
     219.  00:4A3F                          DB $00,$00,$00,$80,$80,$80,$80,$80
     219.  00:4A3F  00 00 00 80 80 80 80 80 
     220.  00:4A47                          DB $80,$80,$E0,$E0,$80,$80,$00,$00
     220.  00:4A47  80 80 E0 E0 80 80 00 00 
     221.  00:4A4F                      
     222.  00:4A4F                      SPRITE_COLOR_TABLE:       
     223.  00:4A4F                           ;DOWN 1
     224.  00:4A4F                          ; attr 0
     225.  00:4A4F                          DB $06,$06,$0B,$0B,$0B,$0B,$0B,$0B
     225.  00:4A4F  06 06 0B 0B 0B 0B 0B 0B 
     226.  00:4A57                          DB $0C,$0C,$0B,$0B,$04,$04,$04,$04
     226.  00:4A57  0C 0C 0B 0B 04 04 04 04 
     227.  00:4A5F                          ; attr 1
     228.  00:4A5F                          DB $00,$00,$46,$46,$46,$44,$46,$46
     228.  00:4A5F  00 00 46 46 46 44 46 46 
     229.  00:4A67                          DB $4B,$4B,$44,$44,$42,$42,$42,$00
     229.  00:4A67  4B 4B 44 44 42 42 42 00 
     230.  00:4A6F                          ; attr 2
     231.  00:4A6F                          DB $00,$00,$00,$00,$00,$42,$00,$00
     231.  00:4A6F  00 00 00 00 00 42 00 00 
     232.  00:4A77                          DB $00,$46,$00,$00,$00,$00,$00,$00
     232.  00:4A77  00 46 00 00 00 00 00 00 
     233.  00:4A7F                               
     234.  00:4A7F                          ; Cada posición ha de corresponder con la tabla de atributos    
     235.  00:4A7F                      
     236.  00:4A7F                          ; Fantasma
     237.  00:4A7F                          DB $08,$08,$08,$08,$08,$08,$08,$08
     237.  00:4A7F  08 08 08 08 08 08 08 08 
     238.  00:4A87                          DB $08,$08,$08,$08,$08,$08,$08,$08
     238.  00:4A87  08 08 08 08 08 08 08 08 
     239.  00:4A8F                          ; Fantasma
     240.  00:4A8F                          ;DB $08,$08,$08,$08,$08,$08,$08,$08
     241.  00:4A8F                          ;DB $08,$08,$08,$08,$08,$08,$08,$08
     242.  00:4A8F                          ; Fantasma
     243.  00:4A8F                          ;DB $08,$08,$08,$08,$08,$08,$08,$08
     244.  00:4A8F                          ;DB $08,$08,$08,$08,$08,$08,$08,$08
     245.  00:4A8F                          ; Fantasma
     246.  00:4A8F                          ;DB $08,$08,$08,$08,$08,$08,$08,$08
     247.  00:4A8F                          ;DB $08,$08,$08,$08,$08,$08,$08,$08    
     248.  00:4A8F                          ; Me ahorro los colores del fantasma, la 4a posicion del array de atributos será para el disparo
     249.  00:4A8F                          ; Boomerang
     250.  00:4A8F                          ;DB $08,$08,$08,$08,$08,$08,$08,$08
     251.  00:4A8F                          ;DB $08,$08,$08,$08,$08,$08,$08,$08
     252.  00:4A8F                          DB $00,$00,$00,$0F,$0F,$0F,$0F,$0F
     252.  00:4A8F  00 00 00 0F 0F 0F 0F 0F 
     253.  00:4A97                          DB $0F,$0F,$0F,$0F,$0F,$0F,$00,$00
     253.  00:4A97  0F 0F 0F 0F 0F 0F 00 00 
     254.  00:4A9F                          ; Boomerang
     255.  00:4A9F                          ;DB $08,$08,$08,$08,$08,$08,$08,$08
     256.  00:4A9F                          ;DB $08,$08,$08,$08,$08,$08,$08,$08
     257.  00:4A9F                          DB $00,$00,$00,$0F,$0F,$0F,$0F,$0F
     257.  00:4A9F  00 00 00 0F 0F 0F 0F 0F 
     258.  00:4AA7                          DB $0F,$0F,$0F,$0F,$0F,$0F,$00,$00
     258.  00:4AA7  0F 0F 0F 0F 0F 0F 00 00 
     259.  00:4AAF                      
     260.  00:4AAF                      SPRITE_COLOR_P1_UP:
     261.  00:4AAF                          ;UP 1
     262.  00:4AAF                          ; attr 0
     263.  00:4AAF                          DB $06,$06,$06,$06,$06,$06,$06,$06
     263.  00:4AAF  06 06 06 06 06 06 06 06 
     264.  00:4AB7                          DB $0C,$0C,$0B,$0B,$04,$04,$04,$04
     264.  00:4AB7  0C 0C 0B 0B 04 04 04 04 
     265.  00:4ABF                          ; attr 1
     266.  00:4ABF                          DB $00,$00,$00,$00,$00,$00,$00,$00
     266.  00:4ABF  00 00 00 00 00 00 00 00 
     267.  00:4AC7                          DB $46,$4B,$44,$44,$42,$42,$42,$00
     267.  00:4AC7  46 4B 44 44 42 42 42 00 
     268.  00:4ACF                          ; attr 2
     269.  00:4ACF                          DB $00,$00,$00,$00,$00,$00,$00,$00
     269.  00:4ACF  00 00 00 00 00 00 00 00 
     270.  00:4AD7                          DB $00,$46,$42,$42,$00,$00,$00,$00   
     270.  00:4AD7  00 46 42 42 00 00 00 00 
     271.  00:4ADF                          
     272.  00:4ADF                          ;SPRITE_COLOR_P1_UP2:
     273.  00:4ADF                          ;UP 1
     274.  00:4ADF                          ; attr 0
     275.  00:4ADF                          DB $06,$06,$06,$06,$06,$06,$06,$06
     275.  00:4ADF  06 06 06 06 06 06 06 06 
     276.  00:4AE7                          DB $0C,$0C,$0B,$0B,$04,$04,$04,$04
     276.  00:4AE7  0C 0C 0B 0B 04 04 04 04 
     277.  00:4AEF                          ; attr 1
     278.  00:4AEF                          DB $00,$00,$00,$00,$00,$00,$00,$00
     278.  00:4AEF  00 00 00 00 00 00 00 00 
     279.  00:4AF7                          DB $46,$4B,$44,$44,$42,$42,$42,$00
     279.  00:4AF7  46 4B 44 44 42 42 42 00 
     280.  00:4AFF                          ; attr 2
     281.  00:4AFF                          DB $00,$00,$00,$00,$00,$00,$00,$00
     281.  00:4AFF  00 00 00 00 00 00 00 00 
     282.  00:4B07                          DB $00,$46,$42,$42,$00,$00,$00,$00   
     282.  00:4B07  00 46 42 42 00 00 00 00 
     283.  00:4B0F                      
     284.  00:4B0F                      SPRITE_COLOR_P1_DOWN:
     285.  00:4B0F                          ;DOWN 1
     286.  00:4B0F                          ; attr 0
     287.  00:4B0F                          DB $06,$06,$0B,$0B,$0B,$0B,$0B,$0B
     287.  00:4B0F  06 06 0B 0B 0B 0B 0B 0B 
     288.  00:4B17                          DB $0C,$0C,$0B,$0B,$04,$04,$04,$04
     288.  00:4B17  0C 0C 0B 0B 04 04 04 04 
     289.  00:4B1F                          ; attr 1
     290.  00:4B1F                          DB $00,$00,$46,$46,$46,$44,$46,$46
     290.  00:4B1F  00 00 46 46 46 44 46 46 
     291.  00:4B27                          DB $4B,$4B,$44,$44,$42,$42,$42,$00
     291.  00:4B27  4B 4B 44 44 42 42 42 00 
     292.  00:4B2F                          ; attr 2
     293.  00:4B2F                          DB $00,$00,$00,$00,$00,$42,$00,$00
     293.  00:4B2F  00 00 00 00 00 42 00 00 
     294.  00:4B37                          DB $00,$46,$00,$00,$00,$00,$00,$00        
     294.  00:4B37  00 46 00 00 00 00 00 00 
     295.  00:4B3F                      
     296.  00:4B3F                          ;SPRITE_COLOR_P1_DOWN2:
     297.  00:4B3F                          ;DOWN 1
     298.  00:4B3F                          ; attr 0
     299.  00:4B3F                          DB $06,$06,$0B,$0B,$0B,$0B,$0B,$0B
     299.  00:4B3F  06 06 0B 0B 0B 0B 0B 0B 
     300.  00:4B47                          DB $0C,$0C,$0B,$0B,$04,$04,$04,$04
     300.  00:4B47  0C 0C 0B 0B 04 04 04 04 
     301.  00:4B4F                          ; attr 1
     302.  00:4B4F                          DB $00,$00,$46,$46,$46,$44,$46,$46
     302.  00:4B4F  00 00 46 46 46 44 46 46 
     303.  00:4B57                          DB $4B,$4B,$44,$44,$42,$42,$42,$00
     303.  00:4B57  4B 4B 44 44 42 42 42 00 
     304.  00:4B5F                          ; attr 2
     305.  00:4B5F                          DB $00,$00,$00,$00,$00,$42,$00,$00
     305.  00:4B5F  00 00 00 00 00 42 00 00 
     306.  00:4B67                          DB $00,$46,$00,$00,$00,$00,$00,$00        
     306.  00:4B67  00 46 00 00 00 00 00 00 
     307.  00:4B6F                      
     308.  00:4B6F                      SPRITE_COLOR_P1_LEFT:
     309.  00:4B6F                          ; attr 0
     310.  00:4B6F                          DB $06,$06,$0B,$0B,$0B,$0B,$0B,$0B
     310.  00:4B6F  06 06 0B 0B 0B 0B 0B 0B 
     311.  00:4B77                          DB $0C,$0C,$0B,$0B,$04,$04,$04,$04
     311.  00:4B77  0C 0C 0B 0B 04 04 04 04 
     312.  00:4B7F                          ; attr 1
     313.  00:4B7F                          DB $00,$00,$46,$46,$44,$46,$46,$46
     313.  00:4B7F  00 00 46 46 44 46 46 46 
     314.  00:4B87                          DB $4B,$46,$4C,$44,$42,$42,$00,$00
     314.  00:4B87  4B 46 4C 44 42 42 00 00 
     315.  00:4B8F                          ; attr 2
     316.  00:4B8F                          DB $00,$00,$00,$00,$42,$00,$00,$00
     316.  00:4B8F  00 00 00 00 42 00 00 00 
     317.  00:4B97                          DB $46,$00,$46,$42,$00,$00,$00,$00
     317.  00:4B97  46 00 46 42 00 00 00 00 
     318.  00:4B9F                          
     319.  00:4B9F                          ;SPRITE_COLOR_P1_LEFT2:
     320.  00:4B9F                          ; attr 0
     321.  00:4B9F                          DB $06,$06,$0B,$0B,$0B,$0B,$0B,$0B
     321.  00:4B9F  06 06 0B 0B 0B 0B 0B 0B 
     322.  00:4BA7                          DB $0C,$0C,$06,$04,$04,$04,$04,$04
     322.  00:4BA7  0C 0C 06 04 04 04 04 04 
     323.  00:4BAF                          ; attr 1
     324.  00:4BAF                          DB $00,$00,$46,$46,$44,$46,$46,$46
     324.  00:4BAF  00 00 46 46 44 46 46 46 
     325.  00:4BB7                          DB $4B,$4B,$4A,$42,$42,$42,$00,$00
     325.  00:4BB7  4B 4B 4A 42 42 42 00 00 
     326.  00:4BBF                          ; attr 2
     327.  00:4BBF                          DB $00,$00,$00,$00,$42,$00,$00,$00
     327.  00:4BBF  00 00 00 00 42 00 00 00 
     328.  00:4BC7                          DB $46,$46,$41,$00,$00,$00,$00,$00
     328.  00:4BC7  46 46 41 00 00 00 00 00 
     329.  00:4BCF                          
     330.  00:4BCF                      SPRITE_COLOR_P1_RIGHT:
     331.  00:4BCF                          ; attr 0
     332.  00:4BCF                          DB $06,$06,$0B,$0B,$0B,$0B,$0B,$0B
     332.  00:4BCF  06 06 0B 0B 0B 0B 0B 0B 
     333.  00:4BD7                          DB $0C,$0C,$0B,$0B,$04,$04,$04,$04
     333.  00:4BD7  0C 0C 0B 0B 04 04 04 04 
     334.  00:4BDF                          ; attr 1
     335.  00:4BDF                          DB $00,$00,$46,$46,$44,$46,$46,$46
     335.  00:4BDF  00 00 46 46 44 46 46 46 
     336.  00:4BE7                          DB $4B,$46,$4C,$44,$42,$42,$00,$00
     336.  00:4BE7  4B 46 4C 44 42 42 00 00 
     337.  00:4BEF                          ; attr 2
     338.  00:4BEF                          DB $00,$00,$00,$00,$42,$00,$00,$00
     338.  00:4BEF  00 00 00 00 42 00 00 00 
     339.  00:4BF7                          DB $46,$00,$46,$42,$00,$00,$00,$00
     339.  00:4BF7  46 00 46 42 00 00 00 00 
     340.  00:4BFF                      
     341.  00:4BFF                          ;SPRITE_COLOR_P1_RIGHT2:
     342.  00:4BFF                          ; attr 0
     343.  00:4BFF                          DB $06,$06,$0B,$0B,$0B,$0B,$0B,$0B
     343.  00:4BFF  06 06 0B 0B 0B 0B 0B 0B 
     344.  00:4C07                          DB $0C,$0C,$06,$04,$04,$04,$04,$04
     344.  00:4C07  0C 0C 06 04 04 04 04 04 
     345.  00:4C0F                          ; attr 1
     346.  00:4C0F                          DB $00,$00,$46,$46,$44,$46,$46,$46
     346.  00:4C0F  00 00 46 46 44 46 46 46 
     347.  00:4C17                          DB $4B,$4B,$4A,$42,$42,$42,$00,$00
     347.  00:4C17  4B 4B 4A 42 42 42 00 00 
     348.  00:4C1F                          ; attr 2
     349.  00:4C1F                          DB $00,$00,$00,$00,$42,$00,$00,$00
     349.  00:4C1F  00 00 00 00 42 00 00 00 
     350.  00:4C27                          DB $46,$46,$41,$00,$00,$00,$00,$00
     350.  00:4C27  46 46 41 00 00 00 00 00 
     351.  00:4C2F                              
     352.  00:4C2F                      mapa:      
     353.  00:4C2F                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#00,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     353.  00:4C2F  01 01 01 01 01 01 01 01 01 01 01 01 01 00 00 00 
     353.  00:4C3F  00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     354.  00:4C4F                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     354.  00:4C4F  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     354.  00:4C5F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     355.  00:4C6F                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     355.  00:4C6F  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     355.  00:4C7F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     356.  00:4C8F                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     356.  00:4C8F  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     356.  00:4C9F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     357.  00:4CAF                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     357.  00:4CAF  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     357.  00:4CBF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     358.  00:4CCF                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     358.  00:4CCF  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     358.  00:4CDF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     359.  00:4CEF                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01       
     359.  00:4CEF  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     359.  00:4CFF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     360.  00:4D0F                            db #01,#00,#00,#00,#00,#01,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     360.  00:4D0F  01 00 00 00 00 01 01 00 00 00 00 00 00 00 00 00 
     360.  00:4D1F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     361.  00:4D2F                            
     362.  00:4D2F                            db #01,#00,#00,#00,#00,#01,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     362.  00:4D2F  01 00 00 00 00 01 01 00 00 00 00 00 00 00 00 00 
     362.  00:4D3F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     363.  00:4D4F                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#01,#00,#00,#00,#00,#00,#00,#01        
     363.  00:4D4F  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     363.  00:4D5F  00 00 00 00 00 00 00 01 01 00 00 00 00 00 00 01 
     364.  00:4D6F                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#01,#00,#00,#00,#00,#00,#00,#01        
     364.  00:4D6F  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     364.  00:4D7F  00 00 00 00 00 00 00 01 01 00 00 00 00 00 00 01 
     365.  00:4D8F                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     365.  00:4D8F  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     365.  00:4D9F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     366.  00:4DAF                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     366.  00:4DAF  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     366.  00:4DBF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     367.  00:4DCF                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     367.  00:4DCF  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     367.  00:4DDF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     368.  00:4DEF                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     368.  00:4DEF  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     368.  00:4DFF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     369.  00:4E0F                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     369.  00:4E0F  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     369.  00:4E1F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     370.  00:4E2F                      
     371.  00:4E2F                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     371.  00:4E2F  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     371.  00:4E3F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     372.  00:4E4F                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     372.  00:4E4F  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     372.  00:4E5F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     373.  00:4E6F                            db #01,#00,#00,#00,#01,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     373.  00:4E6F  01 00 00 00 01 01 00 00 00 00 00 00 00 00 00 00 
     373.  00:4E7F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     374.  00:4E8F                            db #01,#00,#00,#00,#01,#01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     374.  00:4E8F  01 00 00 00 01 01 00 00 00 00 00 00 00 00 00 00 
     374.  00:4E9F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     375.  00:4EAF                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     375.  00:4EAF  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     375.  00:4EBF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     376.  00:4ECF                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     376.  00:4ECF  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     376.  00:4EDF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     377.  00:4EEF                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01        
     377.  00:4EEF  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     377.  00:4EFF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 
     378.  00:4F0F                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     378.  00:4F0F  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     378.  00:4F1F  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     379.  00:4F2F                            
     380.  00:4F2F                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     380.  00:4F2F  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     380.  00:4F3F  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     381.  00:4F4F                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     381.  00:4F4F  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     381.  00:4F5F  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     382.  00:4F6F                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01   
     382.  00:4F6F  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     382.  00:4F7F  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     383.  00:4F8F                            
     384.  00:4F8F                      
     385.  00:4F8F                      mapa2:      
     386.  00:4F8F                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#01,#00   
     386.  00:4F8F  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     386.  00:4F9F  01 01 01 01 01 01 01 01 01 01 01 01 00 00 01 00 
     387.  00:4FAF                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00        
     387.  00:4FAF  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     387.  00:4FBF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 
     388.  00:4FCF                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00        
     388.  00:4FCF  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     388.  00:4FDF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 
     389.  00:4FEF                            db #01,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00   
     389.  00:4FEF  01 00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 
     389.  00:4FFF  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 00 
     390.  00:500F                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00        
     390.  00:500F  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     390.  00:501F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 
     391.  00:502F                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00        
     391.  00:502F  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     391.  00:503F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 
     392.  00:504F                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#01,#00   
     392.  00:504F  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     392.  00:505F  01 01 01 01 01 01 01 01 01 01 01 01 00 00 01 00 
     393.  00:506F                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00
     393.  00:506F  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     393.  00:507F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 
     394.  00:508F                            
     395.  00:508F                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00        
     395.  00:508F  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     395.  00:509F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 
     396.  00:50AF                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00   
     396.  00:50AF  01 01 01 01 01 01 01 01 01 01 01 01 01 01 00 00 
     396.  00:50BF  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 00 
     397.  00:50CF                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00        
     397.  00:50CF  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     397.  00:50DF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 
     398.  00:50EF                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00        
     398.  00:50EF  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     398.  00:50FF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 
     399.  00:510F                            db #01,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00   
     399.  00:510F  01 00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 
     399.  00:511F  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 00 
     400.  00:512F                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00        
     400.  00:512F  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     400.  00:513F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 
     401.  00:514F                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00  
     401.  00:514F  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     401.  00:515F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 
     402.  00:516F                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#01,#00         
     402.  00:516F  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     402.  00:517F  01 01 01 01 01 01 01 01 01 01 01 01 00 00 01 00 
     403.  00:518F                      
     404.  00:518F                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00  
     404.  00:518F  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     404.  00:519F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 
     405.  00:51AF                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00  
     405.  00:51AF  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     405.  00:51BF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 
     406.  00:51CF                            db #01,#00,#00,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00   
     406.  00:51CF  01 00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 
     406.  00:51DF  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 00 
     407.  00:51EF                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00        
     407.  00:51EF  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     407.  00:51FF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 
     408.  00:520F                            db #01,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00        
     408.  00:520F  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     408.  00:521F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 
     409.  00:522F                            db #01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#01,#00,#00,#01,#00   
     409.  00:522F  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
     409.  00:523F  01 01 01 01 01 01 01 01 01 01 01 01 00 00 01 00 
     410.  00:524F                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00,#00,#01,#00        
     410.  00:524F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     410.  00:525F  00 00 00 00 00 00 00 00 00 00 00 01 00 00 01 00 
     411.  00:526F                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#01,#00,#00,#01,#00        
     411.  00:526F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     411.  00:527F  00 00 00 00 00 00 00 00 00 00 00 01 00 00 01 00 
     412.  00:528F                      
     413.  00:528F                      mapa0:
     414.  00:528F                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     414.  00:528F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     414.  00:529F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     415.  00:52AF                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     415.  00:52AF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     415.  00:52BF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     416.  00:52CF                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     416.  00:52CF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     416.  00:52DF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     417.  00:52EF                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     417.  00:52EF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     417.  00:52FF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     418.  00:530F                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     418.  00:530F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     418.  00:531F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     419.  00:532F                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     419.  00:532F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     419.  00:533F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     420.  00:534F                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     420.  00:534F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     420.  00:535F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     421.  00:536F                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     421.  00:536F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     421.  00:537F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     422.  00:538F                            
     423.  00:538F                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     423.  00:538F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     423.  00:539F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     424.  00:53AF                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     424.  00:53AF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     424.  00:53BF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     425.  00:53CF                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     425.  00:53CF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     425.  00:53DF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     426.  00:53EF                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     426.  00:53EF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     426.  00:53FF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     427.  00:540F                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     427.  00:540F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     427.  00:541F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     428.  00:542F                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     428.  00:542F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     428.  00:543F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     429.  00:544F                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     429.  00:544F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     429.  00:545F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     430.  00:546F                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     430.  00:546F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     430.  00:547F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     431.  00:548F                            
     432.  00:548F                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     432.  00:548F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     432.  00:549F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     433.  00:54AF                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     433.  00:54AF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     433.  00:54BF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     434.  00:54CF                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     434.  00:54CF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     434.  00:54DF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     435.  00:54EF                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     435.  00:54EF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     435.  00:54FF  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     436.  00:550F                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     436.  00:550F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     436.  00:551F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     437.  00:552F                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     437.  00:552F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     437.  00:553F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     438.  00:554F                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     438.  00:554F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     438.  00:555F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     439.  00:556F                            db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00        
     439.  00:556F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     439.  00:557F  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
     440.  00:558F                            
     533   00:558F                      
     534   00:558F  (01)                 PAGE 1
     535   01:8000                      ; CODE O NO
     536   01:8000                      
     537   01:8000  (02)                 PAGE 2
     538   02:8000                       
     539   02:8000  (03)                 PAGE 3
     540   03:8000                      
     541   03:8000  (04)                 PAGE 4
     542   04:8000  (05)                 PAGE 5
     543   05:8000  (06)                 PAGE 6
     544   06:8000                      
     545   06:8000  (07)                 PAGE 7
     546   07:8000                      CEMENTER
     547   07:8000  (4000)               INCBIN "gfx\CEMENTER0.SC5",#7,#4000			; Cada página tiene 16K = 4000h
     548   07:C000  (08)                 PAGE 8
     549   08:8000  (2A00)               INCBIN "gfx\CEMENTER0.SC5",#4007			; Cada página tiene 16K = 4000h 
     550   08:AA00  (09)                 PAGE 9
     551   09:8000                      GRAPHIC
     552   09:8000  (4000)               INCBIN "gfx\BTH.SR8",#7,#4000			; Cada página tiene 16K = 4000h
     553   09:C000  (0A)                 PAGE 10
     554   0A:8000  (4000)               INCBIN "gfx\BTH.SR8",#4007,#4000
     555   0A:C000                      
     556   0A:C000  (0B)                 PAGE 11
     557   0B:8000  (4000)               INCBIN "gfx\BTH.SR8",#8007,#4000
     558   0B:C000                      
     559   0B:C000  (0C)                 PAGE 12
     560   0C:8000  (1400)               INCBIN "gfx\BTH.SR8",#C007
     561   0C:9400                      
     562   0C:9400  (0D)                 PAGE 13
     563   0D:8000                      
     564   0D:8000  (0E)                 PAGE 14
     565   0E:8000                      
     566   0E:8000  (0F)                 PAGE 15
     567   0F:C000                      ;---------------------------------------------------------
     568   0F:C000                      ; Variables
     569   0F:C000                      ;---------------------------------------------------------
     570   0F:C000                      	
     571   0F:C000  (C000)              	MAP #C000  ;Ram page 3
     572   0F:C000                      ;	MAP #E5FF  ;Ram page 3
     573   0F:C000                      ;NAME #1  ;a byte is reserved for this variable
     574   0F:C000                      ;ETC
     575   0F:C000                      ;
     576   0F:C000                      	include "include\BTH_RAM.asm"
       1.  0F:C000  00                  JIFFY_TEMP DB $00
       2.  0F:C001  00                  CHAR_SPEED_X DB $00
       3.  0F:C002  00                  CHAR_SPEED_Y DB $00
       4.  0F:C003  00                  CHAR_SPEED_X_GHOST DB $00
       5.  0F:C004  00 (1)              CHAR_GHOST_DEAD DS 1
       6.  0F:C005  00                  CHAR_DIR_GHOST1 DB $00      ; $00 - LEFT, $FF - RIGHT
       7.  0F:C006  00                  CHAR_DIR_MAIN DB $00        ; $00 - UP, $01 - DOWN, $02 - LEFT, $03 - RIGHT
       8.  0F:C007  00 (1)              CHAR_NEW_DIR_MAIN DS 1
       9.  0F:C008  00 (1)              CHAR_MAIN_SHOOT DS 1        ; $01 - SHOOT LEFT $02 - SHOOT RIGHT
      10.  0F:C009  00 (1)              CHAR_MIN_STEP DS 1          ; número de ciclos antes de cambiar de patrón
      11.  0F:C00A  00 (1)              CHAR_DISTANCE_SHOOT DS 1
      12.  0F:C00B  00 (1)              CHAR_SPEED_SHOOT DS 1
      13.  0F:C00C                      SPRITE_ATTRS:
      14.  0F:C00C  00 (128)                DS 128
      15.  0F:C08C                      SLOTBIOS:
      16.  0F:C08C  00 (1)                  DS 1
      17.  0F:C08D                      SLOTGAME:
      18.  0F:C08D  00 (1)                  DS 1
      19.  0F:C08E                      SLOTRAM:
      20.  0F:C08E  00 (1)                  DS 1
      21.  0F:C08F                      SPRITE_PTR_REPLACE:
      22.  0F:C08F  00 (2)                  DS 2
      23.  0F:C091                      SPRITE_COLOR_REPLACE:
      24.  0F:C091  00 (2)                  DS 2
      25.  0F:C093                      SPRITE_COLOR_REPLACE2:
      26.  0F:C093  00 (2)                  DS 2
      27.  0F:C095                      BITMAP:
      28.  0F:C095  00 (2)                  DS 2
     577   0F:C097  (0000)              	ENDMAP

    LABELS
-------------------------------------------------
00:00006000 X _bank1
00:00007000   _bank2
00:0000009F   CHGET
00:000000A2 X CHPUT
00:0000005F   CHGMOD
00:0000005C   LDIRVM
00:0000013E X RDVDP
00:00000047   WRTVDP
00:0000F3DB   CLIKSW
00:00000141   SNSMAT
00:0000FC9E X JIFFY
00:00000041 X DISSCR
00:00000044 X ENASCR
00:00000072 X INIGRP
00:00000138   RSLREG
00:00000024   ENASLT
00:00000001 X ROMMODE
00:00000007   KB_RIGHT
00:00000006   KB_DOWN
00:00000005   KB_UP
00:00000004   KB_LEFT
00:00000003   KB_DEL
00:00000000   KB_SPACE
00:00000001   MOV_SPEED
00:00000001   MOV_SPEED_GHOST
00:00000003   MOV_SPEED_SHOOT
00:00000030   MAX_DISTANCE_SHOOT
00:00000004   MAX_CHAR_STEPS
00:0000FFE8   REG9SAV
00:00000098   PORT_0
00:00000099   PORT_1
00:0000009A X PORT_2
00:0000009B X PORT_3
00:0000F3E0   RG15AV
00:0000F3E9   FORCLR
00:00004010   check_spr_collision
00:0000401D   check_spr_collision.no_collision
00:00004020   get_bloque_en_X_Y
00:00004040   SetVdp_Write
00:0000405C   Set212Lines
00:00004068   ClearVram_MSX2
00:00004072   ClearVram_MSX2.loop_2
00:00004074   ClearVram_MSX2.loop_1
00:00004076   ClearVram_MSX2.loop
00:00004083   opening_screen
00:000040A6 X load_screen
00:000040C9   load_screen2
00:000040EB   _vdpsetvramwr
00:000040FC X _vdpsetvramwr14
00:00004105   GETSLOT
00:0000411C   EXIT
00:0000411E   SETPAGES32K
00:00004123   NOPRET
00:00004131   SET_SCREEN5_MODE
00:00004153   DUMP_SPR_ALL
00:00004178   DUMP_SPR_ATTS
00:00004192 X DUMP_SPR_ATTS.DUMP_SPR_ATTS_END
00:00004193   DUMP_SPR_P1
00:000041B0 X SETPAGES48K
00:000041C4 X SETGAMEPAGE0
00:000041CA X RESTOREBIOS
00:000041CD   SETPAGE0
00:000041FB   SETPAGE0.SETPRIMARY
00:000041FF   START
00:00004235   INIT_CHARS_VARS
00:000042A3   MAIN_LOOP
00:000042C5   MAIN_LOOP.CHANGE_DIR_RIGHT
00:000042D2   MAIN_LOOP.CHANGE_DIR_LEFT
00:000042DB   MAIN_LOOP.check_pattern
00:000042F2   MAIN_LOOP.change_pattern_L
00:000042F9   MAIN_LOOP.check_pattern_RIGHT
00:00004308   MAIN_LOOP.change_pattern_R
00:0000430C   MAIN_LOOP.continue
00:0000431C   MAIN_LOOP.MOVE_SHOOT_RIGHT
00:00004324   MAIN_LOOP.MOVE_SHOOT_LEFT
00:00004329   MAIN_LOOP.CHECK_SHOOT_DISTANCE
00:0000434F   MAIN_LOOP.ADD_DISTANCE
00:0000435F   MAIN_LOOP.KILL_GHOST
00:00004368   MAIN_LOOP.HIDE_SHOOT
00:00004373   MAIN_LOOP.check_KB
00:00004399   SHOOT_MAIN_CHAR
00:000043C7   SHOOT_MAIN_CHAR.SHOOT_RIGHT
00:000043D7   SHOOT_MAIN_CHAR.CONTINUE
00:000043DD   move_up
00:00004413   move_down
00:0000444A   move_right
00:00004497   move_left
00:000044E4   CHECK_DIRECTION_MAIN
00:00004506   CHECK_DIRECTION_MAIN.SET_DIR_DOWN
00:0000451B   CHECK_DIRECTION_MAIN.SET_DIR_UP
00:00004530   CHECK_DIRECTION_MAIN.SET_DIR_RIGHT
00:00004542   CHECK_DIRECTION_MAIN.SET_DIR_LEFT
00:00004557   CHECK_DIRECTION_MAIN.FINISH
00:00004562   UPDATE_MOVEMENT
00:000045B0   UPDATE_MOVEMENT.SET_SPR_1P_2
00:000045C5   UPDATE_MOVEMENT.NO_CHAR_PATTERN_CHANGE
00:000045CB   NO_MOVEMENT
00:000045CF   SPRITE_P1_UP
00:0000468F   SPRITE_P1_DOWN
00:0000474F   SPRITE_P1_LEFT
00:0000480F   SPRITE_P1_RIGHT
00:000048CF   SPRITE_PATTERN
00:00004A4F   SPRITE_COLOR_TABLE
00:00004AAF   SPRITE_COLOR_P1_UP
00:00004B0F   SPRITE_COLOR_P1_DOWN
00:00004B6F   SPRITE_COLOR_P1_LEFT
00:00004BCF   SPRITE_COLOR_P1_RIGHT
00:00004C2F   mapa
00:00004F8F X mapa2
00:0000528F X mapa0
07:00008000   CEMENTER
09:00008000   GRAPHIC
0F:0000C000   JIFFY_TEMP
0F:0000C001   CHAR_SPEED_X
0F:0000C002   CHAR_SPEED_Y
0F:0000C003   CHAR_SPEED_X_GHOST
0F:0000C004   CHAR_GHOST_DEAD
0F:0000C005   CHAR_DIR_GHOST1
0F:0000C006   CHAR_DIR_MAIN
0F:0000C007   CHAR_NEW_DIR_MAIN
0F:0000C008   CHAR_MAIN_SHOOT
0F:0000C009   CHAR_MIN_STEP
0F:0000C00A   CHAR_DISTANCE_SHOOT
0F:0000C00B   CHAR_SPEED_SHOOT
0F:0000C00C   SPRITE_ATTRS
0F:0000C08C   SLOTBIOS
0F:0000C08D   SLOTGAME
0F:0000C08E X SLOTRAM
0F:0000C08F   SPRITE_PTR_REPLACE
0F:0000C091   SPRITE_COLOR_REPLACE
0F:0000C093   SPRITE_COLOR_REPLACE2
0F:0000C095   BITMAP


 Output: .\bth.out
-------------------------------------------------

 Page: 00
  Org: 00004000  Size: *  Used: 00000000

    No output

 Output: BTH.rom
-------------------------------------------------

 Page: 00
  Org: 00004000  Size: 00004000  Used: 00001595

   Address   Length Align   Label
   00004000    5519         check_spr_collision
   0000558F       6         
   00005595   10859       <empty>

 Page: 01
  Org: 00008000  Size: 00004000  Used: 00000000

   00008000   16384       <empty>

 Page: 02
  Org: 00008000  Size: 00004000  Used: 00000000

   00008000   16384       <empty>

 Page: 03
  Org: 00008000  Size: 00004000  Used: 00000000

   00008000   16384       <empty>

 Page: 04
  Org: 00008000  Size: 00004000  Used: 00000000

   00008000   16384       <empty>

 Page: 05
  Org: 00008000  Size: 00004000  Used: 00000000

   00008000   16384       <empty>

 Page: 06
  Org: 00008000  Size: 00004000  Used: 00000000

   00008000   16384       <empty>

 Page: 07
  Org: 00008000  Size: 00004000  Used: 00004000

   Address   Length Align   Label
   00008000   16384         CEMENTER

 Page: 08
  Org: 00008000  Size: 00004000  Used: 00002A00

   Address   Length Align   Label
   00008000   10752         
   0000AA00    5632       <empty>

 Page: 09
  Org: 00008000  Size: 00004000  Used: 00004000

   Address   Length Align   Label
   00008000   16384         GRAPHIC

 Page: 0A
  Org: 00008000  Size: 00004000  Used: 00004000

   Address   Length Align   Label
   00008000   16384         

 Page: 0B
  Org: 00008000  Size: 00004000  Used: 00004000

   Address   Length Align   Label
   00008000   16384         

 Page: 0C
  Org: 00008000  Size: 00004000  Used: 00001400

   Address   Length Align   Label
   00008000    5120         
   00009400   11264       <empty>

 Page: 0D
  Org: 00008000  Size: 00004000  Used: 00000000

   00008000   16384       <empty>

 Page: 0E
  Org: 00008000  Size: 00004000  Used: 00000000

   00008000   16384       <empty>

 Page: 0F
  Org: 0000C000  Size: 00004000  Used: 00000097

   Address   Length Align   Label
   0000C000     151         JIFFY_TEMP
   0000C097   16233       <empty>
