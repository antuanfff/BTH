Sjasm Z80 Assembler v0.42c - www.xl2s.tk             [2024.05.23 - 17:47:55]

.\sound.asm
Errors: 0

       1   00:0000                      		output	"main.rom"; acuerdate de poner los espacios delante de output
       2   00:4000                      		
       3   00:4000                      		org		#4000
       4   00:4000                      			
       5   00:4000                      		;Cabecera
       6   00:4000  41 42               		db "AB"
       7   00:4002  10 40               		word INICIO
       8   00:4004                      		word 0,0,0,0,0,0				
       8   00:4004  00 00 00 00 00 00 00 00 00 00 00 00 
       9   00:4010                      
      10   00:4010                      
      11   00:4010                      INICIO:
      12   00:4010  CD 1C 40                call Inicializar_variables
      13   00:4013                      
      14   00:4013  CD 27 40                call Actualizar_volumen_canal_a
      15   00:4016  CD 31 40                call Actualizar_tono_canal_a
      16   00:4019  CD 3B 40                call Capturar_teclas
      17   00:401C                      
      18   00:401C                          
      19   00:401C                      Inicializar_variables:
      20   00:401C                      	;les ponemos a todas las variables el valor de #03
      21   00:401C  3E 06               	ld a,#06
      22   00:401E  32 00 F0                ld (#f000),a ;En la direccion #f000 de la RAM estar치 el volumen
      23   00:4021  3E 03               	ld a,#03
      24   00:4023  32 01 F0                ld (#f001),a ;En #f001 estar치 el tono
      25   00:4026  C9                      ret
      26   00:4027                      Actualizar_volumen_canal_a:
      27   00:4027  3E 08               	ld	a, #08 ;Le decimos que queremos configurar el regostro 8 
      28   00:4029  D3 A0               	out (#A0), a
      29   00:402B  3A 00 F0            	ld a, (#f000) ;le ponemos el valor inicial de volumen 3
      30   00:402E  D3 A1               	out (#A1),a
      31   00:4030  C9                  	ret
      32   00:4031                      Actualizar_tono_canal_a:
      33   00:4031  3E 01               	ld a,#01; el regisro que qeuremos modificar para la frecuencia es el 1
      34   00:4033  D3 A0               	out (#A0), a
      35   00:4035  3A 01 F0            	ld a,(#f001) ;le ponemos el valor inicial de tono de 3
      36   00:4038  D3 A1               	out (#A1),a 
      37   00:403A  C9                  	ret
      38   00:403B                      
      39   00:403B                      
      40   00:403B                      
      41   00:403B                      ;********************Este loop estar치 siempre comprobando las teclas********************
      42   00:403B                      Capturar_teclas:
      43   00:403B  CD 02 41                call Escribir_pulsa_una_tecla
      44   00:403E  CD 9F 00                call #009F ; chget pone en el registro a del z80 el caracter ascii que has escrito en el teclado
      45   00:4041  CD A2 00                call #00A2 ;presenta en pantalla el caracter almacenado en el registro a del z80
      46   00:4044  FE 71                   cp 'q'
      47   00:4046  CA 5D 40                jp z, rutinas_pulsacion_subir_volumen
      48   00:4049  FE 61                   cp 'a'
      49   00:404B  CA 6F 40                jp z, rutinas_pulsacion_bajar_volumen
      50   00:404E  FE 6F                   cp 'o'
      51   00:4050  CA 93 40                jp z, rutinas_pulsacion_bajar_tono
      52   00:4053  FE 70                   cp 'p'
      53   00:4055  CA 81 40                jp z, rutinas_pulsacion_subir_tono
      54   00:4058  C2 D5 40                jp nz, Escribir_tecla_no_valida
      55   00:405B                      
      56   00:405B  18 DE                   jr Capturar_teclas
      57   00:405D                      ;********************Final de la comprobaci칩n de teclas*****************************
      58   00:405D                      
      59   00:405D                      rutinas_pulsacion_subir_volumen:
      60   00:405D  CD E1 40                call Borrar_pantalla
      61   00:4060  21 73 41                ld hl, Texto_has_pulsado_subir_volumen ; para imprimir un texto en la pantalla
      62   00:4063  CD F8 40                call Imprimir
      63   00:4066  CD A5 40                call Subir_variable_volumen
      64   00:4069  CD E6 40                call Mostrar_valor_variable_volumen
      65   00:406C  CD 3B 40                call Capturar_teclas
      66   00:406F                      rutinas_pulsacion_bajar_volumen:
      67   00:406F  CD E1 40                call Borrar_pantalla
      68   00:4072  21 8F 41                ld hl, Texto_has_pulsado_bajar_volumen
      69   00:4075  CD F8 40                call Imprimir
      70   00:4078  CD B1 40                call Diminuir_variable_volumen
      71   00:407B  CD E6 40                call Mostrar_valor_variable_volumen
      72   00:407E  CD 3B 40                call Capturar_teclas
      73   00:4081                      rutinas_pulsacion_subir_tono:
      74   00:4081  CD E1 40                call Borrar_pantalla
      75   00:4084  21 AB 41                ld hl, Texto_has_pulsado_subir_tono
      76   00:4087  CD F8 40                call Imprimir
      77   00:408A  CD BD 40                call Subir_variable_tono
      78   00:408D  CD EF 40                call Mostrar_valor_variable_tono
      79   00:4090  CD 3B 40                call Capturar_teclas
      80   00:4093                      rutinas_pulsacion_bajar_tono:
      81   00:4093  CD E1 40                call Borrar_pantalla
      82   00:4096  21 C4 41                ld hl, Texto_has_pulsado_bajar_tono
      83   00:4099  CD F8 40                call Imprimir
      84   00:409C  CD C9 40                call Diminuir_variable_tono
      85   00:409F  CD EF 40                call Mostrar_valor_variable_tono
      86   00:40A2  CD 3B 40                call Capturar_teclas
      87   00:40A5                      
      88   00:40A5                      
      89   00:40A5                      
      90   00:40A5                      
      91   00:40A5                      
      92   00:40A5                      
      93   00:40A5                      Subir_variable_volumen:
      94   00:40A5  3A 00 F0                ld a, (#f000)
      95   00:40A8  C6 01                   add 1
      96   00:40AA  32 00 F0                ld (#f000),a
      97   00:40AD  CD 27 40                call Actualizar_volumen_canal_a
      98   00:40B0  C9                      ret
      99   00:40B1                      Diminuir_variable_volumen:
     100   00:40B1  3A 00 F0                ld a,(#f000)
     101   00:40B4  D6 01                   sub 1    
     102   00:40B6  32 00 F0                ld (#f000),a
     103   00:40B9  CD 27 40                call Actualizar_volumen_canal_a
     104   00:40BC  C9                      ret
     105   00:40BD                      Subir_variable_tono:
     106   00:40BD  3A 01 F0                ld a, (#f001)
     107   00:40C0  C6 01                   add 1
     108   00:40C2  32 01 F0                ld (#f001),a
     109   00:40C5  CD 31 40                call Actualizar_tono_canal_a
     110   00:40C8  C9                      ret
     111   00:40C9                      Diminuir_variable_tono:
     112   00:40C9  3A 01 F0                ld a,(#f001)
     113   00:40CC  D6 01                   sub 1
     114   00:40CE  32 01 F0                ld (#f001),a
     115   00:40D1  CD 31 40                call Actualizar_tono_canal_a
     116   00:40D4  C9                      ret
     117   00:40D5                      
     118   00:40D5                      
     119   00:40D5                      
     120   00:40D5                      Escribir_tecla_no_valida
     121   00:40D5  CD A2 00                call #00A2
     122   00:40D8  21 DD 41                ld hl, Texto_tecla_no_valida
     123   00:40DB  CD F8 40                call Imprimir
     124   00:40DE  CD 3B 40                call Capturar_teclas
     125   00:40E1                      
     126   00:40E1                      Borrar_pantalla:
     127   00:40E1  AF                      XOR a
     128   00:40E2  CD C3 00                call #00C3;borramos la pantalla
     129   00:40E5  C9                      ret
     130   00:40E6                      Mostrar_valor_variable_volumen:
     131   00:40E6  3A 00 F0                ld a,(#f000)
     132   00:40E9  C6 30                   add #30
     133   00:40EB  CD A2 00                call #00A2
     134   00:40EE  C9                      ret
     135   00:40EF                      Mostrar_valor_variable_tono:
     136   00:40EF  3A 01 F0                ld a,(#f001)
     137   00:40F2  C6 30                   add #30
     138   00:40F4  CD A2 00                call #00A2
     139   00:40F7  C9                      ret
     140   00:40F8                      
     141   00:40F8                      Imprimir:
     142   00:40F8  7E                      ld  a,(hl)           
     143   00:40F9  FE 00                   cp 0            
     144   00:40FB  C8                      ret z  
     145   00:40FC  CD A2 00                call #00A2        
     146   00:40FF  23                      inc hl             
     147   00:4100  18 F6                   jr Imprimir 
     148   00:4102                      
     149   00:4102                      Escribir_pulsa_una_tecla:
     150   00:4102  21 10 41                ld hl, Pulsa_una_tecla
     151   00:4105  CD F8 40                call Imprimir
     152   00:4108  C9                      ret
     153   00:4109                      Escribir_texto_final_del_programa:
     154   00:4109  21 49 42                ld hl, Texto_final_del_programa
     155   00:410C  CD F8 40                call Imprimir
     156   00:410F  C9                      ret
     157   00:4110                      
     158   00:4110                      
     159   00:4110                      Pulsa_una_tecla:
     160   00:4110                          db "\n\nPulsa 'q' para subir volumen 'a' para bajar volumen, 'o' para bajar tono y 'q' para subir tono. ",0
     160   00:4110  0A 0A 50 75 6C 73 61 20 27 71 27 20 70 61 72 61 
     160   00:4120  20 73 75 62 69 72 20 76 6F 6C 75 6D 65 6E 20 27 
     160   00:4130  61 27 20 70 61 72 61 20 62 61 6A 61 72 20 76 6F 
     160   00:4140  6C 75 6D 65 6E 2C 20 27 6F 27 20 70 61 72 61 20 
     160   00:4150  62 61 6A 61 72 20 74 6F 6E 6F 20 79 20 27 71 27 
     160   00:4160  20 70 61 72 61 20 73 75 62 69 72 20 74 6F 6E 6F 
     160   00:4170  2E 20 00 
     161   00:4173                      Texto_has_pulsado_subir_volumen:
     162   00:4173                          db "Has pulsado subir volumen. ",0
     162   00:4173  48 61 73 20 70 75 6C 73 61 64 6F 20 73 75 62 69 
     162   00:4183  72 20 76 6F 6C 75 6D 65 6E 2E 20 00 
     163   00:418F                      Texto_has_pulsado_bajar_volumen:
     164   00:418F                          db "Has pulsado bajar volumen. ",0
     164   00:418F  48 61 73 20 70 75 6C 73 61 64 6F 20 62 61 6A 61 
     164   00:419F  72 20 76 6F 6C 75 6D 65 6E 2E 20 00 
     165   00:41AB                      Texto_has_pulsado_subir_tono:
     166   00:41AB                          db "Has pulsado subir tono. ",0
     166   00:41AB  48 61 73 20 70 75 6C 73 61 64 6F 20 73 75 62 69 
     166   00:41BB  72 20 74 6F 6E 6F 2E 20 00 
     167   00:41C4                      Texto_has_pulsado_bajar_tono:
     168   00:41C4                          db "Has pulsado bajar tono. ",0
     168   00:41C4  48 61 73 20 70 75 6C 73 61 64 6F 20 62 61 6A 61 
     168   00:41D4  72 20 74 6F 6E 6F 2E 20 00 
     169   00:41DD                      Texto_tecla_no_valida:
     170   00:41DD                          db "\nTecla no valida 'q' para subir volumen 'a' para bajar volumen, 'o' para bajar tono y 'q' para subir tono. ",0
     170   00:41DD  0A 54 65 63 6C 61 20 6E 6F 20 76 61 6C 69 64 61 
     170   00:41ED  20 27 71 27 20 70 61 72 61 20 73 75 62 69 72 20 
     170   00:41FD  76 6F 6C 75 6D 65 6E 20 27 61 27 20 70 61 72 61 
     170   00:420D  20 62 61 6A 61 72 20 76 6F 6C 75 6D 65 6E 2C 20 
     170   00:421D  27 6F 27 20 70 61 72 61 20 62 61 6A 61 72 20 74 
     170   00:422D  6F 6E 6F 20 79 20 27 71 27 20 70 61 72 61 20 73 
     170   00:423D  75 62 69 72 20 74 6F 6E 6F 2E 20 00 
     171   00:4249                      Texto_final_del_programa:
     172   00:4249                          db "Final del programaa. ",0
     172   00:4249  46 69 6E 61 6C 20 64 65 6C 20 70 72 6F 67 72 61 
     172   00:4259  6D 61 61 2E 20 00 
     173   00:425F                      
     174   00:425F                      
     175   00:425F                      relleno_de_bytes:
     176   00:425F  00 (15777)          		ds	#8000-$	
     177   00:8000                      

    LABELS
-------------------------------------------------
00:00004010   INICIO
00:0000401C   Inicializar_variables
00:00004027   Actualizar_volumen_canal_a
00:00004031   Actualizar_tono_canal_a
00:0000403B   Capturar_teclas
00:0000405D   rutinas_pulsacion_subir_volumen
00:0000406F   rutinas_pulsacion_bajar_volumen
00:00004081   rutinas_pulsacion_subir_tono
00:00004093   rutinas_pulsacion_bajar_tono
00:000040A5   Subir_variable_volumen
00:000040B1   Diminuir_variable_volumen
00:000040BD   Subir_variable_tono
00:000040C9   Diminuir_variable_tono
00:000040D5   Escribir_tecla_no_valida
00:000040E1   Borrar_pantalla
00:000040E6   Mostrar_valor_variable_volumen
00:000040EF   Mostrar_valor_variable_tono
00:000040F8   Imprimir
00:00004102   Escribir_pulsa_una_tecla
00:00004109 X Escribir_texto_final_del_programa
00:00004110   Pulsa_una_tecla
00:00004173   Texto_has_pulsado_subir_volumen
00:0000418F   Texto_has_pulsado_bajar_volumen
00:000041AB   Texto_has_pulsado_subir_tono
00:000041C4   Texto_has_pulsado_bajar_tono
00:000041DD   Texto_tecla_no_valida
00:00004249   Texto_final_del_programa
00:0000425F X relleno_de_bytes


 Output: .\sound.out
-------------------------------------------------

 Page: 00
  Org: 00004000  Size: *  Used: 00000000

    No output

 Output: main.rom
-------------------------------------------------

 Page: 00
  Org: 00004000  Size: *  Used: 00004000

   Address   Length Align   Label
   00004000   16384         INICIO
